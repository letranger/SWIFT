<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-01-05 Tue 10:36 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SwiftUI</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Yung Chin, Yen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://letranger.github.io/org-html-themes/styles/purplereadtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://letranger.github.io/org-html-themes/styles/purplereadtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">SwiftUI</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6528d8b">1. Recommending Reading</a></li>
<li><a href="#SW-UIKIT-SWIFTUI">2. iOS app çš„é–‹ç™¼ç•Œé¢: UIKit v.s. SwiftUI</a>
<ul>
<li><a href="#org983af03">2.1. UIKit èˆ‡ SwiftUI çš„å·®ç•°æ€§</a>
<ul>
<li><a href="#org2346f5e">2.1.1. ç³»çµ±éœ€æ±‚</a></li>
<li><a href="#orgfc932d7">2.1.2. åº•å±¤èªè¨€</a></li>
<li><a href="#org2f88b14">2.1.3. èªæ³•ç°¡æ½”åº¦</a></li>
<li><a href="#org7e7c74d">2.1.4. Declarative vs Imperative Programming</a></li>
<li><a href="#org1c3967a">2.1.5. è·¨å¹³å°</a></li>
<li><a href="#org95c3307">2.1.6. Automatic Preview</a></li>
<li><a href="#org5393bde">2.1.7. è‡ªå‹•æ”¯æ´é€²éšåŠŸèƒ½</a></li>
</ul>
</li>
<li><a href="#org9b14db3">2.2. SwiftUI vs UIKit: Benefits and Drawbacks</a>
<ul>
<li><a href="#org0271fad">2.2.1. Drawbacks of SwiftUI </a></li>
<li><a href="#orgca0ad38">2.2.2. Benefits of SwiftUI </a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#delegate">3. AppDelegate v.s. SceneDelegate</a>
<ul>
<li><a href="#org4c70d97">3.1. SceneDelegate.swift</a></li>
</ul>
</li>
<li><a href="#SW-SWIFTUI-INTRO">4. å»ºç«‹ SwiftUI Project</a>
<ul>
<li><a href="#org2c9c70d">4.1. æ•™å­¸å½±ç‰‡</a></li>
<li><a href="#orgbf51a34">4.2. ä½¿ç”¨ SwiftUI é–‹å•Ÿæ–°å°ˆæ¡ˆ </a>
<ul>
<li><a href="#org4d21314">4.2.1. ContentView.swift</a></li>
</ul>
</li>
<li><a href="#org41b463e">4.3. Text</a>
<ul>
<li><a href="#org038917e">4.3.1. æ”¹è®Š Text çš„å±¬æ€§</a>
<ul>
<li><a href="#org90ed8b3">4.3.1.1. SwiftUI Inspector:</a></li>
<li><a href="#org626b98e">4.3.1.2. Inspector frame</a></li>
<li><a href="#org3429c94">4.3.1.3. code</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf07bae7">4.4. Stack</a>
<ul>
<li><a href="#org982f1a1">4.4.1. Stack èˆ‡ Stack å¯ç›¸äº’åŒ…å«ï¼Œæ–¼ View ä¸­åŠ å…¥ Stack çš„æ–¹å¼æœ‰äºŒ:</a>
<ul>
<li><a href="#org797d369">4.4.1.1. ç”±å·¥å…·åˆ— drag: Xcode æœƒè‡ªå‹•åŠ å…¥ç›¸å°çš„ code</a></li>
<li><a href="#orgd4b7d31">4.4.1.2. coding</a></li>
</ul>
</li>
<li><a href="#org6bcb944">4.4.2. SwiftUI æ’°å¯«åŸå‰‡</a></li>
<li><a href="#org1129cd4">4.4.3. HStack DEMO</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgac152af">5. Image</a>
<ul>
<li><a href="#org2e2f45e">5.1. ä½¿ç”¨ç³»çµ±å…§å»ºçš„åœ–</a>
<ul>
<li><a href="#org4e12647">5.1.1. SF Symbols </a></li>
<li><a href="#org4488428">5.1.2. å¾ iOS 13 é–‹å§‹ï¼ŒApple ä»‹ç´¹äº†ä¸€å€‹åç‚º SFSymbols çš„æ–°åŠŸèƒ½ã€‚SF Symbols é€™åŠŸèƒ½ç”± Apple æ‰€è¨­è¨ˆï¼Œç•¶ä¸­é›†åˆäº† 1500 å¤šå€‹å¯ä»¥åœ¨ App ä¹‹ä¸­ä½¿ç”¨çš„ç¬¦è™Ÿã€‚</a></li>
<li><a href="#orgd9d1ced">5.1.3. Download SF Symbols app</a></li>
<li><a href="#org810665f">5.1.4. code</a></li>
<li><a href="#org453d7f7">5.1.5. Demo</a></li>
</ul>
</li>
<li><a href="#org226d270">5.2. ä½¿ç”¨è‡ªå·±çš„åœ–</a></li>
<li><a href="#org69b4b6e">5.3. Image Attributes</a></li>
<li><a href="#orge0fb535">5.4. Using SF Symbols</a></li>
</ul>
</li>
<li><a href="#org7494985">6. Button</a>
<ul>
<li><a href="#org4e755b4">6.1. èªæ³•</a></li>
<li><a href="#org6d3274a">6.2. å°‡è®Šæ•¸åŠ å…¥ View ä¸­</a></li>
<li><a href="#org5183e37">6.3. å¦‚ä½•æ–¼ç¨‹å¼ä¸­æ”¹è®Š title çš„å€¼ä¾†æ”¹è®Š View çš„é¡¯ç¤ºå…§å®¹?</a></li>
<li><a href="#orgd4d7cd5">6.4. ç¯„ä¾‹: æŒ‰ä¸‹ Buttonï¼Œæ”¹è®Š Text title</a></li>
<li><a href="#org790f4e7">6.5. ä»¥ Button é–‹å•Ÿä¸€å€‹æ–°çš„ View</a></li>
<li><a href="#orga4d70ae">6.6. ä»¥ Button é—œé–‰ View</a></li>
</ul>
</li>
<li><a href="#orgc42bd25">7. TextField (with @State)</a>
<ul>
<li><a href="#org4d6328b">7.1. èªæ³•</a></li>
<li><a href="#org88eff88">7.2. ç¯„ä¾‹: æ–¼ TextField è¼¸å…¥è³‡æ–™ï¼Œé¡¯ç¤ºæ–¼ Text ä¸­</a></li>
<li><a href="#org11af4ab">7.3. ç¯„ä¾‹ 2: @state struct</a></li>
<li><a href="#org80c96cc">7.4. What is @State</a></li>
</ul>
</li>
<li><a href="#SW-CUSTOMIZED-UI-COMPONENTS">8. Customize UI Components</a>
<ul>
<li><a href="#orgfb2ae69">8.1. Text</a>
<ul>
<li><a href="#orgb6e93d7">8.1.1. Advanced Attributes </a></li>
<li><a href="#orge6fdd38">8.1.2. Demo</a></li>
</ul>
</li>
<li><a href="#org283d90a">8.2. Image</a>
<ul>
<li><a href="#orge08039f">8.2.1. Advanced Attributes s</a></li>
<li><a href="#org391c667">8.2.2. Demo</a></li>
</ul>
</li>
<li><a href="#orgd85b072">8.3. Button II</a>
<ul>
<li><a href="#org3532e47">8.3.1. å¤–è§€æ§åˆ¶</a>
<ul>
<li><a href="#org6253d3d">8.3.1.1. Advanced Attributes </a></li>
<li><a href="#org9583f1d">8.3.1.2. Demo</a></li>
</ul>
</li>
<li><a href="#org5cee050">8.3.2. Button v.s. @State</a></li>
</ul>
</li>
<li><a href="#orgebfac0b">8.4. background, opacity</a></li>
<li><a href="#orgfd3ede4">8.5. Further reading</a></li>
</ul>
</li>
<li><a href="#list">9. List</a>
<ul>
<li><a href="#orge29bcac">9.1. What is List</a></li>
<li><a href="#org8312fcb">9.2. æº–å‚™å–®ä¸€ cell æ ¼å¼</a></li>
<li><a href="#org900a2c7">9.3. è½‰å…¥ List æ ¼å¼(éœæ…‹ List)</a>
<ul>
<li><a href="#org3404eee">9.3.1. å°‡æœ€å¤–å±¤çš„ VStack åŠ å…¥ List ä¸­</a></li>
<li><a href="#orge4fd6e8">9.3.2. list èªæ³•</a></li>
<li><a href="#org9c1e54e">9.3.3. çµæœ</a></li>
</ul>
</li>
<li><a href="#orgd6245cc">9.4. å»ºç«‹ list ä¾†æºè³‡æ–™(å‹•æ…‹ List) </a></li>
<li><a href="#orgf32bd34">9.5. å°‡è³‡æ–™é€£çµåˆ°åˆ—è¡¨ä¸­ </a></li>
<li><a href="#org07cbb51">9.6. çµæœ</a></li>
<li><a href="#org761be6d">9.7. ç‚ºä»€éº¼è¦åŠ å…¥ id èˆ‡ Identifiable</a></li>
<li><a href="#orgf6f5503">9.8. Reading source</a></li>
</ul>
</li>
<li><a href="#StateBinding">10. Passing data between Views #1: @Binding</a>
<ul>
<li><a href="#org1103fc4">10.1. Time to use Binding</a></li>
<li><a href="#org4484282">10.2. Demo 1: @State v.s. @Bidning</a>
<ul>
<li><a href="#org7b8b1c5">10.2.1. ContentView.swift</a></li>
<li><a href="#org3da7d54">10.2.2. SwitchView.swift</a></li>
</ul>
</li>
<li><a href="#orgb00e91f">10.3. Demo 2: Sharing multiple variable</a>
<ul>
<li><a href="#org41b5097">10.3.1. User.swift</a></li>
<li><a href="#orgc29173b">10.3.2. ContentView.swift</a></li>
<li><a href="#org47d0b23">10.3.3. EditUser.swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Alert">11. Alert</a>
<ul>
<li><a href="#orgac7488c">11.1. ä»¥ Button è§¸ç™¼</a></li>
<li><a href="#org94cafa7">11.2. ä»¥ TextField è§¸ç™¼</a></li>
</ul>
</li>
<li><a href="#org630e404">12. Tabbed View</a>
<ul>
<li><a href="#org5cd2015">12.1. Create subView</a></li>
<li><a href="#org6d1838b">12.2. è‡ªè¨‚åº•ä¸‹çš„ä¸»æ§ tab bar</a>
<ul>
<li><a href="#org4fef1b1">12.2.1. Change tabView font size</a></li>
<li><a href="#org9fb886e">12.2.2. the color of unselected tab bar</a></li>
<li><a href="#org9c35795">12.2.3. the color of the tab bar item : .accentColor</a></li>
<li><a href="#org83a7d6e">12.2.4. the tab barâ€™s color: appearance()</a>
<ul>
<li><a href="#org9914745">12.2.4.1. init()</a></li>
<li><a href="#orgc0c9d87">12.2.4.2. onAppear()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org07a46d7">12.3. ä»¥ç¨‹å¼æ§åˆ¶ tabbed view çš„ subview çš„åˆ‡æ›</a></li>
<li><a href="#org4c6a9d7">12.4. ä¸€å€‹å„ªç§€çš„ Tab Bar æ‡‰è©²å…·å‚™å“ªäº›ç‰¹é»ï¼Ÿ</a></li>
<li><a href="#orgd22f471">12.5. Further Reading</a></li>
</ul>
</li>
<li><a href="#navigation">13. Navigation Views</a>
<ul>
<li><a href="#org08cdca2">13.1. Navigation bar</a>
<ul>
<li><a href="#org9816c64">13.1.1. Hide Navigation Bar</a>
<ul>
<li><a href="#org556072e">13.1.1.1. NavigationLink</a></li>
<li><a href="#org0a1022e">13.1.1.2. Reading</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8a7cff6">13.2. Create New Views</a>
<ul>
<li><a href="#org7090868">13.2.1. in same file</a>
<ul>
<li><a href="#org4575d3f">13.2.1.1. class exercise</a></li>
</ul>
</li>
<li><a href="#orgacf9ce3">13.2.2. in new file</a></li>
</ul>
</li>
<li><a href="#orgbe15ad8">13.3. Passing parameter(å–®ç´”åƒæ•¸å‚³é)</a></li>
<li><a href="#org5fa065e">13.4. Version-1: Navigation v.s. List v.s. NavigationLink</a></li>
<li><a href="#orgf28758a">13.5. Version-2:</a>
<ul>
<li><a href="#org3373870">13.5.1. Book.swift</a></li>
<li><a href="#org0920243">13.5.2. ContentView.swift</a></li>
<li><a href="#orga061336">13.5.3. DetailView.swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DynamicList">14. Dynamic List</a>
<ul>
<li><a href="#org83b9fb0">14.1. DataModel</a>
<ul>
<li><a href="#orgdada1cb">14.1.1. BookModel.swift (Model)</a></li>
</ul>
</li>
<li><a href="#org235d85d">14.2. ViewModel</a>
<ul>
<li><a href="#orgb7b2673">14.2.1. Book.swift</a></li>
</ul>
</li>
<li><a href="#orgaf09774">14.3. ä¸»ç•«é¢</a>
<ul>
<li><a href="#orgf12854a">14.3.1. ContentView.swift</a></li>
</ul>
</li>
<li><a href="#org08cc9c8">14.4. åŠ å…¥æ–°è¨˜éŒ„</a>
<ul>
<li><a href="#org2fa28be">14.4.1. AddNewBook.swift</a></li>
</ul>
</li>
<li><a href="#org84b7bf2">14.5. åŠ å…¥æœå°‹åŠŸèƒ½</a></li>
</ul>
</li>
<li><a href="#ObservedObject">15. Passing data between Views #2: @ObservedObject</a>
<ul>
<li><a href="#org04820d8">15.1. ObservedObject ç¯„ä¾‹</a></li>
<li><a href="#orgf9f487c">15.2. ObservedObject ç‰¹æ€§</a></li>
<li><a href="#org1fc0108">15.3. @ObservedObject v.s. @ObjectBinding</a></li>
</ul>
</li>
<li><a href="#EnvironmentObject">16. Passing data between Views #3: @EnvironmentObject</a>
<ul>
<li><a href="#org6f220e9">16.1. @EnvironmentObject èˆ‡@ObservedObject çš„ç•°åŒ</a>
<ul>
<li><a href="#org9ec4c99">16.1.1. ç›¸åŒ</a></li>
<li><a href="#orgf9ec651">16.1.2. å·®ç•°</a></li>
<li><a href="#org4ef2742">16.1.3. ç¯„ä¾‹</a></li>
</ul>
</li>
<li><a href="#orgc79dbe6">16.2. EnvironmentObject è¨­å®šæ–¹å¼</a>
<ul>
<li><a href="#org9097686">16.2.1. å»ºç«‹ EnvironmentObject class</a></li>
<li><a href="#orgc9eb4b4">16.2.2. è¨­å®š app ç’°å¢ƒ</a>
<ul>
<li><a href="#org70e9674">16.2.2.1. Xcode 11.X: SceneDeleate.swift</a></li>
<li><a href="#org682983e">16.2.2.2. Xcode 12.X: xxxApp.swift</a></li>
</ul>
</li>
<li><a href="#org94a6e76">16.2.3. è¨­å®š Client View</a>
<ul>
<li><a href="#orga4af86e">16.2.3.1. Read</a></li>
<li><a href="#orga17aea2">16.2.3.2. Write</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgbb6da67">16.3. ç¯„ä¾‹</a>
<ul>
<li><a href="#org462eac4">16.3.1. ShoppingCart.swift</a></li>
<li><a href="#org2ac3443">16.3.2. ç’°å¢ƒè¨­å®š SceneDelegate.swift / xxxApp.swift</a>
<ul>
<li><a href="#org83c22ff">16.3.2.1. èˆŠç‰ˆ: SceneDelegate.swift</a></li>
<li><a href="#org7cef180">16.3.2.2. æ–°ç‰ˆ: xxxApp.swift</a></li>
</ul>
</li>
<li><a href="#orgbacb77d">16.3.3. ContentView.swift</a></li>
<li><a href="#org9ded6ea">16.3.4. SecondView</a></li>
</ul>
</li>
<li><a href="#orgd0abd73">16.4. Further Reading</a></li>
</ul>
</li>
<li><a href="#UserDefaults">17. UserDefaults</a>
<ul>
<li><a href="#orgc5a5591">17.1. å¹¾ç¨®å¯ä»¥åœ¨ iOS app æ°¸ä¹…å„²å­˜è³‡æ–™çš„æ–¹å¼:</a></li>
<li><a href="#orgfd311bd">17.2. UserDefautls</a></li>
<li><a href="#org276e156">17.3. Using userDefaults</a>
<ul>
<li><a href="#org6b652d9">17.3.1. Storing Data</a></li>
<li><a href="#org84f7cd5">17.3.2. Retrieving Data</a></li>
</ul>
</li>
<li><a href="#org23d0cb0">17.4. Demo</a>
<ul>
<li><a href="#orgc89f361">17.4.1. Create UserDefault.swift</a></li>
<li><a href="#org4d28a29">17.4.2. use userSetting in ContentView.swift</a></li>
<li><a href="#org25fd24f">17.4.3. BookList: UserDefault v.s. @EnvironmentObject</a>
<ul>
<li><a href="#orgfe53c10">17.4.3.1. UserSettings.swift</a></li>
<li><a href="#orge6ebc87">17.4.3.2. ContentView.swift</a></li>
<li><a href="#org00aeb18">17.4.3.3. settingView.swift</a></li>
<li><a href="#org8df77bf">17.4.3.4. SceneDelegate.swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8d3e662">17.5. Reading Resources</a></li>
</ul>
</li>
<li><a href="#Wrappers">18. Passing data between Views #4: Property Wrappers</a>
<ul>
<li><a href="#orgf148d99">18.1. SwiftUI çš„ç‹€æ…‹ç®¡ç†</a></li>
<li><a href="#org75b6260">18.2. @StateObject v.s. @ObservedObject</a>
<ul>
<li><a href="#orgcf7c6e7">18.2.1. ç¨‹å¼ç¯„ä¾‹</a></li>
<li><a href="#org59e1d8e">18.2.2. Create once</a></li>
</ul>
</li>
<li><a href="#org3e5939c">18.3. ä½¿ç”¨@EnvironmentObject ä¿æŒç‹€æ…‹</a></li>
<li><a href="#org2d26cdb">18.4. Property wrapper syntactic Sugar</a></li>
<li><a href="#orgdfbd847">18.5. å„ç¨® property wrapper æ¯”è¼ƒ</a></li>
</ul>
</li>
<li><a href="#orgc54816f">19. Filtered List</a>
<ul>
<li><a href="#org802d9d4">19.1. Model</a></li>
<li><a href="#orgf75e884">19.2. ViewModel</a></li>
<li><a href="#org539121e">19.3. ä¸»ç•«é¢</a></li>
</ul>
</li>
<li><a href="#SW-MVVM">20. MVVM</a>
<ul>
<li><a href="#orga75cc01">20.1. Design pattern</a></li>
<li><a href="#orgb4c3c1e">20.2. What is the idea behind MVVM</a>
<ul>
<li><a href="#org9aa5212">20.2.1. Model</a></li>
<li><a href="#org7c786db">20.2.2. View</a></li>
<li><a href="#orgb4d1baa">20.2.3. ViewModel</a></li>
<li><a href="#org84d2837">20.2.4. ç‚ºä»€éº¼è¦æ‹†æˆä¸‰éƒ¨ä»½(What does it solve?)</a></li>
<li><a href="#org999c6b2">20.2.5. Limitations / Cons</a></li>
</ul>
</li>
<li><a href="#org75858d7">20.3. DEMO</a></li>
<li><a href="#org25aea3c">20.4. Model è¦ç”¨ Struct æˆ–æ˜¯ Class</a>
<ul>
<li><a href="#org4653788">20.4.1. Struct èˆ‡ Class çš„ä¸åŒæ€§è³ª</a></li>
<li><a href="#org1991eae">20.4.2. MMVM ä¸­çš„ Model</a></li>
</ul>
</li>
<li><a href="#org679a15e">20.5. DICE DEMO</a></li>
<li><a href="#orgd884801">20.6. Further Reading Resources</a></li>
</ul>
</li>
<li><a href="#org0f85e65">21. Web API: URLSession v.s. JSONDecoder</a>
<ul>
<li><a href="#org805571c">21.1. Demo 1</a>
<ul>
<li><a href="#orgfabdb54">21.1.1. ContentView.swift</a></li>
</ul>
</li>
<li><a href="#org0042d20">21.2. Demo 2</a>
<ul>
<li><a href="#org7733137">21.2.1. MVVM</a></li>
<li><a href="#org67e0439">21.2.2. FlowModel.swift</a></li>
<li><a href="#org730c74a">21.2.3. ContentView.swift</a></li>
<li><a href="#org3dfb97c">21.2.4. Flow.swift</a></li>
<li><a href="#orgcf87b22">21.2.5. Result</a></li>
</ul>
</li>
<li><a href="#orge775886">21.3. å…¬é–‹è³‡æ–™å¹³å°</a></li>
<li><a href="#org382938b">21.4. Further Reading</a></li>
</ul>
</li>
<li><a href="#SW-Protocols">22. <span class="todo STRT">STRT</span> Protocols</a>
<ul>
<li><a href="#orgefc34ca">22.1. Protocol Syntax</a>
<ul>
<li><a href="#org69dfcc7">22.1.1. Syntax</a></li>
<li><a href="#org1da108f">22.1.2. DEMO</a></li>
<li><a href="#orgbb21fd3">22.1.3. Adding property requirements</a></li>
<li><a href="#org949943c">22.1.4. Protocols with mutating methods</a></li>
<li><a href="#org2157679">22.1.5. Initializer Requirements</a></li>
</ul>
</li>
<li><a href="#org2d55844">22.2. DEMO</a></li>
<li><a href="#orgb681302">22.3. ç¯„ä¾‹</a>
<ul>
<li><a href="#org0f5dfd8">22.3.1. ç‰ˆæœ¬ 1</a></li>
<li><a href="#org80d2417">22.3.2. ç‰ˆæœ¬ 2</a></li>
<li><a href="#orgcff9ea3">22.3.3. ç‰ˆæœ¬ 3</a></li>
</ul>
</li>
<li><a href="#org1b5cf20">22.4. mutating</a></li>
<li><a href="#org8614839">22.5. æ“´å…… protocol</a></li>
<li><a href="#org31f085b">22.6. Further Reading</a></li>
</ul>
</li>
<li><a href="#orga22ff01">23. Struct v.s. Class</a>
<ul>
<li><a href="#orgc8ca8e4">23.1. What is in class/struct</a>
<ul>
<li><a href="#orgc93348f">23.1.1. What is a class in Swift?</a></li>
<li><a href="#org3748b59">23.1.2. What is a struct in Swift?</a></li>
<li><a href="#org25d44e0">23.1.3. What are the differences between a struct and a class?</a>
<ul>
<li><a href="#orgb753df9">23.1.3.1. The benefit of mutation in safety</a></li>
<li><a href="#orge1c261b">23.1.3.2. Structs get an initializer for free</a></li>
<li><a href="#orgeb299cc">23.1.3.3. Classes allow inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2bf515d">23.2. å¦‚ä½•æ±ºæ“‡? / When should I go for a struct and when for a class?</a>
<ul>
<li><a href="#org08b5f0a">23.2.1. You should use a class when:</a></li>
<li><a href="#org321363d">23.2.2. You should use a struct when:</a></li>
<li><a href="#org3d5beef">23.2.3. Try to go for a struct by default.</a></li>
</ul>
</li>
<li><a href="#org108e6b8">23.3. DEMO</a></li>
</ul>
</li>
<li><a href="#some">24. <span class="todo TODO">TODO</span> some</a>
<ul>
<li><a href="#org562f3f9">24.1. Generics</a>
<ul>
<li><a href="#org4672418">24.1.1. å•é¡Œ</a></li>
<li><a href="#org6115757">24.1.2. è§£æ±ºæ–¹æ¡ˆ</a></li>
</ul>
</li>
<li><a href="#orge50f362">24.2. opaque</a></li>
</ul>
</li>
<li><a href="#advanced">25. <span class="todo TODO">TODO</span> é€²éšä¸»é¡Œ</a></li>
<li><a href="#org29ac339">26. Firebase</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6528d8b" class="outline-2">
<h2 id="org6528d8b"><span class="section-number-2">1</span> Recommending Reading</h2>
<div class="outline-text-2" id="text-1">
<p>
é€™äº›éƒ½åªæ˜¯ç‚ºäº†é¸ä¿®èª²è‡¨æ™‚æ•´ç†çš„æ•™æï¼Œå…§å®¹æ·±åº¦èˆ‡å»£åº¦éƒ½æœ‰é™ï¼Œå»ºè­°æœ‰å­¸ç¿’é‡å¿ƒçš„åŒå­¸é‚„æ˜¯å¤šå¤šå»è®€å…¶ä»–çš„è³‡æ–™ï¼š<br />
</p>
<ul class="org-ul">
<li><a href="https://www.hackingwithswift.com/100/swiftui">100 Days of SwfitUI</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-SW-UIKIT-SWIFTUI" class="outline-2">
<h2 id="SW-UIKIT-SWIFTUI"><span class="section-number-2">2</span> iOS app çš„é–‹ç™¼ç•Œé¢: UIKit v.s. SwiftUI</h2>
<div class="outline-text-2" id="text-SW-UIKIT-SWIFTUI">
</div>
<div id="outline-container-org983af03" class="outline-3">
<h3 id="org983af03"><span class="section-number-3">2.1</span> UIKit èˆ‡ SwiftUI çš„å·®ç•°æ€§</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org2346f5e" class="outline-4">
<h4 id="org2346f5e"><span class="section-number-4">2.1.1</span> ç³»çµ±éœ€æ±‚</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
UIKit æ˜¯å¾ Xcode1 å°±ä¸€ç›´å­˜åœ¨çš„ Frameworkï¼›è€Œ SwiftUI å‰‡æ˜¯ 2019/6 WWDC æ‰€ç™¼è¡¨çš„å…¨æ–°ç”¨ä¾†ç¹ªè£½ UI çš„ Frameworkã€‚å› æ­¤ï¼ŒSwiftUI å¿…é ˆæ­é… iOS13+ å’Œ MacOS10.15+ã€‚<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup><br />
</p>
</div>
</div>
<div id="outline-container-orgfc932d7" class="outline-4">
<h4 id="orgfc932d7"><span class="section-number-4">2.1.2</span> åº•å±¤èªè¨€</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
UIKit åº•å±¤ä»ç‚º Objecitve-Cï¼›è€Œ SwiftUI å‰‡æ˜¯å®Œå®Œå…¨å…¨ç”¨ Swift æ‰“é€ çš„ Frameworkã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org2f88b14" class="outline-4">
<h4 id="org2f88b14"><span class="section-number-4">2.1.3</span> èªæ³•ç°¡æ½”åº¦</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
SwiftUI ç”¢ç”Ÿä¸€é¡¯ç¤ºæ–‡å­—çš„å…ƒä»¶æ›´ç²¾ç°¡æ½”äº†ã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org7e7c74d" class="outline-4">
<h4 id="org7e7c74d"><span class="section-number-4">2.1.4</span> Declarative vs Imperative Programming</h4>
<div class="outline-text-4" id="text-2-1-4">
<ul class="org-ul">
<li>imperative programmingï¼šå‘Šè¨´é›»è…¦å¦‚ä½•åš(HOW)ä¾†å¾—åˆ°æˆ‘å€‘æƒ³è¦çš„çµæœ(WHAT)ï¼Œå¦‚ Java, C++, PHP, C#, Swift<br /></li>
<li>declarative programmingï¼šå‘Šè¨´é›»è…¦æˆ‘å€‘æƒ³è¦çš„çµæœ(WHAT)ï¼Œè®“é›»è…¦æ±ºå®šå¦‚ä½•åš(HOW)ï¼Œå¦‚ SwiftUI<br /></li>
</ul>
</div>
</div>

<div id="outline-container-org1c3967a" class="outline-4">
<h4 id="org1c3967a"><span class="section-number-4">2.1.5</span> è·¨å¹³å°</h4>
<div class="outline-text-4" id="text-2-1-5">
<p>
è·¨å¹³å°æŒ‡çš„éè·¨ Android(ä½†å¸Œæœ›æœ‰é‚£éº¼ä¸€å¤©æ˜¯å¯ä»¥æ”¯æ´çš„ğŸ˜€)ã€‚è·¨å¹³å°æŒ‡çš„æ˜¯ä½¿ç”¨ SwiftUI æ‰€é–‹ç™¼çš„å°ˆæ¡ˆï¼Œå¯ä»¥åŒæ™‚æ”¯æ´ macOSã€watchOSã€tvOS ç­‰ç³»çµ±ã€‚å¼•ç”¨ä¸€å¥ WWDC2019 SwiftUI æ¼”è¬›è€…æ‰€èªªçš„ä¸€å¥è©±ã€‚<br />
</p>
<blockquote>
<p>
Learn once, apply everywhere.<br />
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org95c3307" class="outline-4">
<h4 id="org95c3307"><span class="section-number-4">2.1.6</span> Automatic Preview</h4>
<div class="outline-text-4" id="text-2-1-6">
<p>
é€™æ˜¯æ­¤æ¬¡ SwiftUI æœ€å¤§çš„äº®é»ä¹‹ä¸€ï¼Œæ‰€è¬‚ Automatic Previewï¼Œæ„æ€æŒ‡çš„æ˜¯å³æ™‚é è¦½ï¼Œå³æˆ‘å€‘ä¸€é‚Šèª¿æ•´ç¨‹å¼ç¢¼çš„åŒæ™‚ï¼Œä¹Ÿå¯ä»¥ç«‹å³çœ‹åˆ°ä¿®æ”¹å¾Œçš„çµæœã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org5393bde" class="outline-4">
<h4 id="org5393bde"><span class="section-number-4">2.1.7</span> è‡ªå‹•æ”¯æ´é€²éšåŠŸèƒ½</h4>
<div class="outline-text-4" id="text-2-1-7">
<p>
SwiftUI æœ¬èº«å³æ”¯æ´ Dynamic Typeã€Dark Modeã€ Localization ç­‰ç­‰ã€‚é€™é‚Šç‰¹åˆ¥ä¾†è¬›ä¸€ä¸‹ UIKit å’Œ SwiftUI åœ¨æ–‡å­—è¨­å®šä¸Šæœ‰é—œæ–¼ Dark Mode çš„å·®ç•°ï¼ŒUIKit è‹¥æ˜¯ç„¡ç‰¹åˆ¥æŒ‡å®šæ–‡å­—çš„é¡è‰²(æ„å³ä½¿ç”¨ Default çš„é¸é …)ï¼Œåœ¨ Light Mode å­—é«”æœƒæ˜¯ç™½è‰²ï¼›ç›¸å°çš„åœ¨ Dark Mode å³æœƒæ˜¯ç™½è‰²ï¼Œé€™é»è·Ÿ SwiftUI æ²’æœ‰ç‰¹åˆ¥çš„å·®ç•°ï¼Œä½†æ˜¯ SwiftUI é™¤äº† Default å¤–ï¼Œé‚„æœ‰ Secondaryï¼Œå¦‚æœé‚„ä¸å–œæ­¡çš„è©±ï¼Œé‚„æœ‰ç¬¬ä¸‰å€‹é¸é …ï¼Œå°±æ˜¯åœ¨ Assets è‡ªè¡Œè¨­å®š Light Mode å’Œ Dark Mode åˆ†åˆ¥è¦é¡¯ç¤ºçš„é¡è‰²ã€‚<br />
</p>

<div id="orge897ca4" class="figure">
<p><img src="images/differences.png" alt="differences.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 1: </span>UIKit èˆ‡ SwiftUI çš„å·®ç•°æ€§æ¯”è¼ƒåœ–</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org9b14db3" class="outline-3">
<h3 id="org9b14db3"><span class="section-number-3">2.2</span> SwiftUI vs UIKit: Benefits and Drawbacks</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-org0271fad" class="outline-4">
<h4 id="org0271fad"><span class="section-number-4">2.2.1</span> Drawbacks of SwiftUI <sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup></h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>It supports only iOS 13 and Xcode 11. By switching to them, you abandon users of older versions of iOS, which is a radical move devoid of concern for the user. But since Apple annually updates its list of supported iOS versions, I think SwiftUI will be used more over the next two years as users install the latest iOS version.<br /></li>
<li>Itâ€™s still very young, so there isnâ€™t much data on <a href="https://stackoverflow.com/">Stack Overflow</a>. This means that you canâ€™t get much help resolving complicated issues.<br /></li>
<li>It doesnâ€™t allow you to examine the view hierarchy in Xcode Previews.<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgca0ad38" class="outline-4">
<h4 id="orgca0ad38"><span class="section-number-4">2.2.2</span> Benefits of SwiftUI <sup><a id="fnr.2.100" class="footref" href="#fn.2">2</a></sup></h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>Itâ€™s easy to learn, and the code is simple and clean.<br /></li>
<li>It can be mixed with UIKit using UIHostingController.<br /></li>
<li>It allows you to easily manage themes. Developers can easily add dark mode to their apps and set it as the default theme, and users can easily enable dark mode. Besides, it looks awesome.<br /></li>
<li>SwiftUI provides mechanisms for reactive programming enthusiasts with BindableObject, ObjectBinding, and the whole Combine framework.<br /></li>
<li>It offers Live Preview. This is a very convenient and progressive way to see the results of code execution in real time without having to build. Iâ€™m not sure if it somehow affects the processor. So far, Iâ€™ve noticed a delay provoked by the use of Live Preview, but I think Apple will soon make improvements.<br /></li>
<li>SwiftUI no longer needs Interface Builder. It was replaced by Canvas, an interactive interface editor. When writing code, the visual part in Canvas is automatically generated, and when you create visual presentation elements, they automatically appear in the code.<br /></li>
<li>Your application will no longer crash if you forget to update the @IBOutlet association with the variable.<br /></li>
<li><p>
Thereâ€™s no AutoLayout or related problems. Instead, you use things like HStack, VStack, ZStack, Groups, Lists, and more. Unlike AutoLayout, SwiftUI always produces a valid layout. Thereâ€™s no such thing as an ambiguous or unsatisfiable layout. SwiftUI replaces storyboards with code, making it easy to create a reusable view and avoid conflicts related with the simultaneous use of one project by the development team.<br />
</p></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-delegate" class="outline-2">
<h2 id="delegate"><span class="section-number-2">3</span> AppDelegate v.s. SceneDelegate</h2>
<div class="outline-text-2" id="text-delegate">
<ul class="org-ul">
<li>AppDelegate åŸä¾†çš„è·è²¬ç‚ºè² è²¬ App çš„ç”Ÿå‘½é€±æœŸå’Œ UI ç”Ÿå‘½é€±æœŸï¼Œåœ¨ Xcode11 å¾Œï¼ŒAppDelegate å°‡ UI çš„ç”Ÿå‘½é€±æœŸ(Scene Session)äº¤çµ¦ SceneDelegateã€‚åŸ Xcode10<br /></li>
<li>ä½¿ç”¨ Swift ç‚º User Interface çš„å°ˆæ¡ˆ Launch çš„ç”Ÿå‘½é€±æœŸç‚º AppDelegate â†’ ViewControllerï¼Œè€Œä½¿ç”¨ SwiftUI ç‚º User Interface çš„å°ˆæ¡ˆå‰‡è®Šæˆç‚º AppDelegate â†’ SceneDelegate â†’ ContentViewï¼ŒåŸæœ¬æ‡‰è©²å‡ºç¾åœ¨ AppDelegate çš„ applicationWillEnterForeground(_:) ç­‰ç›¸é—œ App åˆ°å‰ã€èƒŒæ™¯ç­‰ç›¸é—œçš„ç”Ÿå‘½é€±æœŸé‚è¼¯ä¹Ÿéƒ½ç§»è‡³ SceneDelegate è£¡äº†ï¼Œmethod åç¨± application çš„å‰ç¶´å­—ä¹Ÿéƒ½æ›´æ”¹ç‚º scene äº†ã€‚<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup><br /></li>
</ul>
</div>
<div id="outline-container-org4c70d97" class="outline-3">
<h3 id="org4c70d97"><span class="section-number-3">3.1</span> SceneDelegate.swift</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> UIKit
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">SceneDelegate</span>: UIResponder, UIWindowSceneDelegate {
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> window: UIWindow?
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">scene</span>(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.<span style="color: #dcaeea;">ConnectionOptions</span>) {
<span class="linenr"> 9: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use this method to optionally configure and attach the UIWindow `window` to the provided UIWindowScene `scene`.</span>
<span class="linenr">10: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">If using a storyboard, the `window` property will automatically be initialized and attached to the scene.</span>
<span class="linenr">11: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">This delegate does not imply the connecting scene or session are new (see `application:configurationForConnectingSceneSession` instead).</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Create the SwiftUI view that provides the window contents.</span>
<span class="linenr">14: </span>        <span style="color: #51afef;">let</span> contentView = <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">15: </span>
<span class="linenr">16: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use a UIHostingController as window root view controller.</span>
<span class="linenr">17: </span>        <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> windowScene = scene <span style="color: #51afef;">as</span>? UIWindowScene {
<span class="linenr">18: </span>            <span style="color: #51afef;">let</span> window = <span style="color: #c678dd;">UIWindow</span>(windowScene: windowScene)
<span class="linenr">19: </span>            window.<span style="color: #dcaeea;">rootViewController</span> = <span style="color: #c678dd;">UIHostingController</span>(rootView: contentView)
<span class="linenr">20: </span>            <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">window</span> = window
<span class="linenr">21: </span>            window.<span style="color: #c678dd;">makeKeyAndVisible</span>()
<span class="linenr">22: </span>        }
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>
<span class="linenr">25: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sceneDidDisconnect</span>(_ scene: UIScene) {
<span class="linenr">26: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Called as the scene is being released by the system.</span>
<span class="linenr">27: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">This occurs shortly after the scene enters the background, or when its session is discarded.</span>
<span class="linenr">28: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Release any resources associated with this scene that can be re-created the next time the scene connects.</span>
<span class="linenr">29: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">The scene may re-connect later, as its session was not neccessarily discarded (see `application:didDiscardSceneSessions` instead).</span>
<span class="linenr">30: </span>    }
<span class="linenr">31: </span>
<span class="linenr">32: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sceneDidBecomeActive</span>(_ scene: UIScene) {
<span class="linenr">33: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Called when the scene has moved from an inactive state to an active state.</span>
<span class="linenr">34: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use this method to restart any tasks that were paused (or not yet started) when the scene was inactive.</span>
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>
<span class="linenr">37: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sceneWillResignActive</span>(_ scene: UIScene) {
<span class="linenr">38: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Called when the scene will move from an active state to an inactive state.</span>
<span class="linenr">39: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">This may occur due to temporary interruptions (ex. an incoming phone call).</span>
<span class="linenr">40: </span>    }
<span class="linenr">41: </span>
<span class="linenr">42: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sceneWillEnterForeground</span>(_ scene: UIScene) {
<span class="linenr">43: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Called as the scene transitions from the background to the foreground.</span>
<span class="linenr">44: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use this method to undo the changes made on entering the background.</span>
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>
<span class="linenr">47: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sceneDidEnterBackground</span>(_ scene: UIScene) {
<span class="linenr">48: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Called as the scene transitions from the foreground to the background.</span>
<span class="linenr">49: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use this method to save data, release shared resources, and store enough scene-specific state information</span>
<span class="linenr">50: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">to restore the scene back to its current state.</span>
<span class="linenr">51: </span>    }
<span class="linenr">52: </span>}
<span class="linenr">53: </span>
<span class="linenr">54: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SceneDelegate_Previews</span>: PreviewProvider {
<span class="linenr">55: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">56: </span>        <span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@START_MENU_TOKEN@*/</span><span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Hello, World!"</span>)<span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@END_MENU_TOKEN@*/</span>
<span class="linenr">57: </span>    }
<span class="linenr">58: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-SW-SWIFTUI-INTRO" class="outline-2">
<h2 id="SW-SWIFTUI-INTRO"><span class="section-number-2">4</span> å»ºç«‹ SwiftUI Project</h2>
<div class="outline-text-2" id="text-SW-SWIFTUI-INTRO">
</div>
<div id="outline-container-org2c9c70d" class="outline-3">
<h3 id="org2c9c70d"><span class="section-number-3">4.1</span> æ•™å­¸å½±ç‰‡</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=VlhcNR7Qrno">Your First SwiftUI App (Full Compilation!)</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=jbtqIBpUG7g">Lecture 1: Course Logistics and Introduction to SwiftUI</a>: Stanford University CS193p<br /></li>
<li><a href="https://www.youtube.com/watch?v=4GjXq2Sr55Q&amp;t=5254s">Lecture 2: MVVM and the Swift Type System</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=uUMWEu2YJew&amp;list=PLuoeXyslFTuZRi4q4VT6lZKxYbr7so1Mr">SwiftUI by Paul Hudson: Play All</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=uUMWEu2YJew">Understanding the basic structure of a SwiftUI app â€“  WeSplit SwiftUI Tutorial 1/10</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=BB3Gi4CGKrA">Creating a form â€“ WeSplit SwiftUI Tutorial 2/10</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=K5628N_vTCs">Pushing new views onto the stack using NavigationLink â€“ Moonshot SwiftUI Tutorial 3/10</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=46vqD5OPdys">Modifying program state â€“ WeSplit SwiftUI Tutorial 4/10</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=IG1os9XXNiI&amp;list=PLuoeXyslFTuZRi4q4VT6lZKxYbr7so1Mr&amp;index=5">Binding state to user interface controls â€“ WeSplit SwiftUI Tutorial 5/10</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=JGlWrqMbizI">SwiftUI - Calculator Demo from Stanford iOS Course Part 1 of 2</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=cjrAWGcpwJM">The Calculator (part 1) - Learn Swift UI</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=cbqMkIG6Qeg">Understanding MVVM Design Pattern</a>: è¬›çš„è¶…æ¸…æ¥š<br /></li>
<li><a href="https://www.youtube.com/user/azamsharp/videos">azamsharp SwiftUI Videos</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=nc-n5Gc8wN0">ç³»åˆ—: Setting up - SwiftUI Starter Project 1/14</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgbf51a34" class="outline-3">
<h3 id="orgbf51a34"><span class="section-number-3">4.2</span> ä½¿ç”¨ SwiftUI é–‹å•Ÿæ–°å°ˆæ¡ˆ <sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></h3>
<div class="outline-text-3" id="text-4-2">
<ol class="org-ol">
<li>é¦–å…ˆï¼Œæ‰“é–‹ Xcodeï¼Œä¸¦é»æ“Š Create new Xcode projectã€‚åœ¨ iOS ä¹‹ä¸‹é¸æ“‡ Single View Appï¼Œä¸¦ç‚ºå°ˆæ¡ˆå‘½åã€‚<br /></li>
<li>ç„¶å¾Œåœ¨ä¸‹æ–¹å‹¾é¸ Use SwiftUI çš„é¸é …ï¼Œå¦‚æœæ²’æœ‰å‹¾é¸è©²é¸é …çš„è©±ï¼ŒXcode æœƒè‡ªå‹•ç”¢ç”Ÿ storyboard æª”æ¡ˆ(UIKit)ã€‚<br /></li>
<li>Xcode æœƒè‡ªå‹•å¹«ä½ å‰µå»ºä¸€å€‹åç‚º ContentView.swif çš„æª”æ¡ˆï¼ŒXcode æœƒåœ¨ç¨‹å¼ç¢¼çš„å³é‚Šå‘ˆç¾ä¸€å€‹å³æ™‚çš„é è¦½è¦–çª—(preview), é»é¸ resume éˆ•ç”Ÿæˆé è¦½ç•«é¢(æœƒèŠ±ä¸€é»æ™‚é–“)ã€‚<br /></li>
</ol>
</div>
<div id="outline-container-org4d21314" class="outline-4">
<h4 id="org4d21314"><span class="section-number-4">4.2.1</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span id="coderef-import" class="coderef-off"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI</span>
<span class="linenr"> 2: </span>
<span id="coderef-struct" class="coderef-off"><span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {</span>
<span id="coderef-vg" class="coderef-off"><span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {</span>
<span id="coderef-text" class="coderef-off"><span class="linenr"> 5: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#25991;&#23383;"</span>)</span>
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span id="coderef-preview" class="coderef-off"><span class="linenr"> 9: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">11: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div>
<ul class="org-ul">
<li>ç¬¬<a href="#coderef-import" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-import');" onmouseout="CodeHighlightOff(this, 'coderef-import');">1</a>è¡Œå’Œ C++ä¸­çš„#include &lt;iostream&gt;åŒæ„ï¼Œå…ˆåŒ¯å…¥æ‰€éœ€å‡½å¼åº«<br /></li>
<li>ç¬¬<a href="#coderef-struct" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-struct');" onmouseout="CodeHighlightOff(this, 'coderef-struct');">3</a>è¡Œèªªæ˜æœ‰ä¸€å€‹ struct åç‚º ContentViewï¼Œé€™å€‹ ContentView conform(å°Šå¾ª)View é€™å€‹ Protocolï¼Œé€™ä»£è¡¨å¿…é ˆæœ‰ä¸€å€‹ some view æˆ–å›å‚³ä¸€å€‹ some view<br /></li>
<li>åœ¨ ContentView ä¸­ï¼Œæœ‰ä¸€å€‹å« body çš„è®Šæ•¸(ç¬¬<a href="#coderef-vg" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-vg');" onmouseout="CodeHighlightOff(this, 'coderef-vg');">4</a>è¡Œ)ï¼Œé€™å€‹ body çš„å›å‚³é¡å‹ç‚º some viewï¼Œsome ç‚º swift 5.1 å‡ºç¾çš„æ–° keywordï¼Œå±¬æ–¼ opaque å›å‚³é¡å‹ï¼Œä»£è¡¨å®ƒæœƒå›å‚³æŸäº›é¡å‹ç‚º view çš„å€¼ï¼Œè‡³æ–¼å¯¦éš›å›å‚³çš„æ˜¯é‚£ä¸€ç¨®é¡å‹çš„ viewï¼Œswift ä¸¦ä¸å¤ªåœ¨æ„<br /></li>
<li>ç¬¬<a href="#coderef-text" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-text');" onmouseout="CodeHighlightOff(this, 'coderef-text');">5</a>è¡Œçš„æœ€å‰é¢çœç•¥äº†ä¸€å€‹ returnï¼Œæ„æ€æ˜¯ body é€™å€‹ variable æœ€å¾Œæœƒå‚³å›ä¸€å€‹ Text, å³ï¼Œå‘ˆç¾åœ¨ View ä¸Šï¼Œbody åªèƒ½å›å‚³ä¸€å€‹å€¼ï¼Œè‹¥ view ä¸Šé¢æœ‰è¨±å¤šç‰©ä»¶ï¼Œå‰‡éœ€åŒ…å«é€²ä¸€å€‹ container ä¸­ï¼Œæœ€å¾Œå›å‚³é€™ä¸€å€‹ containerã€‚<br /></li>
<li>ç¬¬<a href="#coderef-preview" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-preview');" onmouseout="CodeHighlightOff(this, 'coderef-preview');">9</a>è¡Œçš„ ContentView<sub>Previews</sub> è² è²¬ç”¢ç”Ÿé è¦§ç•«é¢ã€‚<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org41b463e" class="outline-3">
<h3 id="org41b463e"><span class="section-number-3">4.3</span> Text</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-org038917e" class="outline-4">
<h4 id="org038917e"><span class="section-number-4">4.3.1</span> æ”¹è®Š Text çš„å±¬æ€§</h4>
<div class="outline-text-4" id="text-4-3-1">
<ul class="org-ul">
<li>æ”¹è®Š component æœ‰å…©ç¨®æ–¹å¼ï¼šå·¥å…·åˆ—ã€code<br /></li>
<li>Attributes (modifier çš„ä¸åŒé †åºå¯èƒ½ç”¢ç”Ÿä¸åŒæ•ˆæœ)<br />
<ul class="org-ul">
<li>frame<br /></li>
<li>foregroundColor<br /></li>
<li>background<br /></li>
<li>font<br /></li>
<li>padding<br /></li>
<li>cornerRadius<br /></li>
</ul></li>
</ul>
</div>


<div id="outline-container-org90ed8b3" class="outline-5">
<h5 id="org90ed8b3"><span class="section-number-5">4.3.1.1</span> SwiftUI Inspector:</h5>
<div class="outline-text-5" id="text-4-3-1-1">
<ol class="org-ol">
<li>on Text object (in preview screen): CMD + click<br /></li>
<li>select <b>Show SwiftUI Inspector</b><br /></li>
<li>change <b>Text</b>, <b>Font</b>, <b>Color</b><br /></li>
<li>Monitor the corresponding code changes in code window<br /></li>
</ol>

<div id="orgcb6f111" class="figure">
<p><img src="images/inspector-1.gif" alt="inspector-1.gif" width="600" /><br />
</p>
<p><span class="figure-number">Figure 2: </span>SwiftUI Inspector</p>
</div>
</div>
</div>
<div id="outline-container-org626b98e" class="outline-5">
<h5 id="org626b98e"><span class="section-number-5">4.3.1.2</span> Inspector frame</h5>
<div class="outline-text-5" id="text-4-3-1-2">

<div id="orgb671227" class="figure">
<p><img src="images/inspector-2.gif" alt="inspector-2.gif" width="600" /><br />
</p>
<p><span class="figure-number">Figure 3: </span>SwiftUI Inspector</p>
</div>
</div>
</div>
<div id="outline-container-org3429c94" class="outline-5">
<h5 id="org3429c94"><span class="section-number-5">4.3.1.3</span> code</h5>
<div class="outline-text-5" id="text-4-3-1-3">
<p>
æ–¼ Text(&ldquo;&#x2026;&rdquo;)å¾ŒåŠ ä¸Šå±¬æ€§ function æˆ–ä¿®æ”¹å…¶ä»–å±¬æ€§<br />
</p>

<div id="org84e0919" class="figure">
<p><img src="images/inspector-3.gif" alt="inspector-3.gif" width="600" /><br />
</p>
<p><span class="figure-number">Figure 4: </span>SwiftUI Change Attributes</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf07bae7" class="outline-3">
<h3 id="orgf07bae7"><span class="section-number-3">4.4</span> Stack</h3>
<div class="outline-text-3" id="text-4-4">
<p>
ä¸€å€‹ä»¥ä¸Šçš„ç‰©ä»¶éƒ½è¦æ”¾åœ¨ Stack ä¸­ï¼ŒStack å¯åˆ†ç‚ºä»¥ä¸‹ä¸‰é¡<br />
</p>
<ul class="org-ul">
<li>VStack: å‚ç›´æ’åˆ—<br /></li>
<li>HStack: æ°´å¹³æ’åˆ—<br /></li>
<li>ZStack: ä¸Šä¸‹æ’åˆ—(é‡å )<br /></li>
</ul>
</div>
<div id="outline-container-org982f1a1" class="outline-4">
<h4 id="org982f1a1"><span class="section-number-4">4.4.1</span> Stack èˆ‡ Stack å¯ç›¸äº’åŒ…å«ï¼Œæ–¼ View ä¸­åŠ å…¥ Stack çš„æ–¹å¼æœ‰äºŒ:</h4>
<div class="outline-text-4" id="text-4-4-1">
</div>
<div id="outline-container-org797d369" class="outline-5">
<h5 id="org797d369"><span class="section-number-5">4.4.1.1</span> ç”±å·¥å…·åˆ— drag: Xcode æœƒè‡ªå‹•åŠ å…¥ç›¸å°çš„ code</h5>
<div class="outline-text-5" id="text-4-4-1-1">

<div id="orgae620c9" class="figure">
<p><img src="images/vstack.gif" alt="vstack.gif" width="600" /><br />
</p>
<p><span class="figure-number">Figure 5: </span>Drag component from toolbar</p>
</div>
</div>
</div>
<div id="outline-container-orgd4b7d31" class="outline-5">
<h5 id="orgd4b7d31"><span class="section-number-5">4.4.1.2</span> coding</h5>
<div class="outline-text-5" id="text-4-4-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31532;&#19968;&#34892;&#25991;&#23383;"</span>)
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31532;&#20108;&#34892;&#25991;&#23383;"</span>)
<span class="linenr"> 8: </span>        }
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">13: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">14: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>}
</pre>
</div>


<div id="org037082a" class="figure">
<p><img src="images/vstack-1.jpg" alt="vstack-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 6: </span>VStack</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org6bcb944" class="outline-4">
<h4 id="org6bcb944"><span class="section-number-4">4.4.2</span> SwiftUI æ’°å¯«åŸå‰‡</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>body æ†ç‚ºåªèƒ½ return ä¸€ç‰©ä»¶ã€‚<br /></li>
<li>è‹¥æœ‰å¤šå€‹ç‰©ä»¶æ™‚ï¼Œä¸€å®šå¾—æ”¾åœ¨ Stack è£¡ã€‚<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org1129cd4" class="outline-4">
<h4 id="org1129cd4"><span class="section-number-4">4.4.3</span> HStack DEMO</h4>
<div class="outline-text-4" id="text-4-4-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        HStack {
<span class="linenr"> 6: </span>            VStack {
<span class="linenr"> 7: </span>                <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#35531;&#25353;&#25105;"</span>) {
<span class="linenr"> 8: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"TEST"</span>)
<span class="linenr"> 9: </span>                }
<span class="linenr">10: </span>                .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">60</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">11: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">12: </span>                .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">green</span>)
<span class="linenr">13: </span>                <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#21029;&#20098;&#25353;"</span>) {
<span class="linenr">14: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"QQ"</span>)
<span class="linenr">15: </span>                }
<span class="linenr">16: </span>            }
<span class="linenr">17: </span>            VStack {
<span class="linenr">18: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31532;&#19968;&#34892;&#25991;&#23383;"</span>)
<span class="linenr">19: </span>                    .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>   )
<span class="linenr">20: </span>                    .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">21: </span>                    .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">22: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31532;&#20108;&#34892;&#25991;&#23383;"</span>)
<span class="linenr">23: </span>                    .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">24: </span>                    .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">25: </span>                    .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">red</span>)
<span class="linenr">26: </span>            }
<span class="linenr">27: </span>        }
<span class="linenr">28: </span>    }
<span class="linenr">29: </span>}
<span class="linenr">30: </span>
<span class="linenr">31: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">32: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">33: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">34: </span>    }
<span class="linenr">35: </span>}
</pre>
</div>

<div id="orgb65457e" class="figure">
<p><img src="images/hstack-1.jpg" alt="hstack-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 7: </span>HStack</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgac152af" class="outline-2">
<h2 id="orgac152af"><span class="section-number-2">5</span> Image</h2>
<div class="outline-text-2" id="text-5">
<p>
å½±åƒä¾†æºå¯ä»¥æ˜¯ System Image æˆ–è‡ªè¡Œä¸‹è¼‰/ç·¨ä¿®çš„å½±åƒ(Customized Image)<br />
</p>
</div>
<div id="outline-container-org2e2f45e" class="outline-3">
<h3 id="org2e2f45e"><span class="section-number-3">5.1</span> ä½¿ç”¨ç³»çµ±å…§å»ºçš„åœ–</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-org4e12647" class="outline-4">
<h4 id="org4e12647"><span class="section-number-4">5.1.1</span> <a href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/">SF Symbols </a><sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup></h4>
</div>
<div id="outline-container-org4488428" class="outline-4">
<h4 id="org4488428"><span class="section-number-4">5.1.2</span> å¾ iOS 13 é–‹å§‹ï¼ŒApple ä»‹ç´¹äº†ä¸€å€‹åç‚º SFSymbols çš„æ–°åŠŸèƒ½ã€‚SF Symbols é€™åŠŸèƒ½ç”± Apple æ‰€è¨­è¨ˆï¼Œç•¶ä¸­é›†åˆäº† 1500 å¤šå€‹å¯ä»¥åœ¨ App ä¹‹ä¸­ä½¿ç”¨çš„ç¬¦è™Ÿã€‚<sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></h4>
</div>
<div id="outline-container-orgd9d1ced" class="outline-4">
<h4 id="orgd9d1ced"><span class="section-number-4">5.1.3</span> <a href="https://developer.apple.com/design/resources/">Download SF Symbols app</a></h4>
</div>
<div id="outline-container-org810665f" class="outline-4">
<h4 id="org810665f"><span class="section-number-4">5.1.4</span> code</h4>
<div class="outline-text-4" id="text-5-1-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"System Image"</span>)
<span class="linenr"> 7: </span>                .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">headline</span>)
<span class="linenr"> 8: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">orange</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"icloud"</span>)
<span class="linenr">10: </span>            .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">11: </span>            .<span style="color: #c678dd;">scaledToFit</span>()
<span class="linenr">12: </span>            .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">80</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">18: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">19: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org453d7f7" class="outline-4">
<h4 id="org453d7f7"><span class="section-number-4">5.1.5</span> Demo</h4>
<div class="outline-text-4" id="text-5-1-5">

<div id="orga34dab3" class="figure">
<p><img src="images/image-1.jpg" alt="image-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 8: </span>Images-1</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org226d270" class="outline-3">
<h3 id="org226d270"><span class="section-number-3">5.2</span> ä½¿ç”¨è‡ªå·±çš„åœ–</h3>
<div class="outline-text-3" id="text-5-2">
<ol class="org-ol">
<li>Drag image into Project folder <b>Assets.xcassets</b><br /></li>
<li>Add following code<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #c678dd;">Image</span>(<span style="color: #98be65;">"ImageName"</span>) <span style="color: #5B6268;">//</span><span style="color: #5B6268;">file name in Assets.xcassets</span>
<span class="linenr">2: </span>  .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">3: </span>  .<span style="color: #c678dd;">scaledToFit</span>()
<span class="linenr">4: </span>  .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">200</span>, height: <span style="color: #da8548; font-weight: bold;">160</span>, alignment: .<span style="color: #c678dd;">center</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org69b4b6e" class="outline-3">
<h3 id="org69b4b6e"><span class="section-number-3">5.3</span> Image Attributes</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Albert Camus"</span>)
<span class="linenr"> 7: </span>                .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr"> 8: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>                .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Image</span>(<span style="color: #98be65;">"Albert-Camus"</span>)
<span class="linenr">11: </span>                .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">12: </span>                .<span style="color: #c678dd;">scaledToFill</span>()
<span class="linenr">13: </span>                .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">200</span>, height: <span style="color: #da8548; font-weight: bold;">200</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">14: </span>                .<span style="color: #c678dd;">clipShape</span>(<span style="color: #c678dd;">Circle</span>())
<span class="linenr">15: </span>
<span class="linenr">16: </span>        }
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>}
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">21: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">22: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>}
</pre>
</div>

<div id="orgc8f205d" class="figure">
<p><img src="images/image-2.jpg" alt="image-2.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 9: </span>Images-2</p>
</div>
</div>
</div>
<div id="outline-container-orge0fb535" class="outline-3">
<h3 id="orge0fb535"><span class="section-number-3">5.4</span> Using SF Symbols</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li>SF Symbols app<br /></li>
<li><a href="https://sfsymbols.com/">sfsymbols.com</a><br /></li>
<li><a href="https://www.avanderlee.com/swift/sf-symbols-guide/">SF Symbols: The benefits and how to use them guide</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7494985" class="outline-2">
<h2 id="org7494985"><span class="section-number-2">6</span> Button</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org4e755b4" class="outline-3">
<h3 id="org4e755b4"><span class="section-number-3">6.1</span> èªæ³•</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">...</span>
<span class="linenr">2: </span><span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"Title"</span>) {
<span class="linenr">3: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">action</span>
<span class="linenr">4: </span>}
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #c678dd;">Button</span>(action: &lt;#T##() -&gt; Void#&gt;, label: &lt;#T##() -&gt; _#&gt;)
<span class="linenr">7: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">...</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6d3274a" class="outline-3">
<h3 id="org6d3274a"><span class="section-number-3">6.2</span> å°‡è®Šæ•¸åŠ å…¥ View ä¸­</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> title = <span style="color: #98be65;">"Hello SWiftUI"</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(verbatim: title)
<span class="linenr"> 7: </span>                .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">4</span>)
<span class="linenr"> 8: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>                .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5183e37" class="outline-3">
<h3 id="org5183e37"><span class="section-number-3">6.3</span> å¦‚ä½•æ–¼ç¨‹å¼ä¸­æ”¹è®Š title çš„å€¼ä¾†æ”¹è®Š View çš„é¡¯ç¤ºå…§å®¹?</h3>
<div class="outline-text-3" id="text-6-3">
<p>
è§£æ±ºæ–¹æ¡ˆ: @State<br />
å¦‚ä»¥ä¸‹ç¯„ä¾‹:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> title = <span style="color: #98be65;">"Hello SWiftUI"</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(verbatim: title)
<span class="linenr"> 7: </span>                .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">4</span>)
<span class="linenr"> 8: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>                .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
</pre>
</div>
<p>
View ç‚º structï¼ŒæœªåŠ ä¸Š @State çš„è®Šæ•¸æ˜¯ä¸å…è¨±è®Šæ›´çš„(immutable)ï¼›åŠ äº† @State å¾Œï¼ŒSwiftUI å°‡èªç‚ºé€™å€‹è®Šæ•¸(æˆ–ï¼Œstruct çš„ property)ä»£è¡¨æŸç¨®å½±å°‡ View ç•«é¢æˆ–å…§å®¹çš„ç‹€æ…‹ï¼Œä¸¦åœ¨èƒŒå¾Œå¦å¤–ç”¢ç”Ÿç©ºé–“å„²å­˜ property çš„å…§å®¹ï¼Œå®ƒä¸å†å„²å­˜åœ¨ ContentView è£¡ï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥ä¿®æ”¹å®ƒçš„å…§å®¹<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>ã€‚<br />
</p>

<p>
ä»¥ @State å®£å‘Šçš„ property æœ‰å€‹é‡è¦çš„ç‰¹æ€§ï¼Œåªè¦å®ƒçš„å…§å®¹æ”¹è®Šï¼Œç•«é¢ä¹Ÿæœƒç«‹å³æ›´æ–°ã€‚å®ƒå¸¶ä¾†äº†ä»¥ä¸‹å…©å€‹å¥½è™•:<br />
</p>
<ul class="org-ul">
<li>ä¸ç”¨å¦å¤–å¯« property å…§å®¹æ”¹è®Šæ™‚æ›´æ–°ç•«é¢çš„ç¨‹å¼ã€‚<br /></li>
<li>ä¸ç”¨æ“”å¿ƒç•«é¢é¡¯ç¤ºçš„å…§å®¹è·Ÿ property çš„å…§å®¹ä¸åŒæ­¥ï¼Œæ¯”æ–¹ä¿®æ”¹äº† propertyï¼Œä½†å»å¿˜äº†æ›´æ–°ç•«é¢ã€‚<br /></li>
</ul>

<p>
é‚£éº¼ï¼Œè¦åœ¨ä»€éº¼åœ°æ–¹å»æ”¹è®Š title çš„å€¼?<br />
</p>
</div>
</div>
<div id="outline-container-orgd4d7cd5" class="outline-3">
<h3 id="orgd4d7cd5"><span class="section-number-3">6.4</span> ç¯„ä¾‹: æŒ‰ä¸‹ Buttonï¼Œæ”¹è®Š Text title</h3>
<div class="outline-text-3" id="text-6-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> title = <span style="color: #98be65;">"Hello SWiftUI"</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(verbatim: title)
<span class="linenr"> 7: </span>                .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">4</span>)
<span class="linenr"> 8: </span>                .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>                .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"Click Me"</span>) {
<span class="linenr">11: </span>                <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">title</span> = <span style="color: #98be65;">"QQ"</span>
<span class="linenr">12: </span>            }
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org790f4e7" class="outline-3">
<h3 id="org790f4e7"><span class="section-number-3">6.5</span> ä»¥ Button é–‹å•Ÿä¸€å€‹æ–°çš„ View</h3>
<div class="outline-text-3" id="text-6-5">
<p>
ä¸€å€‹ app ç•¶ç„¶ä¸æœƒåªæœ‰ä¸€å€‹ Viewï¼Œæˆ‘å€‘å¯ä»¥é€é NavigationLink ä¾†æ§åˆ¶ä¸€ç³»åˆ— View çš„å‘ˆç¾ï¼Œä¹Ÿå¯ä»¥ç°¡å–®çš„ä»¥ Button ä¾†æ§åˆ¶ã€‚<br />
åœ¨ä¸‹ä¾‹ä¸­ï¼ŒæŒ‰ä¸‹ BUtton å¾Œæœƒç§€å‡º SecondViewï¼Œè€Œ SwiftUI æ§åˆ¶ä¸€å€‹æ–° View çš„æ–¹å¼æ˜¯é€é sheet(isPreseted)ä¸­ isPresented çš„ true/falseã€‚<br />
ContentView.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span id="coderef-controlView" class="coderef-off"><span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showSecondView = <span style="color: #a9a1e1;">false</span></span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">Button</span>(action: {
<span id="coderef-changeShow" class="coderef-off"><span class="linenr"> 7: </span>            <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showSecondView</span> = <span style="color: #a9a1e1;">true</span></span>
<span class="linenr"> 8: </span>        }, label: {
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#25171;&#38283;&#19968;&#20491;&#26032;&#30340;View"</span>)
<span id="coderef-whichView" class="coderef-off"><span class="linenr">10: </span>        }).<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showSecondView, content: {</span>
<span class="linenr">11: </span>            <span style="color: #c678dd;">SecondView</span>()
<span class="linenr">12: </span>        })
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">17: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">18: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
</pre>
</div>
<p>
Button è—‰ç”± sheet è£¡çš„ contet ä¾†æŒ‡å®šè¦æ‰“é–‹çš„æ˜¯å“ªä¸€å€‹ View(ç¬¬<a href="#coderef-whichView" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-whichView');" onmouseout="CodeHighlightOff(this, 'coderef-whichView');">10</a>è¡Œï¼Œåœ¨æ­¤ä¾‹ä¸­ç›®æ¨™ View ç‚º SecondView)ï¼Œè€ŒçœŸæ­£æ§åˆ¶æ˜¯å¦ç§€å‡ºé€™å€‹ View çš„è®Šæ•¸ç‚º showSecondView é€™å€‹ bool(ç¬¬<a href="#coderef-controlView" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-controlView');" onmouseout="CodeHighlightOff(this, 'coderef-controlView');">4</a>)ï¼Œä¹‹æ‰€ä»¥æŒ‰ä¸‹ Button å¾Œèƒ½ç§€å‡º SecondViewï¼Œæ˜¯å› ç‚ºåœ¨ Button çš„ action ä¸­ï¼Œæˆ‘å€‘æŠŠ showSecondView çš„å€¼æ”¹ç‚º true(ç¬¬<a href="#coderef-changeShow" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-changeShow');" onmouseout="CodeHighlightOff(this, 'coderef-changeShow');">7</a>è¡Œ)ã€‚SecondView.swift çš„å…§å®¹å¦‚ä¸‹:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"I'm second View"</span>)
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView_Previews</span>: PreviewProvider {
<span class="linenr">10: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">11: </span>        <span style="color: #c678dd;">SecondView</span>()
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
</pre>
</div>
<p>
è€Œæ­¤ä¾‹åŸ·è¡Œçµæœç‚º:<br />
</p>

<div id="org08b6a21" class="figure">
<p><img src="images/showSecondView.gif" alt="showSecondView.gif" width="300" /><br />
</p>
<p><span class="figure-number">Figure 10: </span>Show New View</p>
</div>
</div>
</div>
<div id="outline-container-orga4d70ae" class="outline-3">
<h3 id="orga4d70ae"><span class="section-number-3">6.6</span> ä»¥ Button é—œé–‰ View</h3>
<div class="outline-text-3" id="text-6-6">
<p>
åœ¨ä¸Šä¾‹ä¸­ï¼ŒæŠŠ SecondView é—œæ‰çš„æ–¹å¼ç‚ºå¾€ä¸‹æ»‘å‹•è¢å¹•ï¼Œå¦ä¸€ç¨®é—œæ‰çš„æ–¹å¼æ˜¯åŠ ä¸Šä¸€å€‹ Button:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showSecondView = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr"> 7: </span>            <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showSecondView</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr"> 8: </span>        }, label: {
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#25171;&#38283;&#19968;&#20491;&#26032;&#30340;View"</span>)
<span class="linenr">10: </span>        }).<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showSecondView, content: {
<span id="coderef-Binding1" class="coderef-off"><span class="linenr">11: </span>            <span style="color: #c678dd;">SecondView</span>(showMe: <span style="color: #51afef;">self</span>.$showSecondView)</span>
<span class="linenr">12: </span>        })
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">17: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">18: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
</pre>
</div>
<p>
ä¸Šè¿°ç¨‹å¼ç¢¼èˆ‡å‰ç¯€å”¯ä¸€çš„å·®ç•°åœ¨ç¬¬<a href="#coderef-Binding1" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-Binding1');" onmouseout="CodeHighlightOff(this, 'coderef-Binding1');">11</a>è¡Œï¼Œæ­¤è™•æˆ‘å€‘æŠŠæ§åˆ¶ SecondView æ˜¯å¦å‡ºç¾çš„è®Šæ•¸ showSecondView å‚³çµ¦ SecondViewã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView</span>: View {
<span id="coderef-Binding2" class="coderef-off"><span class="linenr"> 4: </span>    <span style="color: #51afef;">@Binding</span> <span style="color: #51afef;">var</span> showMe: <span style="color: #c678dd;">Bool</span></span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        VStack {
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"I'm second View"</span>)
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span id="coderef-Binding3" class="coderef-off"><span class="linenr"> 9: </span>                    <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showMe</span> = <span style="color: #a9a1e1;">false</span></span>
<span class="linenr">10: </span>            }, label: {
<span class="linenr">11: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Close me"</span>)
<span class="linenr">12: </span>            })
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView_Previews</span>: PreviewProvider {
<span class="linenr">18: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span id="coderef-Binding4" class="coderef-off"><span class="linenr">19: </span>        <span style="color: #c678dd;">SecondView</span>(showMe: .<span style="color: #c678dd;">constant</span>(<span style="color: #a9a1e1;">false</span>))</span>
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>}
</pre>
</div>
<p>
åœ¨ SecondView.swift ä¸­ï¼Œä»¥ showMeã€Œæ¥ä½ã€ä¾†è‡ª ContentView çš„å…±äº«è®Šæ•¸(showSecondView)(ç¬¬<a href="#coderef-Binding2" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-Binding2');" onmouseout="CodeHighlightOff(this, 'coderef-Binding2');">4</a>è¡Œ)ï¼Œç„¶å¾Œåœ¨ Buuton çš„ action ä¸­å°‡ showMe çš„å€¼æ”¹ç‚º false(ç¬¬<a href="#coderef-Binding3" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-Binding3');" onmouseout="CodeHighlightOff(this, 'coderef-Binding3');">9</a>è¡Œ)ï¼Œé€™åŒæ™‚ä¹Ÿå°±æ˜¯æŠŠ ContentView ä¸­çš„ showSecondView çš„å€¼ç”± true æ”¹ç‚º falseï¼Œç„¶å¾Œ SecondView å°±è¢«é—œæ‰äº†ã€‚<br />
ç”±æ–¼ SecondView ä¸­å®£å‘Šäº†ä¸€å€‹@Binding è®Šæ•¸ï¼Œæ‰€æœ‰å‘¼å«é€™å€‹ View çš„ç¨‹å¼ç¢¼éƒ½è¦å‚³é€™å€‹è®Šæ•¸çµ¦å®ƒï¼Œä¾‹å¦‚ ContentView ä¸­çš„<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #c678dd;">SecondView</span>(showMe: <span style="color: #51afef;">self</span>.$showSecondView)
</pre>
</div>
<p>
åŒæ¨£çš„ï¼ŒSecondView æœ€åº•ä¸‹è² è²¬ç”¢ç”Ÿ app é è¦½ç•«é¢çš„ SecondView<sub>Previews</sub> ä¹Ÿè¦æä¾›é€™å€‹åƒæ•¸ï¼Œä¸éï¼Œç”±æ–¼å®ƒåªæ˜¯ç”¢ç”Ÿé è¦½ç•«é¢ï¼Œèˆ‡ç¨‹å¼ h åŸ·è¡Œç„¡å¯¦éš›å½±éŸ¿ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥éš¨ä¾¿å‚³å€‹ true/false è½‰ç‚ºå¸¸æ•¸çµ¦å®ƒå°±è¡Œï¼Œå¦‚ä¸Šä¾‹ä¸­çš„ç¬¬<a href="#coderef-Binding4" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-Binding4');" onmouseout="CodeHighlightOff(this, 'coderef-Binding4');">19</a>è¡Œã€‚åŸ·è¡Œçµæœå¦‚ä¸‹:<br />
</p>

<div id="org79463ab" class="figure">
<p><img src="images/closeView.gif" alt="closeView.gif" width="300" /><br />
</p>
<p><span class="figure-number">Figure 11: </span>Close New View</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc42bd25" class="outline-2">
<h2 id="orgc42bd25"><span class="section-number-2">7</span> TextField (with @State)</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org4d6328b" class="outline-3">
<h3 id="org4d6328b"><span class="section-number-3">7.1</span> èªæ³•</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> &#35722;&#25976;=<span style="color: #98be65;">"&#20540;"</span>
<span class="linenr">2: </span><span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"&#25552;&#31034;&#25991;&#23383;"</span>, text: $&#35722;&#25976;)
</pre>
</div>
</div>
</div>
<div id="outline-container-org88eff88" class="outline-3">
<h3 id="org88eff88"><span class="section-number-3">7.2</span> ç¯„ä¾‹: æ–¼ TextField è¼¸å…¥è³‡æ–™ï¼Œé¡¯ç¤ºæ–¼ Text ä¸­</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span id="coderef-StateVar" class="coderef-off"><span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> title = <span style="color: #98be65;">""</span></span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        VStack {
<span id="coderef-strTitle" class="coderef-off"><span class="linenr"> 8: </span>            <span style="color: #c678dd;">Text</span>(verbatim: <span style="color: #98be65;">"Hello "</span>+title)</span>
<span class="linenr"> 9: </span>            HStack {
<span class="linenr">10: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your Name: "</span>)
<span id="coderef-dollarSign" class="coderef-off"><span class="linenr">11: </span>                <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"&#35531;&#36664;&#20837;&#22995;&#21517;:"</span>, text: $title)</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span>            }
<span class="linenr">14: </span>        }
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>}
</pre>
</div>
<p>
åŸ·è¡Œçµæœå¦‚ä¸‹<br />
</p>
<p width="300">
<img src="images/txtfield-1.jpg" alt="txtfield-1.jpg" width="300" /><br />
åœ¨ä¸Šè¿°ç¨‹å¼ä¸­ï¼Œæˆ‘å€‘å¸Œæœ›åœ¨ <b>TextField</b> ä¸­è¼¸å…¥æ–‡å­—æ™‚å°±èƒ½å³æ™‚æ”¹è®Š title çš„å€¼ï¼Œä¾¿è¦åšç¶å®š(Binding)çš„å‹•ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨ <b>TextField</b> ä¸­ title å‰åŠ ä¸Šä¸€å€‹$ (ç¬¬<a href="#coderef-dollarSign" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-dollarSign');" onmouseout="CodeHighlightOff(this, 'coderef-dollarSign');">11</a>è¡Œ)ï¼Œç”± <b>TextField</b> çš„èªæ³•ä¹Ÿå¯ä»¥çœ‹å‡º: TextField(&lt;titleKey: LocalizedStringKey, text: Binding&lt;String&gt;)ã€‚SwiftUI ä¾¿æ˜¯é€éã€Œåœ¨@State property å‰åŠ ä¸Š$ã€çš„æ–¹å¼ä¾†å–å¾—é€™å€‹ property çš„ bindingï¼Œç•¶ç¬¬<a href="#coderef-dollarSign" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-dollarSign');" onmouseout="CodeHighlightOff(this, 'coderef-dollarSign');">11</a>çš„å€¼ä¸€æ”¹è®Šï¼Œç¬¬<a href="#coderef-strTitle" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-strTitle');" onmouseout="CodeHighlightOff(this, 'coderef-strTitle');">8</a>è¡Œçš„ Text ä¹Ÿæœƒå³æ™‚è·Ÿè‘—æ”¹è®Šï¼Œé€™ä¾¿æ˜¯ binding çš„ä½œç”¨ã€‚<br />
</p>

<p>
é™¤äº† <b>TextField</b> ä¹‹å¤–ï¼ŒSwiftUI é‚„æœ‰è¨±å¤šæä¾› <b>Binding</b> çš„å…ƒä»¶ï¼Œä¾‹å¦‚ï¼šToggle, Slider, DatePicker&#x2026;ã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org11af4ab" class="outline-3">
<h3 id="org11af4ab"><span class="section-number-3">7.3</span> ç¯„ä¾‹ 2: @state struct</h3>
<div class="outline-text-3" id="text-7-3">
<p>
ç•¶åœ¨ View ä¸­æœ‰è¨±å¤šè®Šæ•¸çš„å€¼éœ€è¦ Binding æ™‚ï¼Œä¸€å€‹ä¸€å€‹åŠ å…¥@State property æœ‰é»å¤ªéº»ç…©ï¼Œæ­¤æ™‚å¯ä»¥å°‡é€™äº›ç›¸é—œè®Šæ•¸çµ„åˆç‚ºä¸€ structï¼Œå¦‚ä¸‹ä¾‹ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">User</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> firstName = <span style="color: #98be65;">"Bilbo"</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">var</span> lastName = <span style="color: #98be65;">"Baggins"</span>
<span class="linenr">4: </span>}
</pre>
</div>
<p>
We can now use that in a SwiftUI view by creating an @State property and attaching things to $user.firstName and $user.lastName, like this:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your name is \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">lastName</span><span style="color: #98be65;">)."</span>)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last name"</span>, text: $user.<span style="color: #dcaeea;">lastName</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
</pre>
</div>
<p>
That all works: SwiftUI is smart enough to understand that one object contains all our data, and will update the UI when either value changes. Behind the scenes, whatâ€™s actually happening is that each time a value inside our struct changes the whole struct changes â€“ itâ€™s like a new user every time we type a key for the first or last name. That might sound wasteful, but itâ€™s actually extremely fast.<br />
</p>
</div>
</div>
<div id="outline-container-org80c96cc" class="outline-3">
<h3 id="org80c96cc"><span class="section-number-3">7.4</span> What is @State</h3>
<div class="outline-text-3" id="text-7-4">
<p>
ç”¨é€”:åœ¨åŒä¸€ View ä¸­çµ¦ä¸åŒå…ƒä»¶å…±äº«(è®Šæ›´)è®Šæ•¸ï¼Œè€Œä¸”é€™ç¨®å…±äº«æ˜¯é›™å‘çš„ï¼Œå³ï¼Œä»»ä½•ä¸€ç«¯è®Šæ›´äº†è®Šæ•¸çš„å€¼ï¼Œå¦ä¸€ç«¯éƒ½æœƒç«‹å³æ›´æ–°ã€‚@tate çš„ç›¸é—œç‰¹æ€§å¦‚ä¸‹ï¼š<br />
</p>
<ul class="org-ul">
<li>State is a value, or a set of values, that can change over time, and that affects a viewâ€™s behavior, content, or layout. You use a property with the @State attribute to add state to a view.<br /></li>
<li>é€šéä½¿ç”¨ @State ä¿®é£¾å™¨æˆ‘å€‘å¯ä»¥é—œè¯å‡º View çš„ç‹€æ…‹. SwiftUI å°‡æœƒæŠŠä½¿ç”¨é @State ä¿®é£¾å™¨çš„å±¬æ€§å­˜å„²åˆ°ä¸€å€‹ç‰¹æ®Šçš„å…§å­˜å€åŸŸ(heap)ï¼Œä¸¦ä¸”é€™å€‹å€åŸŸå’Œ View struct æ˜¯éš”é›¢çš„. ç•¶ @State è£é£¾éçš„å±¬æ€§ç™¼ç”Ÿäº†è®ŠåŒ–ï¼ŒSwiftUI æœƒæ ¹æ“šæ–°çš„å±¬æ€§å€¼é‡æ–°å‰µå»º Viewã€‚<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup><br /></li>
<li>Simple properties like String or Int<br /></li>
<li>Belongs to a specific view<br /></li>
<li>Never used outside that view<br /></li>
<li>The wrappedValue is: anything (but almost certainly a value type).<br /></li>
<li>What it does: stores the wrappedValue in the heap; when it changes, invalidates the View.<br /></li>
<li>Projected value (i.e. $): a Binding (to that value in the heap).<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-SW-CUSTOMIZED-UI-COMPONENTS" class="outline-2">
<h2 id="SW-CUSTOMIZED-UI-COMPONENTS"><span class="section-number-2">8</span> Customize UI Components</h2>
<div class="outline-text-2" id="text-SW-CUSTOMIZED-UI-COMPONENTS">
<p>
SwiftUI æä¾›è±å¯Œçš„ modifier å¹«åŠ©æˆ‘å€‘è¨­è¨ˆå®¢è£½ UI å…ƒä»¶çš„æ¨£å¼ï¼Œè«¸å¦‚é™°å½±ï¼Œæ—‹è½‰ç­‰æ•ˆæœçš†å¯é€é modifier å¯¦ç¾ï¼Œé‚„å¯ä»¥æ­é…æ–¹ä¾¿çš„æ‹–æ›³åŠ å…¥ç›¸é—œç¨‹å¼ç¢¼ã€‚<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup><br />
</p>
</div>
<div id="outline-container-orgfb2ae69" class="outline-3">
<h3 id="orgfb2ae69"><span class="section-number-3">8.1</span> Text</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-orgb6e93d7" class="outline-4">
<h4 id="orgb6e93d7"><span class="section-number-4">8.1.1</span> Advanced Attributes <sup><a id="fnr.7.100" class="footref" href="#fn.7">7</a></sup></h4>
<div class="outline-text-4" id="text-8-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 3: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Example"</span>)
<span class="linenr"> 4: </span>          .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr"> 5: </span>          .<span style="color: #c678dd;">fontWeight</span>(.<span style="color: #dcaeea;">bold</span>)
<span class="linenr"> 6: </span>          .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 7: </span>          .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">4</span>)
<span class="linenr"> 8: </span>          .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr"> 9: </span>          .<span style="color: #c678dd;">cornerRadius</span>(<span style="color: #da8548; font-weight: bold;">14.0</span>)
<span class="linenr">10: </span>          .<span style="color: #c678dd;">rotationEffect</span>(<span style="color: #c678dd;">Angle</span>(degrees: <span style="color: #da8548; font-weight: bold;">15</span>))
<span class="linenr">11: </span>          .<span style="color: #c678dd;">rotation3DEffect</span>(<span style="color: #c678dd;">Angle</span>(degrees: <span style="color: #da8548; font-weight: bold;">30</span>), axis: (x: <span style="color: #da8548; font-weight: bold;">10</span>, y: <span style="color: #da8548; font-weight: bold;">30</span>, z: <span style="color: #da8548; font-weight: bold;">30</span>))
<span class="linenr">12: </span>          .<span style="color: #c678dd;">shadow</span>(radius: <span style="color: #da8548; font-weight: bold;">20</span>)
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orge6fdd38" class="outline-4">
<h4 id="orge6fdd38"><span class="section-number-4">8.1.2</span> Demo</h4>
<div class="outline-text-4" id="text-8-1-2">

<div id="org2a2bdf8" class="figure">
<p><img src="images/adv-text-attributes.jpg" alt="adv-text-attributes.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 12: </span>Text Attributes</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org283d90a" class="outline-3">
<h3 id="org283d90a"><span class="section-number-3">8.2</span> Image</h3>
<div class="outline-text-3" id="text-8-2">
</div>
<div id="outline-container-orge08039f" class="outline-4">
<h4 id="orge08039f"><span class="section-number-4">8.2.1</span> Advanced Attributes s<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup></h4>
<div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        VStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Albert Camus"</span>)
<span class="linenr"> 7: </span>              .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">body</span>)
<span class="linenr"> 8: </span>              .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>              .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Image</span>(<span style="color: #98be65;">"Albert-Camus"</span>)
<span class="linenr">11: </span>              .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">12: </span>              .<span style="color: #c678dd;">scaledToFill</span>()
<span class="linenr">13: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">100</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">14: </span>              .<span style="color: #c678dd;">clipShape</span>(<span style="color: #c678dd;">Circle</span>())
<span class="linenr">15: </span>            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"alarm.fill"</span>)
<span class="linenr">16: </span>              .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">17: </span>              .<span style="color: #c678dd;">scaledToFill</span>()
<span class="linenr">18: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">100</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">19: </span>            <span style="color: #c678dd;">Image</span>(<span style="color: #98be65;">"Albert-Camus"</span>)
<span class="linenr">20: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">100</span>, height: <span style="color: #da8548; font-weight: bold;">100</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">21: </span>              .<span style="color: #c678dd;">mask</span>(<span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"alarm.fill"</span>)
<span class="linenr">22: </span>                      .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">23: </span>                      .<span style="color: #c678dd;">scaledToFit</span>())
<span class="linenr">24: </span>              .<span style="color: #c678dd;">shadow</span>(radius: <span style="color: #da8548; font-weight: bold;">20</span>)
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">30: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">31: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>}
<span class="linenr">34: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org391c667" class="outline-4">
<h4 id="org391c667"><span class="section-number-4">8.2.2</span> Demo</h4>
<div class="outline-text-4" id="text-8-2-2">

<div id="org9162770" class="figure">
<p><img src="images/image-advanced-attributes.jpg" alt="image-advanced-attributes.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 13: </span>Image Attributes</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd85b072" class="outline-3">
<h3 id="orgd85b072"><span class="section-number-3">8.3</span> Button II</h3>
<div class="outline-text-3" id="text-8-3">
</div>
<div id="outline-container-org3532e47" class="outline-4">
<h4 id="org3532e47"><span class="section-number-4">8.3.1</span> å¤–è§€æ§åˆ¶</h4>
<div class="outline-text-4" id="text-8-3-1">
</div>
<div id="outline-container-org6253d3d" class="outline-5">
<h5 id="org6253d3d"><span class="section-number-5">8.3.1.1</span> Advanced Attributes <sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup></h5>
<div class="outline-text-5" id="text-8-3-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">VStack</span>(spacing: <span style="color: #da8548; font-weight: bold;">5.0</span>) {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Customized Button"</span>)
<span class="linenr"> 7: </span>              .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">body</span>)
<span class="linenr"> 8: </span>              .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr"> 9: </span>              .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">11: </span>                       <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Hello button tapped!"</span>)
<span class="linenr">12: </span>                   }) {
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"HI HI"</span>)
<span class="linenr">14: </span>                  .<span style="color: #c678dd;">fontWeight</span>(.<span style="color: #dcaeea;">bold</span>)
<span class="linenr">15: </span>                  .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr">16: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">purple</span>)
<span class="linenr">17: </span>                  .<span style="color: #c678dd;">padding</span>()
<span class="linenr">18: </span>                  .<span style="color: #c678dd;">border</span>(Color.<span style="color: #dcaeea;">purple</span>, width: <span style="color: #da8548; font-weight: bold;">5</span>)
<span class="linenr">19: </span>            }
<span class="linenr">20: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">21: </span>                       <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Hello button tapped!"</span>)
<span class="linenr">22: </span>                   }) {
<span class="linenr">23: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Press me"</span>)
<span class="linenr">24: </span>                  .<span style="color: #c678dd;">fontWeight</span>(.<span style="color: #dcaeea;">light</span>)
<span class="linenr">25: </span>                  .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr">26: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">green</span>)
<span class="linenr">27: </span>                  .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">5</span>)
<span class="linenr">28: </span>                  .<span style="color: #c678dd;">overlay</span>(
<span class="linenr">29: </span>                    <span style="color: #c678dd;">Capsule</span>(style: .<span style="color: #dcaeea;">continuous</span>)
<span class="linenr">30: </span>                      .<span style="color: #c678dd;">stroke</span>(Color.<span style="color: #dcaeea;">green</span>, style: <span style="color: #c678dd;">StrokeStyle</span>(lineWidth: <span style="color: #da8548; font-weight: bold;">3</span>, dash: [<span style="color: #da8548; font-weight: bold;">10</span>]))
<span class="linenr">31: </span>                  )
<span class="linenr">32: </span>            }
<span class="linenr">33: </span>        }
<span class="linenr">34: </span>    }
<span class="linenr">35: </span>}
<span class="linenr">36: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9583f1d" class="outline-5">
<h5 id="org9583f1d"><span class="section-number-5">8.3.1.2</span> Demo</h5>
<div class="outline-text-5" id="text-8-3-1-2">

<div id="orgf8542ca" class="figure">
<p><img src="images/customized-button-1.jpg" alt="customized-button-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 14: </span>Button Attributes</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org5cee050" class="outline-4">
<h4 id="org5cee050"><span class="section-number-4">8.3.2</span> Button v.s. @State</h4>
<div class="outline-text-4" id="text-8-3-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> a = <span style="color: #98be65;">""</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> b = <span style="color: #98be65;">""</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> c = <span style="color: #98be65;">"Ans:"</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 9: </span>        VStack {
<span class="linenr">10: </span>            VStack {
<span class="linenr">11: </span>                <span style="color: #c678dd;">Divider</span>()
<span class="linenr">12: </span>                <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Number 1: "</span>, text: $b)
<span class="linenr">13: </span>                <span style="color: #c678dd;">Divider</span>()
<span class="linenr">14: </span>                <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Number 2:"</span>, text: $a)
<span class="linenr">15: </span>                <span style="color: #c678dd;">Divider</span>()
<span class="linenr">16: </span>                <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#10133;"</span>) {
<span class="linenr">17: </span>                    <span style="color: #51afef;">let</span> one = <span style="color: #c678dd;">Int</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">a</span>) ?? <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">18: </span>                    <span style="color: #51afef;">let</span> two = <span style="color: #c678dd;">Int</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">b</span>) ?? <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">19: </span>                    <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">c</span> = <span style="color: #98be65;">"Ans: "</span> + <span style="color: #c678dd;">String</span>(one + two)
<span class="linenr">20: </span>                }
<span class="linenr">21: </span>                  .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">40</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">22: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">23: </span>                  .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">green</span>)
<span class="linenr">24: </span>                  .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">largeTitle</span>)
<span class="linenr">25: </span>                <span style="color: #c678dd;">Divider</span>()
<span class="linenr">26: </span>                <span style="color: #c678dd;">Text</span>(verbatim: c)
<span class="linenr">27: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">28: </span>            }
<span class="linenr">29: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">200</span>, height: <span style="color: #da8548; font-weight: bold;">160</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">30: </span>        }
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
</pre>
</div>

<div id="org271fe4f" class="figure">
<p><img src="images/btn-1.jpg" alt="btn-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 15: </span>Button</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgebfac0b" class="outline-3">
<h3 id="orgebfac0b"><span class="section-number-3">8.4</span> background, opacity</h3>
<div class="outline-text-3" id="text-8-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">uitest</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2020/7/29.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Copyright &#169; 2020 Letranger.tw. All rights reserved.</span>
<span class="linenr"> 7: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">12: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> a = <span style="color: #98be65;">""</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> b = <span style="color: #98be65;">""</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> c = <span style="color: #98be65;">"Ans:"</span>
<span class="linenr">15: </span>
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">17: </span>        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #c678dd;">center</span>) {
<span class="linenr">18: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#35336;&#31639;&#27231;"</span>)
<span class="linenr">19: </span>            <span style="color: #c678dd;">Divider</span>()
<span class="linenr">20: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Number 1: "</span>, text: $b)
<span class="linenr">21: </span>            <span style="color: #c678dd;">Divider</span>()
<span class="linenr">22: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Number 2:"</span>, text: $a)
<span class="linenr">23: </span>            <span style="color: #c678dd;">Divider</span>()
<span class="linenr">24: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#10133;"</span>) {
<span class="linenr">25: </span>                <span style="color: #51afef;">let</span> one = <span style="color: #c678dd;">Int</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">a</span>) ?? <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">26: </span>                <span style="color: #51afef;">let</span> two = <span style="color: #c678dd;">Int</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">b</span>) ?? <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">27: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">c</span> = <span style="color: #98be65;">"Ans: "</span> + <span style="color: #c678dd;">String</span>(one + two)
<span class="linenr">28: </span>            }
<span class="linenr">29: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">40</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr">30: </span>              .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">31: </span>              .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">white</span>)
<span class="linenr">32: </span>              .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">largeTitle</span>)
<span class="linenr">33: </span>            <span style="color: #c678dd;">Divider</span>()
<span class="linenr">34: </span>            <span style="color: #c678dd;">Text</span>(verbatim: c)
<span class="linenr">35: </span>              .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">black</span>)
<span class="linenr">36: </span>
<span class="linenr">37: </span>
<span class="linenr">38: </span>        }
<span class="linenr">39: </span>          .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">60</span>)
<span class="linenr">40: </span>          .<span style="color: #c678dd;">background</span>(<span style="color: #c678dd;">Image</span>(<span style="color: #98be65;">"background"</span>).<span style="color: #c678dd;">resizable</span>().<span style="color: #c678dd;">scaledToFill</span>())
<span class="linenr">41: </span>          .<span style="color: #c678dd;">opacity</span>(<span style="color: #da8548; font-weight: bold;">0.9</span>)
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>}
<span class="linenr">44: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">45: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">46: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">47: </span>    }
<span class="linenr">48: </span>}
<span class="linenr">49: </span>
<span class="linenr">50: </span>
</pre>
</div>

<div id="org437901f" class="figure">
<p><img src="images/background-1.jpg" alt="background-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 16: </span>Background</p>
</div>
</div>
</div>
<div id="outline-container-orgfd3ede4" class="outline-3">
<h3 id="orgfd3ede4"><span class="section-number-3">8.5</span> Further reading</h3>
<div class="outline-text-3" id="text-8-5">
<ul class="org-ul">
<li><a href="https://www.simpleswiftguide.com/advanced-swiftui-button-styling-and-animation/">Advanced SwiftUI button styling and animation</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-list" class="outline-2">
<h2 id="list"><span class="section-number-2">9</span> List</h2>
<div class="outline-text-2" id="text-list">
</div>
<div id="outline-container-orge29bcac" class="outline-3">
<h3 id="orge29bcac"><span class="section-number-3">9.1</span> What is List</h3>
<div class="outline-text-3" id="text-9-1">
<p>
SwiftUI çš„åˆ—è¡¨è¦–åœ– (List View) å…¶å¯¦å’Œ UIKit çš„è¡¨æ ¼è¦–åœ– (Table View) å¾ˆé¡ä¼¼ï¼Œå®ƒå€‘éƒ½æ˜¯è®“é–‹ç™¼è€…æŠŠé …ç›®ä¸€åˆ—åˆ—åœ°å‘ˆç¾ï¼Œè€Œé è¨­è¨­å®šä¸Šï¼Œæ¯ä¸€åˆ—è³‡æ–™éƒ½æœƒç”¨åˆ†éš”ç·š (line separator) åˆ†é–‹ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">3: </span>        List {
<span class="linenr">4: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Hello world."</span>)
<span class="linenr">5: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Hello world."</span>)
<span class="linenr">6: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Hello world."</span>)
<span class="linenr">7: </span>        }
<span class="linenr">8: </span>    }
<span class="linenr">9: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org8312fcb" class="outline-3">
<h3 id="org8312fcb"><span class="section-number-3">9.2</span> æº–å‚™å–®ä¸€ cell æ ¼å¼</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        HStack {
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"book"</span>)
<span class="linenr"> 7: </span>              .<span style="color: #c678dd;">resizable</span>()
<span class="linenr"> 8: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">30</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">10: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Artificial Intelligence: A Modern Approach"</span>)
<span class="linenr">11: </span>                  .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">12: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">green</span>)
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Stuart Russell and Peter Norvig"</span>)
<span class="linenr">14: </span>                  .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">15: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">16: </span>            }
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>}
<span class="linenr">20: </span>
</pre>
</div>

<div id="org57700eb" class="figure">
<p><img src="images/single-cell.jpg" alt="single-cell.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 17: </span>Single cell</p>
</div>
</div>
</div>
<div id="outline-container-org900a2c7" class="outline-3">
<h3 id="org900a2c7"><span class="section-number-3">9.3</span> è½‰å…¥ List æ ¼å¼(éœæ…‹ List)</h3>
<div class="outline-text-3" id="text-9-3">
</div>
<div id="outline-container-org3404eee" class="outline-4">
<h4 id="org3404eee"><span class="section-number-4">9.3.1</span> å°‡æœ€å¤–å±¤çš„ VStack åŠ å…¥ List ä¸­</h4>
<div class="outline-text-4" id="text-9-3-1">

<div id="org6b272ef" class="figure">
<p><img src="images/list-1.jpg" alt="list-1.jpg" width="500" /><br />
</p>
<p><span class="figure-number">Figure 18: </span>List-1</p>
</div>
</div>
</div>
<div id="outline-container-orge4fd6e8" class="outline-4">
<h4 id="orge4fd6e8"><span class="section-number-4">9.3.2</span> list èªæ³•</h4>
<div class="outline-text-4" id="text-9-3-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">List</span>(<span style="color: #da8548; font-weight: bold;">0</span> ..&lt; <span style="color: #da8548; font-weight: bold;">5</span>) { item <span style="color: #51afef;">in</span>
<span class="linenr"> 6: </span>            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"book"</span>)
<span class="linenr"> 7: </span>              .<span style="color: #c678dd;">resizable</span>()
<span class="linenr"> 8: </span>              .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">30</span>, height: <span style="color: #da8548; font-weight: bold;">30</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">10: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Artificial Intelligence: A Modern Approach"</span>)
<span class="linenr">11: </span>                  .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">12: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">green</span>)
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Stuart Russell and Peter Norvig"</span>)
<span class="linenr">14: </span>                  .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">15: </span>                  .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">16: </span>            }
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c1e54e" class="outline-4">
<h4 id="org9c1e54e"><span class="section-number-4">9.3.3</span> çµæœ</h4>
<div class="outline-text-4" id="text-9-3-3">

<div id="org6d73055" class="figure">
<p><img src="images/list-2.jpg" alt="list-2.jpg" width="500" /><br />
</p>
<p><span class="figure-number">Figure 19: </span>List-2</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd6245cc" class="outline-3">
<h3 id="orgd6245cc"><span class="section-number-3">9.4</span> å»ºç«‹ list ä¾†æºè³‡æ–™(å‹•æ…‹ List) <sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></h3>
<div class="outline-text-3" id="text-9-4">
<p class="verse">
In order to handle dynamic items, you must first tell SwiftUI how it can identify which item is which. This is done using the Identifiable protocol, which has only one requirement: some sort of id value that SwiftUI can use to see which item is which. <sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#24314;&#31435;book struct&#6;</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Book</span>: Identifiable {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> image: <span style="color: #c678dd;">String</span>
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> books = [
<span class="linenr">13: </span>      <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b1"</span>),
<span class="linenr">14: </span>      <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#33267;&#27515;&#26041;&#20241;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b2"</span>),
<span class="linenr">15: </span>      <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#19968;&#35320;&#21363;&#30332;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b3"</span>),
<span class="linenr">16: </span>      <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#32034;&#21629;&#35370;&#23458;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b4"</span>),
<span class="linenr">17: </span>      <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#38343;&#22812;&#22238;&#32882; "</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b5"</span>)]
<span class="linenr">18: </span>
<span class="linenr">19: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">.....</span>
<span class="linenr">20: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf32bd34" class="outline-3">
<h3 id="orgf32bd34"><span class="section-number-3">9.5</span> å°‡è³‡æ–™é€£çµåˆ°åˆ—è¡¨ä¸­ <sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></h3>
<div class="outline-text-3" id="text-9-5">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">....</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>    <span style="color: #c678dd;">List</span>(books) { book <span style="color: #51afef;">in</span>
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">Image</span>(book.<span style="color: #dcaeea;">image</span>)
<span class="linenr"> 7: </span>          .<span style="color: #c678dd;">resizable</span>()
<span class="linenr"> 8: </span>          .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">40</span>, height: <span style="color: #da8548; font-weight: bold;">40</span>, alignment: .<span style="color: #c678dd;">center</span>)
<span class="linenr"> 9: </span>        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">10: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">11: </span>              .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">12: </span>              .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">green</span>)
<span class="linenr">13: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">14: </span>              .<span style="color: #c678dd;">multilineTextAlignment</span>(.<span style="color: #dcaeea;">leading</span>)
<span class="linenr">15: </span>              .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">orange</span>)
<span class="linenr">16: </span>        }
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>}
<span class="linenr">19: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org07cbb51" class="outline-3">
<h3 id="org07cbb51"><span class="section-number-3">9.6</span> çµæœ</h3>
<div class="outline-text-3" id="text-9-6">

<div id="org5338895" class="figure">
<p><img src="images/list-3.jpg" alt="list-3.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 20: </span>List-3</p>
</div>
</div>
</div>
<div id="outline-container-org761be6d" class="outline-3">
<h3 id="org761be6d"><span class="section-number-3">9.7</span> ç‚ºä»€éº¼è¦åŠ å…¥ id èˆ‡ Identifiable</h3>
<div class="outline-text-3" id="text-9-7">
<ul class="org-ul">
<li>Identifiable: å…è¨± Array ä¸­æœ‰é‡è¤‡å€¼<br /></li>
<li>id: æ˜ç¢ºå€åˆ†é‡è¤‡å€¼<br /></li>
<li>UUID: è‡ªå‹•ç”Ÿæˆ unique å€¼<br /></li>
<li>è©³ç´°èªªæ˜å¦‚<a href="https://medium.com/flawless-app-stories/swiftui-dynamic-list-identifiable-73c56215f9ff">SwiftUI - Dynamic List &amp; Identifiable</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgf6f5503" class="outline-3">
<h3 id="orgf6f5503"><span class="section-number-3">9.8</span> Reading source</h3>
<div class="outline-text-3" id="text-9-8">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=bz6GTYaIQXU">SwiftUI Basics: Dynamic Lists, HStack VStack, Images with Circle Clipped Stroke Overlays</a><br /></li>
<li><a href="https://developer.apple.com/tutorials/swiftui/building-lists-and-navigation">Building Lists and Navigation</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-StateBinding" class="outline-2">
<h2 id="StateBinding"><span class="section-number-2">10</span> Passing data between Views #1: @Binding</h2>
<div class="outline-text-2" id="text-StateBinding">
<p>
ç”¨é€”:ä¸åŒ View é–“å…±äº«è®Šæ•¸<br />
</p>
<ul class="org-ul">
<li>@Binding is one of SwiftUIâ€™s less used property wrappers, but itâ€™s still hugely important: it lets us declare that one value actually comes from elsewhere, and should be shared in both places. This is not the same as @ObservedObject or @EnvironmentObject, both of which are designed for reference types to be shared across potentially many views.<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup><br /></li>
<li>æœ‰æ™‚å€™æˆ‘å€‘æœƒæŠŠä¸€å€‹è¦–åœ–çš„å±¬æ€§å‚³è‡³å­ç¯€é»ä¸­ï¼Œä½†æ˜¯åˆä¸èƒ½ç›´æ¥çš„å‚³éçµ¦å­ç¯€é»ï¼Œå› ç‚ºåœ¨ Swift ä¸­å€¼çš„å‚³éå½¢å¼æ˜¯å€¼é¡å‹å‚³éæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å‚³éçµ¦å­ç¯€é»çš„æ˜¯ä¸€å€‹æ‹·è²éçš„å€¼ã€‚ä½†æ˜¯é€šé @Binding ä¿®é£¾å™¨ä¿®é£¾å¾Œï¼Œå±¬æ€§è®Šæˆäº†ä¸€å€‹å¼•ç”¨é¡å‹ï¼Œå‚³éè®Šæˆäº†å¼•ç”¨å‚³éï¼Œé€™æ¨£çˆ¶å­è¦–åœ–çš„ç‹€æ…‹å°±èƒ½é—œè¯èµ·ä¾†äº†ã€‚<sup><a id="fnr.6.100" class="footref" href="#fn.6">6</a></sup><br /></li>
<li>The wrappedValue is: a value that is bound to something else.<br /></li>
<li>What it does: gets/sets the value of the wrappedValue from some other source.<br /></li>
<li>What it does: when the bound-to value changes, it invalidates the View.<br /></li>
</ul>
</div>
<div id="outline-container-org1103fc4" class="outline-3">
<h3 id="org1103fc4"><span class="section-number-3">10.1</span> Time to use Binding</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Bindings are all about having a <b>single source of the truth (data)!</b>.<br />
</p>
<ul class="org-ul">
<li>Getting text out of a TextField<br /></li>
<li>Using a Toggle or other state-modifying UI element<br /></li>
<li>Finding out which item in a NavigationView was chosen.<br /></li>
<li>Find out whether we&rsquo;re being targeted with a Drag<br /></li>
<li>Binding our gesture to the .updating function of a gesture.<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org4484282" class="outline-3">
<h3 id="org4484282"><span class="section-number-3">10.2</span> Demo 1: @State v.s. @Bidning</h3>
<div class="outline-text-3" id="text-10-2">
<p>
é€é@State èˆ‡@Bidning, ContentView.swift å¯ä»¥å°‡è®Šæ•¸ switchIsOn pass çµ¦ SwitchView.swiftï¼Œè€Œå¾Œè€…å¯ä»¥è—‰ç”±æ›´æ”¹è®Šæ•¸å€¼ä¾†æ”¹è®Š ContentView.swift çš„é¡¯ç¤ºçµæœã€‚<br />
</p>
</div>
<div id="outline-container-org7b8b1c5" class="outline-4">
<h4 id="org7b8b1c5"><span class="section-number-4">10.2.1</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-10-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> switchIsOn = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> Vie {
<span class="linenr"> 7: </span>        VStack {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Text</span>(switchIsOn ? <span style="color: #98be65;">"-_-"</span> : <span style="color: #98be65;">"^_^"</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">SwitchView</span>(switchIsOn: $switchIsOn)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3da7d54" class="outline-4">
<h4 id="org3da7d54"><span class="section-number-4">10.2.2</span> SwitchView.swift</h4>
<div class="outline-text-4" id="text-10-2-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SwitchView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@Binding</span> <span style="color: #51afef;">var</span> swtichIsOn: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">Toggle</span>(isOn: $switchIsOn, label: {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Text</span>(switchIsOn ? <span style="color: #98be65;">"ON"</span> : <span style="color: #98be65;">"OFF"</span>)
<span class="linenr"> 9: </span>        })
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb00e91f" class="outline-3">
<h3 id="orgb00e91f"><span class="section-number-3">10.3</span> Demo 2: Sharing multiple variable</h3>
<div class="outline-text-3" id="text-10-3">
<p>
å»ºç«‹ä¸€å€‹ User structï¼Œé€é@Binding èˆ‡å…¶ä»– View å…±äº« struct è£¡çš„è®Šæ•¸<br />
</p>
</div>
<div id="outline-container-org41b5097" class="outline-4">
<h4 id="org41b5097"><span class="section-number-4">10.3.1</span> User.swift</h4>
<div class="outline-text-4" id="text-10-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">User</span> {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> firstName: <span style="color: #c678dd;">String</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> lastname: <span style="color: #c678dd;">String</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> VIP: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr"> 8: </span>        firstName = <span style="color: #98be65;">"Brown"</span>
<span class="linenr"> 9: </span>        lastname = <span style="color: #98be65;">"Charlie"</span>
<span class="linenr">10: </span>        VIP = <span style="color: #a9a1e1;">false</span>
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
<span class="linenr">13: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc29173b" class="outline-4">
<h4 id="orgc29173b"><span class="section-number-4">10.3.2</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-10-3-2">
<p>
å»ºç«‹ä¸€å€‹å¯ä»¥å…¶ä»– View å…±äº«çš„ struct variable (user)ï¼Œå°‡ user struct å‚³çµ¦ EditUser é€²è¡Œç·¨è¼¯<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showEdit: <span style="color: #c678dd;">Bool</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 8: </span>        VStack {
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"User: \(</span>user.<span style="color: #dcaeea;">lastname</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">)"</span>)
<span class="linenr">10: </span>            <span style="color: #51afef;">if</span> user.<span style="color: #dcaeea;">VIP</span> {
<span class="linenr">11: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"VIP"</span>)
<span class="linenr">12: </span>            } <span style="color: #51afef;">else</span> {
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Regular user"</span>)
<span class="linenr">14: </span>            }
<span class="linenr">15: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"Edit"</span>) {
<span class="linenr">16: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showEdit</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr">17: </span>            }.<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showEdit, content: {
<span class="linenr">18: </span>                <span style="color: #c678dd;">EditUser</span>(user: $user)
<span class="linenr">19: </span>            })
<span class="linenr">20: </span>        }.<span style="color: #c678dd;">padding</span>()
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>}
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">25: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">26: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org47d0b23" class="outline-4">
<h4 id="org47d0b23"><span class="section-number-4">10.3.3</span> EditUser.swift</h4>
<div class="outline-text-4" id="text-10-3-3">
<p>
ä»¥@Bidning æ¥æ”¶ä¾†è‡ª ContentView çš„ user<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">EditUser</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@Binding</span> <span style="color: #51afef;">var</span> user: User
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        VStack {
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First Name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last Name"</span>, text: $user.<span style="color: #dcaeea;">lastname</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Toggle</span>(<span style="color: #98be65;">"VIP"</span>, isOn: $user.<span style="color: #dcaeea;">VIP</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">EditUser_Previews</span>: PreviewProvider {
<span class="linenr">15: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">16: </span>        <span style="color: #c678dd;">EditUser</span>(user: .<span style="color: #c678dd;">constant</span>(<span style="color: #c678dd;">User</span>()))
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-Alert" class="outline-2">
<h2 id="Alert"><span class="section-number-2">11</span> Alert</h2>
<div class="outline-text-2" id="text-Alert">
<p>
ç›®çš„: è·³å‡ºå°è©±è¦–çª—<br />
</p>
</div>
<div id="outline-container-orgac7488c" class="outline-3">
<h3 id="orgac7488c"><span class="section-number-3">11.1</span> ä»¥ Button è§¸ç™¼</h3>
<div class="outline-text-3" id="text-11-1">
<p>
å’Œå‘¼å«å…¶ä»– View ä¸€æ¨£ï¼Œä»ç„¶æ˜¯ä»¥ä¸€å€‹ bool ä¾†æ§åˆ¶æ˜¯å¦ç§€å‡º Alert<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> showAlert:<span style="color: #c678dd;">Bool</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 4: </span>        <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#35531;&#25353;&#25105;"</span>) {
<span class="linenr"> 5: </span>            showAlert = <span style="color: #a9a1e1;">true</span>
<span class="linenr"> 6: </span>        }.<span style="color: #c678dd;">alert</span>(isPresented: $showAlert, content: {
<span class="linenr"> 7: </span>                                             <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Alert</span>(title: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#21029;&#20098;&#25353;"</span>))
<span class="linenr"> 8: </span>                                         })
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org94cafa7" class="outline-3">
<h3 id="org94cafa7"><span class="section-number-3">11.2</span> ä»¥ TextField è§¸ç™¼</h3>
<div class="outline-text-3" id="text-11-2">
<p>
å°‡æ§åˆ¶é¡¯ç¤ºçš„ boo å€¼å¯«åœ¨ <b>onCommit</b><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> title:<span style="color: #c678dd;">String</span> = <span style="color: #98be65;">""</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> showAlert:<span style="color: #c678dd;">Bool</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"To be or not to be"</span>, text: $title, onCommit:  {
<span class="linenr"> 6: </span>                                                          showAlert = <span style="color: #a9a1e1;">true</span>
<span class="linenr"> 7: </span>                                                      })
<span class="linenr"> 8: </span>          .<span style="color: #c678dd;">alert</span>(isPresented: $showAlert, content: {
<span class="linenr"> 9: </span>                                              <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Alert</span>(title: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>title<span style="color: #98be65;">)"</span>))
<span class="linenr">10: </span>                                          })
<span class="linenr">11: </span>
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org630e404" class="outline-2">
<h2 id="org630e404"><span class="section-number-2">12</span> Tabbed View</h2>
<div class="outline-text-2" id="text-12">
<p>
Tab bar æ˜¯åœ¨ App è¢å¹•åº•éƒ¨å‡ºç¾çš„æ¬„ï¼Œæä¾›äº†åœ¨ä¸åŒçš„ç‰ˆé¢ä¹‹é–“é€²è¡Œå¿«é€Ÿåˆ‡æ›çš„é€”å¾‘ã€‚Tab bar çš„èƒŒæ™¯é¡è‰²æ˜¯åŠé€æ˜ï¼Œå¯ä»¥æœ‰èª¿è‰²ã€‚Tab bar åœ¨æ‰€æœ‰è¢å¹•å°ºå¯¸éƒ½ä¿æŒä¸€æ¨£çš„é«˜åº¦ï¼Œä¸¦ä¸”åœ¨éµç›¤æ™‚å‡ºç¾æœƒéš±è—èµ·ä¾†ã€‚<br />
</p>

<p>
ä¸€å€‹ tab bar å¯ä»¥åŒ…å«ç„¡æ•¸å€‹ tabï¼Œä½†å¯ä»¥èƒ½å®¹ç´çš„æ•¸é‡è¦–ä¹æ ¹æ“šæ‰‹æ©Ÿ/å¹³æ¿çš„å¤§å°ï¼Œä»¥åŠæ©«ã€è±å±æ¨¡å¼éƒ½æœƒæœ‰æ‰€å½±éŸ¿ã€‚åœ¨ç©ºé–“çš„é™åˆ¶ä¸‹ï¼Œç•¶æŸäº› tab ç„¡æ³•è¢«é¡¯ç¤ºæ™‚ï¼Œæœ€å¾Œä¸€å€‹ tab æœƒè®Šæˆâ€œæ›´å¤šâ€(More)ï¼Œ é€šéé€™å€‹ tab å¯ä»¥åˆ°å¦ä¸€å€‹ç¨ç«‹çš„åˆ—è¡¨é é¢ï¼Œé‚£è£¡æœƒåˆ—å‡ºæ‰€æœ‰ç„¡æ³•è¢«é¡¯ç¤ºçš„ tabã€‚<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup><br />
</p>
</div>
<div id="outline-container-org5cd2015" class="outline-3">
<h3 id="org5cd2015"><span class="section-number-3">12.1</span> Create subView</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">tabView</span>: View {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr"> 6: </span>        UITabBarItem.<span style="color: #c678dd;">appearance</span>().<span style="color: #c678dd;">setTitleTextAttributes</span>([.<span style="color: #c678dd;">font</span>: UIFont.<span style="color: #c678dd;">systemFont</span>(ofSize: <span style="color: #da8548; font-weight: bold;">16</span>) ], <span style="color: #51afef;">for</span>: .<span style="color: #c678dd;">normal</span>)
<span class="linenr"> 7: </span>    }
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        TabView {
<span class="linenr">11: </span>            <span style="color: #c678dd;">StoreView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">12: </span>                <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"cart.fill.badge.plus"</span>)
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#36092;&#36023;"</span>)
<span class="linenr">14: </span>            }
<span class="linenr">15: </span>            <span style="color: #c678dd;">AboutView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">16: </span>                <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"person.3"</span>)
<span class="linenr">17: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#38364;&#26044;"</span>)
<span class="linenr">18: </span>            }
<span class="linenr">19: </span>            <span style="color: #c678dd;">NewsView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">20: </span>                <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"message"</span>)
<span class="linenr">21: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#28040;&#24687;"</span>)
<span class="linenr">22: </span>            }
<span class="linenr">23: </span>        }.<span style="color: #c678dd;">accentColor</span>(.<span style="color: #dcaeea;">pink</span>)    }
<span class="linenr">24: </span>}
<span class="linenr">25: </span>
<span class="linenr">26: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">StoreView</span>: View {
<span class="linenr">27: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">28: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#21830;&#24215;View"</span>)
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">AboutView</span>: View {
<span class="linenr">33: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">34: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#38364;&#26044;View"</span>)
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">NewsView</span>: View {
<span class="linenr">39: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">40: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#28040;&#24687;View"</span>)
<span class="linenr">41: </span>    }
<span class="linenr">42: </span>}
<span class="linenr">43: </span>
<span class="linenr">44: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">tabView_Previews</span>: PreviewProvider {
<span class="linenr">45: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">46: </span>        <span style="color: #c678dd;">tabView</span>()
<span class="linenr">47: </span>    }
<span class="linenr">48: </span>}
</pre>
</div>
<p>
åŸ·è¡Œçµæœå¦‚ä¸‹<br />
</p>

<div id="orgb137ac1" class="figure">
<p><img src="images/tabbedView.gif" alt="tabbedView.gif" width="300" /><br />
</p>
<p><span class="figure-number">Figure 21: </span>Tabbed View DEMO</p>
</div>
</div>
</div>
<div id="outline-container-org6d1838b" class="outline-3">
<h3 id="org6d1838b"><span class="section-number-3">12.2</span> è‡ªè¨‚åº•ä¸‹çš„ä¸»æ§ tab bar</h3>
<div class="outline-text-3" id="text-12-2">
</div>
<div id="outline-container-org4fef1b1" class="outline-4">
<h4 id="org4fef1b1"><span class="section-number-4">12.2.1</span> Change tabView font size</h4>
<div class="outline-text-4" id="text-12-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">init</span>() {
<span class="linenr">2: </span>    UITabBarItem.<span style="color: #c678dd;">appearance</span>().<span style="color: #c678dd;">setTitleTextAttributes</span>([.<span style="color: #c678dd;">font</span>: UIFont.<span style="color: #c678dd;">systemFont</span>(ofSize: <span style="color: #da8548; font-weight: bold;">14</span>) ], <span style="color: #51afef;">for</span>: .<span style="color: #c678dd;">normal</span>)
<span class="linenr">3: </span>}
<span class="linenr">4: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9fb886e" class="outline-4">
<h4 id="org9fb886e"><span class="section-number-4">12.2.2</span> the color of unselected tab bar</h4>
<div class="outline-text-4" id="text-12-2-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">init</span>() {
<span class="linenr">2: </span>    UITabBar.<span style="color: #c678dd;">appearance</span>().<span style="color: #dcaeea;">unselectedItemTintColor</span> = UIColor.<span style="color: #dcaeea;">systemGray3</span>
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c35795" class="outline-4">
<h4 id="org9c35795"><span class="section-number-4">12.2.3</span> the color of the tab bar item : .accentColor</h4>
<div class="outline-text-4" id="text-12-2-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>TabView {
<span class="linenr">2: </span>
<span class="linenr">3: </span>}.<span style="color: #c678dd;">accentColor</span>(.<span style="color: #dcaeea;">pink</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org83a7d6e" class="outline-4">
<h4 id="org83a7d6e"><span class="section-number-4">12.2.4</span> the tab barâ€™s color: appearance()</h4>
<div class="outline-text-4" id="text-12-2-4">
<p>
å…©ç¨®åšæ³•(å°šæœªå€åˆ† backgroundColor èˆ‡ barTintColor ä¹‹å·®ç•°)<br />
</p>
</div>
<div id="outline-container-org9914745" class="outline-5">
<h5 id="org9914745"><span class="section-number-5">12.2.4.1</span> init()</h5>
<div class="outline-text-5" id="text-12-2-4-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">init</span>() {
<span class="linenr">2: </span>        UITabBar.<span style="color: #c678dd;">appearance</span>().<span style="color: #dcaeea;">barTintColor</span> = UIColor.<span style="color: #dcaeea;">systemPink</span>
<span class="linenr">3: </span>    }
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc0c9d87" class="outline-5">
<h5 id="orgc0c9d87"><span class="section-number-5">12.2.4.2</span> onAppear()</h5>
<div class="outline-text-5" id="text-12-2-4-2">
<p>
èˆ‡ init()å…±ç”¨æ™‚ï¼ŒonAppear()å„ªå…ˆ<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>.<span style="color: #c678dd;">onAppear</span>() {
<span class="linenr">2: </span>    UITabBar.<span style="color: #c678dd;">appearance</span>().<span style="color: #dcaeea;">barTintColor</span> = .<span style="color: #dcaeea;">white</span>
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org07a46d7" class="outline-3">
<h3 id="org07a46d7"><span class="section-number-3">12.3</span> ä»¥ç¨‹å¼æ§åˆ¶ tabbed view çš„ subview çš„åˆ‡æ›</h3>
<div class="outline-text-3" id="text-12-3">
<p>
Users can tap the tab bar items to switch between tabs, which is automatically handled the TabView. In some use cases, you may want to switch to a specific tab programmatically. The TabView has another init method for this purpose. The method takes a state variable which associates with the tag value of the tabs.<sup><a id="fnr.13" class="footref" href="#fn.13">13</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #c678dd;">TabView</span>(selection: $selection)
</pre>
</div>
<p>
As an example, declare the following state variable in ContentView:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> selection = <span style="color: #da8548; font-weight: bold;">0</span>
</pre>
</div>
<p>
Here we initialize the selection variable with a value of 0, which is the tag value of the first tab item. We havenâ€™t defined the tag value for the tab items yet. Therefore, update the code like this and attach the tag modifier for each of the tab items:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookDetailView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"This is the Book Detail View"</span>)
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookOrderView</span>: View {
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">11: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#36092;&#29289;&#36554;"</span>)
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookAboutView</span>: View {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">17: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"About me"</span>)
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>}
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">22: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">23: </span>        UITabBar.<span style="color: #c678dd;">appearance</span>().<span style="color: #dcaeea;">barTintColor</span> = UIColor.<span style="color: #dcaeea;">systemPink</span>
<span class="linenr">24: </span>        UITabBar.<span style="color: #c678dd;">appearance</span>().<span style="color: #dcaeea;">unselectedItemTintColor</span> = UIColor.<span style="color: #dcaeea;">systemGray3</span>
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> selection = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">27: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">28: </span>
<span class="linenr">29: </span>        <span style="color: #c678dd;">ZStack</span>(alignment: <span style="color: #c678dd;">Alignment</span>(horizontal: .<span style="color: #dcaeea;">trailing</span>, vertical: .<span style="color: #c678dd;">top</span>), content: {
<span class="linenr">30: </span>            <span style="color: #c678dd;">TabView</span>(selection: $selection,
<span class="linenr">31: </span>                    content:  {
<span class="linenr">32: </span>                        <span style="color: #c678dd;">BookDetailView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">33: </span>                            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"book.fill"</span>)
<span class="linenr">34: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Detail"</span>)
<span class="linenr">35: </span>                        }.<span style="color: #c678dd;">tag</span>(<span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">36: </span>                        <span style="color: #c678dd;">BookOrderView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">37: </span>                            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"cart.fill"</span>)
<span class="linenr">38: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Order"</span>)
<span class="linenr">39: </span>                        }.<span style="color: #c678dd;">tag</span>(<span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr">40: </span>                        <span style="color: #c678dd;">BookAboutView</span>().<span style="color: #dcaeea;">tabItem</span> {
<span class="linenr">41: </span>                            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"person"</span>)
<span class="linenr">42: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"About"</span>)
<span class="linenr">43: </span>                        }.<span style="color: #c678dd;">tag</span>(<span style="color: #da8548; font-weight: bold;">2</span>)
<span class="linenr">44: </span>                    })
<span class="linenr">45: </span>                .<span style="color: #c678dd;">accentColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">46: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">47: </span>                selection = (selection + <span style="color: #da8548; font-weight: bold;">1</span>) % <span style="color: #da8548; font-weight: bold;">3</span>
<span class="linenr">48: </span>                <span style="color: #c678dd;">print</span>(selection)
<span class="linenr">49: </span>            }, label: {
<span class="linenr">50: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Button"</span>)
<span class="linenr">51: </span>                    .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">3</span>)
<span class="linenr">52: </span>                    .<span style="color: #c678dd;">background</span>(Color.<span style="color: #dcaeea;">pink</span>)
<span class="linenr">53: </span>                    .<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">white</span>)
<span class="linenr">54: </span>                    .<span style="color: #c678dd;">padding</span>(<span style="color: #da8548; font-weight: bold;">3</span>)
<span class="linenr">55: </span>            })
<span class="linenr">56: </span>        })
<span class="linenr">57: </span>    }
<span class="linenr">58: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org4c6a9d7" class="outline-3">
<h3 id="org4c6a9d7"><span class="section-number-3">12.4</span> ä¸€å€‹å„ªç§€çš„ Tab Bar æ‡‰è©²å…·å‚™å“ªäº›ç‰¹é»ï¼Ÿ<sup><a id="fnr.12.100" class="footref" href="#fn.12">12</a></sup></h3>
<div class="outline-text-3" id="text-12-4">
<ol class="org-ol">
<li>ä¸æœƒæœ‰å¤ªå¤šçš„ tab<br />
æ¯å¢åŠ ä¸€å€‹ tab æœƒæ¸›å°äº†é¸æ“‡å„åˆ¥çš„å¯è§¸å€åŸŸï¼Œä¸¦å¢åŠ  app çš„è¤‡é›œæ€§ï¼Œè®“ç”¨æˆ¶æ›´é›£æ‰¾åˆ°æ‰€éœ€çš„è³‡æ–™ã€‚å³ä½¿â€œæ›´å¤š(More)â€æ¨™ç±¤å¯ä»¥å±•ç¤ºé¡å¤–çš„ tabï¼Œä½†é€™æœƒéœ€è¦é¡å¤–çš„é»æ“Šæ­¥é©Ÿï¼Œè€Œä¸”æ²’æœ‰å¾ˆå¥½åˆ©ç”¨ tab bar çš„æœ‰é™ç©ºé–“ã€‚å¤ªå°‘çš„ tab ä¹Ÿæ˜¯å•é¡Œï¼Œå®ƒæœƒä½¿ä½ çš„ç•Œé¢æ„Ÿè¦ºè¢«åˆ†é›¢ã€‚ä¸€èˆ¬ä¾†èªªï¼Œåœ¨ iPhone ä¸Šæ‡‰ä½¿ç”¨ 3 è‡³ 5 å€‹æ¨™ç±¤ï¼Œåœ¨ iPad ä¸Šå‰‡å¯ç¨å¾®å¤šå¹¾å€‹ã€‚<br /></li>
<li>ä¸æœƒç¶“å¸¸è®Šå‹•<br />
åœ¨æŸå€‹ tab çš„åŠŸèƒ½ç„¡æ³•ä½¿ç”¨æ™‚ï¼Œ ä¸è¦ç§»é™¤é€™å€‹ tab æˆ–æ˜¯è®“å®ƒå¤±æ•ˆã€‚å¦‚æœ tab æ™‚æœ‰æ™‚ç„¡ï¼ŒApp ç•Œé¢æœƒè®Šå¾—ä¸ç©©å®šå’Œé›£ä»¥æ‰æ‘¸ã€‚ç¢ºä¿æ‰€æœ‰çš„ tab éƒ½å¯æœ‰æ•ˆé»æ“Šï¼Œä¸¦ä¸”å‘ç”¨æˆ¶è§£é‡‹ç›®å‰ tab å…§å®¹ä¸å¯ç”¨çš„åŸå› ã€‚è­¬å¦‚èªªï¼Œç•¶ iOS è£ç½®æ²’æœ‰æ­Œæ›²æ™‚ï¼ŒéŸ³æ¨‚ app çš„â€œæˆ‘çš„éŸ³æ¨‚â€tab æœƒé¡¯ç¤ºå¦‚ä½•ä¸‹è¼‰æ­Œæ›²çš„èªªæ˜ã€‚<br /></li>
<li>æ‡‰åœ¨ç›¸é€£æ¥çš„è¦–çª—é€²è¡Œå…§å®¹çš„è½‰æ›<br />
ç‚ºäº†è®“ç•Œé¢ç¬¦åˆç”¨æˆ¶é æœŸï¼Œé¸æ“‡ä¸€å€‹ tab å¾Œçš„ä½œç”¨æ‡‰è©²ç›´æ¥é¡¯ç¤ºæ–¼èˆ‡å…¶ tab bar ç›¸é€£çš„è¦–çª—ï¼Œè€Œä¸æ˜¯è¢å¹•ä¸Šå…¶å®ƒç¯„åœçš„è¦–çª—ã€‚ä¾‹å¦‚ï¼Œå¦‚åœ¨å·¦é‚Šçš„ split view é¸æ“‡äº†ä¸€å€‹ tabï¼Œæ˜¯ä¸æœƒè®“å³åŠéƒ¨åˆ†çªç„¶ç”¢ç”Ÿè®ŠåŒ–çš„ã€‚åœ¨ popover ä¸­é¸æ“‡çš„ tab ä¸æœƒå°è‡´å¾Œæ–¹çš„è¦–çª—ç™¼ç”Ÿæ”¹è®Šã€‚<br /></li>
<li>æ‡‰ä¿æŒ icon çš„é¢¨æ ¼çµ±ä¸€å’Œå¹³è¡¡<br />
ç³»çµ±æä¾›äº†ä¸€ç³»åˆ—é å…ˆè¨­å®šå¥½ã€ä¸€èˆ¬ç”¨é€”çš„ iconï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥å‰µå»ºè‡ªå·±çš„ iconï¼Œç¢ºä¿ tab bar icon åœ¨è¦–è¦ºä¸Šçš„é¢¨æ ¼çµ±ä¸€å’Œå¹³è¡¡ã€‚<br /></li>
<li>æ‡‰ä½¿ç”¨ badge å‚³éä¿¡æ¯<br />
æˆ‘å€‘å¯ä»¥åœ¨ tab ä¸ŠåŠ ä¸Š badge (ä¸€å€‹ç´…è‰²æ©¢åœ“ä¸Šå¸¶æœ‰ç™½è‰²æ•¸å­—æˆ–æ„Ÿå˜†è™Ÿçš„åœ–æ¡ˆ) ï¼Œä¾†æš—ç¤ºè©² tab æˆ–æ¨¡å¼æœ‰æ–°ä¿¡æ¯ã€‚<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgd22f471" class="outline-3">
<h3 id="orgd22f471"><span class="section-number-3">12.5</span> Further Reading</h3>
<div class="outline-text-3" id="text-12-5">
<ul class="org-ul">
<li><a href="https://www.appcoda.com/swiftui-tabview/">Customizing the Tab Bar Color</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=tDyvkIe9RsA">Tabbed View SwiaftUI - TabBar Tutorial &amp; Basic Customization - Xcode 11 - 2019</a><br /></li>
<li><a href="https://medium.com/@nwyyy/swift%E7%AD%86%E8%A8%98-tab-bar-2ddba7d56587">iOSç­†è¨˜ï¼šTab Bar</a><br /></li>
<li><a href="https://www.simpleswiftguide.com/">Simple Swift Guide</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-navigation" class="outline-2">
<h2 id="navigation"><span class="section-number-2">13</span> Navigation Views</h2>
<div class="outline-text-2" id="text-navigation">
</div>
<div id="outline-container-org08cdca2" class="outline-3">
<h3 id="org08cdca2"><span class="section-number-3">13.1</span> Navigation bar</h3>
<div class="outline-text-3" id="text-13-1">
<ul class="org-ul">
<li>æ–¼ body ä¸­æœ€å¤–å±¤çš„ component ä¹‹å¤–åŠ å…¥ NavigationView<br /></li>
<li>Title: navigationBarTitle()ï¼Œtitle ç½®æ–¼ NavigationView {}å…§ attach åœ¨ List ä¸Šï¼Œå› ç‚º NavigationView ä¸»è¦è² è²¬æ–¼ä¸åŒçš„ View ä¸­åˆ‡æ›ï¼Œæ¯å€‹ View éƒ½æœƒæœ‰è‡ªå·±çš„ content èˆ‡ Titleã€‚<br /></li>
<li>DisplayMode æœ‰ ä¸‰é¡ï¼š<br />
<ol class="org-ol">
<li>large: é©ç”¨æ–¼ top level<br /></li>
<li>inline: é©ç”¨æ–¼ detail level<br /></li>
<li>automatic: è‡ªå‹•åˆ¤æ–·æœ‰ç„¡ parent level<br /></li>
</ol></li>
</ul>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>  ...
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 5: </span>    ....
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>(books) { book <span style="color: #51afef;">in</span>
<span class="linenr"> 9: </span>                ...
<span class="linenr">10: </span>                }
<span class="linenr">11: </span>            .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#26360;&#21934;"</span>))
<span class="linenr">12: </span>            .<span style="color: #c678dd;">navigationBarTitleDisplayMode</span>(.<span style="color: #dcaeea;">large</span>)
<span class="linenr">13: </span>            }
<span class="linenr">14: </span>        }
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>}
<span class="linenr">17: </span>...
</pre>
</div>

<div id="org5715df2" class="figure">
<p><img src="images/navigation-1.jpg" alt="navigation-1.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 22: </span>Navigation bar</p>
</div>
</div>

<div id="outline-container-org9816c64" class="outline-4">
<h4 id="org9816c64"><span class="section-number-4">13.1.1</span> Hide Navigation Bar</h4>
<div class="outline-text-4" id="text-13-1-1">
<p>
ä½¿ç”¨ Hide èˆ‡ä¸è¨­å®š BarTitle çš„å·®ç•°åœ¨æ–¼ï¼šå¾Œè€…ä»æœƒä½”æ‰ Bar çš„ç©ºé–“<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>  ...
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 5: </span>    ....
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>(books) { book <span style="color: #51afef;">in</span>
<span class="linenr"> 9: </span>                ...
<span class="linenr">10: </span>                }
<span class="linenr">11: </span>            .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#26360;&#21934;"</span>))
<span class="linenr">12: </span>            .<span style="color: #c678dd;">navigationBarTitleDisplayMode</span>(.<span style="color: #dcaeea;">large</span>)
<span class="linenr">13: </span>            .<span style="color: #c678dd;">navigationBarHidden</span>(<span style="color: #a9a1e1;">true</span>)
<span class="linenr">14: </span>            }
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
<span class="linenr">18: </span>...
</pre>
</div>
</div>

<div id="outline-container-org556072e" class="outline-5">
<h5 id="org556072e"><span class="section-number-5">13.1.1.1</span> NavigationLink</h5>
<div class="outline-text-5" id="text-13-1-1-1">
</div>
<ol class="org-ol">
<li><a id="orge23e968"></a>Create<br /></li>
<li><a id="org878a8f8"></a>èªæ³•:<br />
<div class="outline-text-6" id="text-13-1-1-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #c678dd;">NavigationLink</span>(&lt;title: <span style="color: #c678dd;">StringProtocol</span>, destination:)
</pre>
</div>
</div>
</li>
<li><a id="org2dd2558"></a>æ–¹å¼<br />
<div class="outline-text-6" id="text-13-1-1-1-3">
<ol class="org-ol">
<li><p>
Attach link in NavigationLink()<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 3: </span>        NavigationView {
<span class="linenr"> 4: </span>            VStack {
<span class="linenr"> 5: </span>                <span style="color: #c678dd;">NavigationLink</span>(<span style="color: #98be65;">"JumpToSecond"</span>, destination: <span style="color: #c678dd;">SecondView</span>())
<span class="linenr"> 6: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Hello, world!"</span>)
<span class="linenr"> 7: </span>                    .<span style="color: #c678dd;">padding</span>()
<span class="linenr"> 8: </span>            }
<span class="linenr"> 9: </span>            .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Book List"</span>)
<span class="linenr">10: </span>            .<span style="color: #c678dd;">navigationBarTitleDisplayMode</span>(.<span style="color: #dcaeea;">large</span>)
<span class="linenr">11: </span>        }
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div></li>
<li>Attach link to other object(Text in this example)<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 3: </span>        NavigationView {
<span class="linenr"> 4: </span>            VStack {
<span class="linenr"> 5: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">SecondView</span>()) {
<span class="linenr"> 6: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"TextLink"</span>)
<span class="linenr"> 7: </span>                        .<span style="color: #c678dd;">padding</span>()
<span class="linenr"> 8: </span>                }
<span class="linenr"> 9: </span>            }
<span class="linenr">10: </span>            .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Book List"</span>)
<span class="linenr">11: </span>            .<span style="color: #c678dd;">navigationBarTitleDisplayMode</span>(.<span style="color: #dcaeea;">large</span>)
<span class="linenr">12: </span>        }
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>
<p>
è‹¥æ˜¯å°‡ link attach è‡³ imageï¼Œå‰‡è¦åŠ ä¸Š renderingModeï¼Œå¦å‰‡æœƒçœ‹ä¸åˆ°åœ–ï¼Œä¾‹ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 3: </span>        NavigationView {
<span class="linenr"> 4: </span>            VStack {
<span class="linenr"> 5: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">SecondView</span>()) {
<span class="linenr"> 6: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"myImage"</span>)
<span class="linenr"> 7: </span>                        .<span style="color: #c678dd;">renderingMode</span>(.<span style="color: #dcaeea;">original</span>)
<span class="linenr"> 8: </span>                }
<span class="linenr"> 9: </span>            }
<span class="linenr">10: </span>            .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Book List"</span>)
<span class="linenr">11: </span>        }
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org0a1022e" class="outline-5">
<h5 id="org0a1022e"><span class="section-number-5">13.1.1.2</span> Reading</h5>
<div class="outline-text-5" id="text-13-1-1-2">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=nA6Jo6YnL9g">The Complete Guide to NavigationView in SwiftUI</a><br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org8a7cff6" class="outline-3">
<h3 id="org8a7cff6"><span class="section-number-3">13.2</span> Create New Views</h3>
<div class="outline-text-3" id="text-13-2">
</div>
<div id="outline-container-org7090868" class="outline-4">
<h4 id="org7090868"><span class="section-number-4">13.2.1</span> in same file</h4>
<div class="outline-text-4" id="text-13-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookDetailView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"This is the Book Detail View"</span>)
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">11: </span>        NavigationView {
<span class="linenr">12: </span>            VStack {
<span class="linenr">13: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">BookDetailView</span>()) {
<span class="linenr">14: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"GoToDetail"</span>)
<span class="linenr">15: </span>                }
<span class="linenr">16: </span>            }
<span class="linenr">17: </span>              .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Book List"</span>)
<span class="linenr">18: </span>
<span class="linenr">19: </span>        }
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>}
</pre>
</div>
</div>
<div id="outline-container-org4575d3f" class="outline-5">
<h5 id="org4575d3f"><span class="section-number-5">13.2.1.1</span> class exercise</h5>
<div class="outline-text-5" id="text-13-2-1-1">
<p>
ç‚ºä¸Šè¿° NavigationView åŠ å…¥å¦å¤–å…©å€‹ subView: OrderView, AboutView<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgacf9ce3" class="outline-4">
<h4 id="orgacf9ce3"><span class="section-number-4">13.2.2</span> in new file</h4>
<div class="outline-text-4" id="text-13-2-2">
<p>
å°‡ä¸Šè¿°å°ˆæ¡ˆä¸­çš„æ¯å€‹ subView æ”¹ç‚ºç¨ç«‹ View<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgbe15ad8" class="outline-3">
<h3 id="orgbe15ad8"><span class="section-number-3">13.3</span> Passing parameter(å–®ç´”åƒæ•¸å‚³é)</h3>
<div class="outline-text-3" id="text-13-3">
<p>
Single way, Just pass variable from A to B.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookDetailView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> operation: <span style="color: #c678dd;">String</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 4: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#24050;&#28858;&#20320;\(</span>operation<span style="color: #98be65;">)&#36889;&#26412;&#26360;"</span>)
<span class="linenr"> 5: </span>    }
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        NavigationView {
<span class="linenr">11: </span>            VStack {
<span class="linenr">12: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">BookDetailView</span>(operation: <span style="color: #98be65;">"&#20511;&#38321;"</span>)) { <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Loan"</span>)
<span class="linenr">13: </span>                }
<span class="linenr">14: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">BookDetailView</span>(operation: <span style="color: #98be65;">"&#32396;&#20511;"</span>)) { <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Renew"</span>)
<span class="linenr">15: </span>                }
<span class="linenr">16: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">BookDetailView</span>(operation: <span style="color: #98be65;">"&#27512;&#36996;"</span>)) { <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Return"</span>)
<span class="linenr">17: </span>                }
<span class="linenr">18: </span>            }
<span class="linenr">19: </span>              .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Book List"</span>)
<span class="linenr">20: </span>
<span class="linenr">21: </span>        }
<span class="linenr">22: </span>    }
<span class="linenr">23: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5fa065e" class="outline-3">
<h3 id="org5fa065e"><span class="section-number-3">13.4</span> Version-1: Navigation v.s. List v.s. NavigationLink</h3>
<div class="outline-text-3" id="text-13-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">navigation</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2020/9/27.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Book</span>: Identifiable {
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> books = [
<span class="linenr">18: </span>        <span style="color: #c678dd;">Book</span>(title:<span style="color: #98be65;">"X&#30340;&#24754;&#21127;"</span>, author: <span style="color: #98be65;">"&#33406;&#21202;&#37324;&#65294;&#26118;&#24681;"</span>),
<span class="linenr">19: </span>        <span style="color: #c678dd;">Book</span>(title:<span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>),
<span class="linenr">20: </span>        <span style="color: #c678dd;">Book</span>(title:<span style="color: #98be65;">"&#26481;&#26041;&#21015;&#36554;&#35584;&#27578;&#26696;"</span>, author: <span style="color: #98be65;">"&#38463;&#22025;&#33678;&#8231;&#20811;&#33673;&#32114;&#33922;"</span>),
<span class="linenr">21: </span>        <span style="color: #c678dd;">Book</span>(title:<span style="color: #98be65;">"&#20843;&#30334;&#33836;&#31278;&#27515;&#27861;"</span>, author: <span style="color: #98be65;">"&#21214;&#20523;&#26031;.&#21340;&#27931;&#20811;"</span>),
<span class="linenr">22: </span>        <span style="color: #c678dd;">Book</span>(title:<span style="color: #98be65;">"&#34880;&#23383;&#30740;&#31350;"</span>, author: <span style="color: #98be65;">"&#26607;&#21335;&#36947;&#29246;"</span>)
<span class="linenr">23: </span>    ]
<span class="linenr">24: </span>
<span class="linenr">25: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">26: </span>        NavigationView {
<span class="linenr">27: </span>            <span style="color: #c678dd;">List</span>(books) { book <span style="color: #51afef;">in</span>
<span class="linenr">28: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">DetailView</span>(book: book) ){
<span class="linenr">29: </span>                        <span style="color: #c678dd;">bookRow</span>(book: book)
<span class="linenr">30: </span>                    }
<span class="linenr">31: </span>                }
<span class="linenr">32: </span>            .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"&#26360;&#21934;"</span>)
<span class="linenr">33: </span>        }
<span class="linenr">34: </span>    }
<span class="linenr">35: </span>}
<span class="linenr">36: </span>
<span class="linenr">37: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bookRow</span>: View {
<span class="linenr">38: </span>    <span style="color: #51afef;">var</span> book: Book
<span class="linenr">39: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">40: </span>        VStack {
<span class="linenr">41: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">42: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">43: </span>        }
<span class="linenr">44: </span>    }
<span class="linenr">45: </span>}
<span class="linenr">46: </span>
<span class="linenr">47: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">DetailView</span>: View {
<span class="linenr">48: </span>    <span style="color: #51afef;">var</span> book: Book
<span class="linenr">49: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">50: </span>        VStack {
<span class="linenr">51: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">52: </span>        }
<span class="linenr">53: </span>    }
<span class="linenr">54: </span>}
<span class="linenr">55: </span>
<span class="linenr">56: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">57: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">58: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">59: </span>    }
<span class="linenr">60: </span>}
<span class="linenr">61: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf28758a" class="outline-3">
<h3 id="orgf28758a"><span class="section-number-3">13.5</span> Version-2:</h3>
<div class="outline-text-3" id="text-13-5">
<p>
å°‡è¨˜éŒ„æ¶æ§‹(Book.swift)ã€List(ContentView.swift)ä»¥åŠ Detail(DetailView.swift)å„è‡ªä»¥ç¨ç«‹æª”æ¡ˆè¨­è¨ˆã€‚<br />
</p>
</div>
<div id="outline-container-org3373870" class="outline-4">
<h4 id="org3373870"><span class="section-number-4">13.5.1</span> Book.swift</h4>
<div class="outline-text-4" id="text-13-5-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#19981;&#28041;&#21450;&#20351;&#29992;&#32773;&#30028;&#38754;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#24314;&#31435;&#19968;&#20491;&#26360;&#31821;&#30340;&#22522;&#26412;&#32080;&#27083;</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21152;&#19978;Identifiable&#20197;&#21450;UUID()&#26159;&#28858;&#20102;&#21487;&#20197;&#23559;&#26360;&#31821;&#36879;&#36942;List&#20358;&#21576;&#29694;</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Book</span>: Identifiable {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>() <span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#29986;&#29983;&#19968;&#20491;&#21807;&#19968;(unique)&#30340;&#20098;&#25976;</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> image: <span style="color: #c678dd;">String</span>
<span class="linenr">13: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org0920243" class="outline-4">
<h4 id="org0920243"><span class="section-number-4">13.5.2</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-13-5-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#22312;&#36889;&#35041;&#33256;&#29983;&#29986;&#29983;&#19968;&#20491;Book&#38499;&#21015;&#65292;&#28982;&#24460;&#22312;List&#31168;&#20986;&#20358;</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> books = [
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b1"</span>),
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#33267;&#27515;&#26041;&#20241;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b2"</span>),
<span class="linenr"> 8: </span>        <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#19968;&#35320;&#21363;&#30332;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b3"</span>),
<span class="linenr"> 9: </span>        <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#32034;&#21629;&#35370;&#23458;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b4"</span>)
<span class="linenr">10: </span>    ]
<span class="linenr">11: </span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">List</span>(books) { book <span style="color: #51afef;">in</span>
<span class="linenr">15: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">DetailView</span>(thisbook: book)) {
<span class="linenr">16: </span>                    <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">17: </span>                        <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">18: </span>                            .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr">19: </span>                        <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">20: </span>                            .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">subheadline</span>)
<span class="linenr">21: </span>                    }
<span class="linenr">22: </span>                .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"&#25105;&#30340;&#26360;&#21934;"</span>)
<span class="linenr">23: </span>                }
<span class="linenr">24: </span>            }
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">30: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">31: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>}
</pre>
</div>

<div id="orgb6dc981" class="figure">
<p><img src="images/Navi-List-1.png" alt="Navi-List-1.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 23: </span>ä¸»é¸å–®</p>
</div>
</div>
</div>
<div id="outline-container-orga061336" class="outline-4">
<h4 id="orga061336"><span class="section-number-4">13.5.3</span> DetailView.swift</h4>
<div class="outline-text-4" id="text-13-5-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">DetailView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#25105;&#24076;&#26395;&#31561;&#19968;&#19979;&#26377;&#20219;&#20309;&#20154;&#21628;&#21483;&#25105;&#65292;&#19968;&#23450;&#35201;&#20659;&#26360;&#26412;&#30340;&#36039;&#26009;&#32102;&#25105;</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> thisbook: Book
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        VStack {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Image</span>(thisbook.<span style="color: #dcaeea;">image</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">Text</span>(thisbook.<span style="color: #c678dd;">title</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Text</span>(thisbook.<span style="color: #c678dd;">author</span>)
<span class="linenr">11: </span>        }
<span class="linenr">12: </span>
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">DetailView_Previews</span>: PreviewProvider {
<span class="linenr">17: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">18: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#33256;&#26178;&#32102;&#20491;&#36039;&#26009;&#65292;&#35731;preview&#21487;&#20197;&#31168;&#20986;&#20358;&#23601;&#22909;</span>
<span class="linenr">19: </span>
<span class="linenr">20: </span>        <span style="color: #c678dd;">DetailView</span>(thisbook: <span style="color: #c678dd;">Book</span>(id: <span style="color: #c678dd;">UUID</span>(), title: <span style="color: #98be65;">"&#32034;&#21629;&#35370;&#23458;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, image: <span style="color: #98be65;">"b4"</span>))
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>}
</pre>
</div>

<div id="org16d2c9f" class="figure">
<p><img src="images/Navi-List-2.png" alt="Navi-List-2.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 24: </span>Detail</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-DynamicList" class="outline-2">
<h2 id="DynamicList"><span class="section-number-2">14</span> Dynamic List</h2>
<div class="outline-text-2" id="text-DynamicList">
</div>
<div id="outline-container-org83b9fb0" class="outline-3">
<h3 id="org83b9fb0"><span class="section-number-3">14.1</span> DataModel</h3>
<div class="outline-text-3" id="text-14-1">
<p>
æ¯ç­†è¨˜éŒ„çš„åŸºæœ¬æ¬„ä½<br />
</p>
</div>
<div id="outline-container-orgdada1cb" class="outline-4">
<h4 id="orgdada1cb"><span class="section-number-4">14.1.1</span> BookModel.swift (Model)</h4>
<div class="outline-text-4" id="text-14-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookModel</span>: Identifiable {
<span class="linenr">4: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
<span class="linenr">5: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">6: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">7: </span>}
<span class="linenr">8: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org235d85d" class="outline-3">
<h3 id="org235d85d"><span class="section-number-3">14.2</span> ViewModel</h3>
<div class="outline-text-3" id="text-14-2">
</div>
<div id="outline-container-orgb7b2673" class="outline-4">
<h4 id="orgb7b2673"><span class="section-number-4">14.2.1</span> Book.swift</h4>
<div class="outline-text-4" id="text-14-2-1">
<p>
è³‡æ–™ä¾†æº:æ‰€æœ‰æ›¸æœ¬çš„å…§å®¹ï¼Œå»ºç«‹ä¸€å€‹ ObservableObject çš„ classï¼Œä»¥@Published æ–¹å¼åˆ†äº«æ›¸ç±è¨˜éŒ„(list)<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Book</span>: <span style="color: #c678dd;">ObservableObject</span>{
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> list: [BookModel]
<span class="linenr"> 5: </span>    <span style="color: #51afef;">init</span>(){
<span class="linenr"> 6: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">list</span> = [
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"X&#30340;&#24754;&#21127;"</span>, author: <span style="color: #98be65;">"&#33406;&#21202;&#37324;&#65294;&#26118;&#24681;"</span>),
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>),
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#26481;&#26041;&#21015;&#36554;&#35584;&#27578;&#26696;"</span>, author: <span style="color: #98be65;">"&#38463;&#22025;&#33678;&#8231;&#20811;&#33673;&#32114;&#33922;"</span>),
<span class="linenr">10: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#20843;&#30334;&#33836;&#31278;&#27515;&#27861;"</span>, author: <span style="color: #98be65;">"&#21214;&#20523;&#26031;.&#21340;&#27931;&#20811;"</span>),
<span class="linenr">11: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#34880;&#23383;&#30740;&#31350;"</span>, author: <span style="color: #98be65;">"&#26607;&#21335;&#36947;&#29246;"</span>)
<span class="linenr">12: </span>        ]
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgaf09774" class="outline-3">
<h3 id="orgaf09774"><span class="section-number-3">14.3</span> ä¸»ç•«é¢</h3>
<div class="outline-text-3" id="text-14-3">
</div>
<div id="outline-container-orgf12854a" class="outline-4">
<h4 id="orgf12854a"><span class="section-number-4">14.3.1</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-14-3-1">
<p>
ä»¥@ObservedObject çš„æ–¹å¼è®€å– ViewModel è£¡åˆ†äº«çš„è¨˜éŒ„<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">Book</span>()
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewBook = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>(book.<span style="color: #dcaeea;">list</span>) { book <span style="color: #51afef;">in</span>
<span class="linenr"> 9: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Show Detail here..."</span>) ){
<span class="linenr">10: </span>                    <span style="color: #c678dd;">bookRow</span>(book: book)
<span class="linenr">11: </span>                }
<span class="linenr">12: </span>            }
<span class="linenr">13: </span>            .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"New"</span>){
<span class="linenr">14: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewBook</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr">15: </span>            }.<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showNewBook, content: {
<span class="linenr">16: </span>                <span style="color: #c678dd;">AddNewBook</span>(book: book, showThisView: $showNewBook, title: <span style="color: #98be65;">""</span>, author: <span style="color: #98be65;">""</span>)
<span class="linenr">17: </span>            }))
<span class="linenr">18: </span>        }
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bookRow</span>: View {
<span class="linenr">24: </span>    <span style="color: #51afef;">var</span> book: BookModel
<span class="linenr">25: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">26: </span>        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">27: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">28: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">29: </span>        }
<span class="linenr">30: </span>    }
<span class="linenr">31: </span>}
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">34: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">35: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">36: </span>    }
<span class="linenr">37: </span>}
<span class="linenr">38: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org08cc9c8" class="outline-3">
<h3 id="org08cc9c8"><span class="section-number-3">14.4</span> åŠ å…¥æ–°è¨˜éŒ„</h3>
<div class="outline-text-3" id="text-14-4">
</div>
<div id="outline-container-org2fa28be" class="outline-4">
<h4 id="org2fa28be"><span class="section-number-4">14.4.1</span> AddNewBook.swift</h4>
<div class="outline-text-4" id="text-14-4-1">
<p>
ä»¥@ObservedObject çš„æ–¹å¼æ–°å¢ ViewModel è£¡åˆ†äº«çš„è¨˜éŒ„<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">AddNewBook</span>: View {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">Book</span>()
<span class="linenr"> 6: </span>    <span style="color: #51afef;">@Binding</span> <span style="color: #51afef;">var</span> showThisView: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@State</span>  <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">@State</span>  <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">11: </span>        VStack {
<span class="linenr">12: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Adding New Book...."</span>)
<span class="linenr">13: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"&#26360;&#21517;"</span>, text: <span style="color: #51afef;">self</span>.$title)
<span class="linenr">14: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"&#20316;&#32773;"</span>, text: <span style="color: #51afef;">self</span>.$author)
<span class="linenr">15: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"Done"</span>) {
<span class="linenr">16: </span>                book.<span style="color: #dcaeea;">list</span>.<span style="color: #c678dd;">append</span>(<span style="color: #c678dd;">BookModel</span>(title: <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">title</span>, author: <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">author</span>))
<span class="linenr">17: </span>                showThisView.<span style="color: #c678dd;">toggle</span>()
<span class="linenr">18: </span>            }
<span class="linenr">19: </span>        }
<span class="linenr">20: </span>        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"TEST"</span>)
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>}
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">AddNewBook_Previews</span>: PreviewProvider {
<span class="linenr">25: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">26: </span>        <span style="color: #c678dd;">AddNewBook</span>(showThisView: .<span style="color: #c678dd;">constant</span>(<span style="color: #a9a1e1;">true</span>), title: <span style="color: #98be65;">""</span>, author: <span style="color: #98be65;">""</span>)
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
<span class="linenr">29: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org84b7bf2" class="outline-3">
<h3 id="org84b7bf2"><span class="section-number-3">14.5</span> åŠ å…¥æœå°‹åŠŸèƒ½</h3>
<div class="outline-text-3" id="text-14-5">
<p>
ç‚º List åŠ å…¥åŸºæœ¬çš„æœå°‹(éæ¿¾)åŠŸèƒ½ååˆ†å®¹æ˜“ï¼Œæœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯åœ¨ List ä¸Šæ–¹åŠ å…¥ä¸€å€‹ TextFieldï¼Œå®£å‘Šä¸€å€‹@State è®Šæ•¸ Bind åˆ°é€™å€‹ TextFieldï¼Œç„¶å¾Œä»¥é€™å€‹è®Šæ•¸åšç‚º List çš„æœå°‹æ¢ä»¶ã€‚æ¥ä¸‹ä¾†å°±åœ¨ list å¾ŒåŠ å…¥ filterï¼Œé€™è£¡ç”¨åˆ°çš„ filter èªæ³•ç‚º:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>book.<span style="color: #dcaeea;">list</span>.<span style="color: #c678dd;">filter</span> ({ <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">filterKey</span>.<span style="color: #c678dd;">isEmpty</span> ? <span style="color: #a9a1e1;">true</span> : $0.<span style="color: #c678dd;">title</span>.<span style="color: #c678dd;">contains</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">filterKey</span>.<span style="color: #c678dd;">lowercased</span>())})
</pre>
</div>
<p>
è£¡é¢çš„ A ? B : C æ„æ€æ˜¯ï¼Œå¦‚æœæ¢ä»¶ A æˆç«‹ï¼Œå°±å‚³å› Bï¼Œå¦å‰‡å°±å‚³å› Cï¼Œå³ï¼Œå¦‚æœ TextField è£¡æ²’æœ‰æœå°‹å€¼ï¼Œå‰‡ filterKey.isEmpty æœƒæˆç«‹ï¼Œå°±ä¸é€²è¡Œéæ¿¾(å‚³å› true)ï¼Œå¦å‰‡å°±å‚³å›é‚£äº›æ›¸ååŒ…å« filterKey çš„è¨˜éŒ„($0.title.contains(self.filterKey.lowercased())ï¼Œå¦ï¼Œç‚ºé¿å…å¤§å°å¯«å•é¡Œï¼Œä¸€å¾‹è½‰ç‚ºå°å¯«<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#24314;&#31435;&#19968;&#20491;BookClass&#39006;&#21029;&#30340;&#29289;&#20214;&#65292;&#21483;&#20570;book</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">BookClass</span>()
<span class="linenr"> 6: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewbookView = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> filterKey = <span style="color: #98be65;">""</span> <span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#20786;&#23384;&#25628;&#23563;&#20839;&#23481;</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 9: </span>        VStack {
<span class="linenr">10: </span>            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#36889;&#35041;&#36664;&#20837;&#35201;&#25628;&#23563;&#30340;&#38364;&#37749;&#23383;</span>
<span class="linenr">11: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"&#35531;&#36664;&#20837;&#25628;&#23563;&#20839;&#23481;"</span>, text: $filterKey)
<span class="linenr">12: </span>            NavigationView {
<span class="linenr">13: </span>                <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#36879;&#36942;&#23565;list&#36914;&#34892;&#21363;&#26178;filter&#20358;&#36942;&#28670;list&#30340;&#39023;&#31034;&#32080;&#26524;</span>
<span class="linenr">14: </span>                <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#22914;&#26524;filterKey&#27794;&#26377;&#20540;&#65292;&#23601;&#23559;filter&#26781;&#20214;&#35373;&#28858;true(&#19981;&#36942;&#28670;)</span>
<span class="linenr">15: </span>                <span style="color: #c678dd;">List</span>(book.<span style="color: #dcaeea;">list</span>.<span style="color: #c678dd;">filter</span> ({ <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">filterKey</span>.<span style="color: #c678dd;">isEmpty</span> ? <span style="color: #a9a1e1;">true</span> : $0.<span style="color: #c678dd;">title</span>.<span style="color: #c678dd;">contains</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">filterKey</span>.<span style="color: #c678dd;">lowercased</span>())})) { book <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>                    <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">DetailView</span>(thisbook: book)) {
<span class="linenr">17: </span>                        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) { <span style="color: #5B6268;">//</span><span style="color: #5B6268;">cell&#26684;&#23376;</span>
<span class="linenr">18: </span>                            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">19: </span>                                .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">title</span>)
<span class="linenr">20: </span>                            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">21: </span>                                .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">subheadline</span>)
<span class="linenr">22: </span>                        }
<span class="linenr">23: </span>                        .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"&#25105;&#30340;&#26360;&#21934;"</span>)
<span class="linenr">24: </span>                    }
<span class="linenr">25: </span>                }
<span class="linenr">26: </span>
<span class="linenr">27: </span>            }
<span class="linenr">28: </span>        }
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">32: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">33: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">34: </span>    }
<span class="linenr">35: </span>}
<span class="linenr">36: </span>
</pre>
</div>

<div id="orge87b562" class="figure">
<p><img src="images/FilteredList.gif" alt="FilteredList.gif" width="300" /><br />
</p>
<p><span class="figure-number">Figure 25: </span>æœå°‹åŠŸèƒ½</p>
</div>
</div>
</div>
</div>
<div id="outline-container-ObservedObject" class="outline-2">
<h2 id="ObservedObject"><span class="section-number-2">15</span> Passing data between Views #2: @ObservedObject</h2>
<div class="outline-text-2" id="text-ObservedObject">
</div>
<div id="outline-container-org04820d8" class="outline-3">
<h3 id="org04820d8"><span class="section-number-3">15.1</span> ObservedObject ç¯„ä¾‹</h3>
<div class="outline-text-3" id="text-15-1">
<p>
å‰ç¯€çš„ Book.swift ä¸­ä½¿ç”¨@Published å°‡æ›¸ç±è³‡æ–™è¨­å®šç‚ºå¯ä»¥å…¶ä»– View å…±äº«ï¼Œèˆ‡@State, @Binding ç›¸åŒï¼Œ@Published ç‚ºä¸€ç¨® Property wrapper(å±¬æ€§åŒ…è£å™¨)ã€‚SwiftUI ä¸­å¹¾å€‹å¸¸è¦‹çš„ @ é–‹é ­ä¿®é£¾ï¼Œå¦‚ @Stateï¼Œ@Bindingï¼Œ@Environmentï¼Œ@EnvironmentObject ç­‰éƒ½æ˜¯é‹ç”¨äº† Property Wrappers é€™å€‹ç‰¹æ€§ã€‚<br />
</p>

<p>
ç•¶ä½ ä»¥ @State ä¾†æ¨™è¨»ä¸€å€‹å±¬æ€§æ™‚ï¼ŒSwiftUI æœƒè‡ªå‹•å„²å­˜å®ƒåœ¨ä½ çš„æ‡‰ç”¨ç¨‹å¼çš„æŸè™•ã€‚é‚„æœ‰ï¼Œä½¿ç”¨é€™äº›å±¬æ€§çš„è¦–åœ–æœƒè‡ªå‹•ç›£è½å±¬æ€§å€¼çš„è®Šæ›´ã€‚åœ¨ç‹€æ…‹æ”¹è®Šæ™‚ï¼ŒSwiftUI æœƒé‡æ–°è¨ˆç®—é‚£äº›è¦–åœ–ä¸¦æ›´æ–°æ‡‰ç”¨ç¨‹å¼çš„å¤–è§€ã€‚<br />
</p>

<p>
@Published å¯ä»¥è®“æˆ‘å€‘å»ºç«‹ observable object(å¦‚å‰ç¯€ Book.swift çš„ list)<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Book</span>: <span style="color: #c678dd;">ObservableObject</span>{
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> list: [BookModel]
<span class="linenr"> 5: </span>    <span style="color: #51afef;">init</span>(){
<span class="linenr"> 6: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">list</span> = [
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"X&#30340;&#24754;&#21127;"</span>, author: <span style="color: #98be65;">"&#33406;&#21202;&#37324;&#65294;&#26118;&#24681;"</span>),
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>),
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#26481;&#26041;&#21015;&#36554;&#35584;&#27578;&#26696;"</span>, author: <span style="color: #98be65;">"&#38463;&#22025;&#33678;&#8231;&#20811;&#33673;&#32114;&#33922;"</span>),
<span class="linenr">10: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#20843;&#30334;&#33836;&#31278;&#27515;&#27861;"</span>, author: <span style="color: #98be65;">"&#21214;&#20523;&#26031;.&#21340;&#27931;&#20811;"</span>),
<span class="linenr">11: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#34880;&#23383;&#30740;&#31350;"</span>, author: <span style="color: #98be65;">"&#26607;&#21335;&#36947;&#29246;"</span>)
<span class="linenr">12: </span>        ]
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>
<p>
è¢«å®£å‘Šç‚º@Published è®Šæ•¸ï¼ŒSwiftUI æœƒè‡ªå‹•ç›£æ§ listï¼Œä¸€æ—¦å…¶å…§å®¹æœ‰æ‰€è®Šæ›´ï¼Œå‰‡æ‰€æœ‰å¼•ç”¨åˆ°é€™å€‹ object çš„ View éƒ½æœƒæ¥æ”¶åˆ°é€šçŸ¥ï¼Œç„¶å¾Œé‡æ–°è¼‰å…¥åšå¿…è¦çš„è®Šæ›´ã€‚è‡³æ­¤ï¼Œæˆ‘å€‘åªåšå¥½äº†è³‡æ–™ä¾†æºç«¯çš„è¨­å®šï¼Œé‚£éº¼ï¼Œè¦ä½¿ç”¨é€™äº›å…±äº«è®Šæ•¸çš„ View è¦å¦‚ä½•åšå‘¢ï¼Ÿå¯ä»¥å…ˆçœ‹ä¸€ä¸‹å‰ç¯€çš„ ContentView.swift æˆ– AddNewBook.swiftï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">Book</span>()
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewBook = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>(book.<span style="color: #dcaeea;">list</span>) { book <span style="color: #51afef;">in</span>
<span class="linenr"> 9: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Show Detail here..."</span>) ){
<span class="linenr">10: </span>                    <span style="color: #c678dd;">bookRow</span>(book: book)
<span class="linenr">11: </span>                }
<span class="linenr">12: </span>            }
<span class="linenr">13: </span>            .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"New"</span>){
<span class="linenr">14: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewBook</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr">15: </span>            }.<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showNewBook, content: {
<span class="linenr">16: </span>                <span style="color: #c678dd;">AddNewBook</span>(book: book, showThisView: $showNewBook, title: <span style="color: #98be65;">""</span>, author: <span style="color: #98be65;">""</span>)
<span class="linenr">17: </span>            }))
<span class="linenr">18: </span>        }
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span><span style="color: #5B6268;">///</span><span style="color: #5B6268;">... &#19979;&#30053;</span>
</pre>
</div>

<p>
ä¸åŒæ–¼@Stateï¼Œåœ¨ ContentView ä»¥åŠ AddNewBook.swift ä¸­ï¼Œæˆ‘å€‘ä»¥@ObservedObject å»ºç«‹å¤–éƒ¨åƒè€ƒå‹æ…‹(external reference type)çš„è®Šæ•¸(å³ä¹‹å‰ä»¥@Published å®£å‘Šçš„è®Šæ•¸)ï¼Œæ‰€æœ‰ä»¥@ObservedObject åŒ…è£çš„è®Šæ•¸éƒ½å¿…é ˆ conform @ObservableObject protocol(å³ class Book)ï¼Œé€éæ­¤äºŒè€…çš„é€£çµï¼Œæˆ‘å€‘å°±èƒ½è¼•æ˜“çš„åœ¨ä¸åŒçš„ View é–“å…±äº«æˆ–ç·¨è¼¯è®Šæ•¸(å¦‚æœ¬ä¾‹ä¸­çš„ book)<br />
</p>
</div>
</div>
<div id="outline-container-orgf9f487c" class="outline-3">
<h3 id="orgf9f487c"><span class="section-number-3">15.2</span> ObservedObject ç‰¹æ€§</h3>
<div class="outline-text-3" id="text-15-2">
<ul class="org-ul">
<li>Can be shared across views<br /></li>
<li>More complex properties (e.g custom type)<br /></li>
<li>External reference type that has to be managed (Create an instance of the class, create its own properties, &#x2026;)<br /></li>
<li>Class should confrom to <b>ObservableObject</b><br /></li>
<li><b>@Published</b> property wrapper used to mark properties that should force a view to refresh<br /></li>
<li>The wrappedValue is: anything that implements the OvservableObject protocol (ViewModels basicly).<br /></li>
<li>What is does: invalidates the View when wrappedValue does objectWillChange.send().<br /></li>
<li>Projected value (i.e. %): a Binding (to the vars of the wrappedValue (a ViewModel)). You can bind a variable in your View to the variable in your ViewModel with @ObservedObject.<br /></li>
<li>@ObservedObject çš„ç”¨è™•å’Œ @State éå¸¸ç›¸ä¼¼ï¼Œå¾åå­—çœ‹ä¾†å®ƒæ˜¯ä¾†ä¿®é£¾ä¸€å€‹å°è±¡çš„ï¼Œé€™å€‹å°è±¡å¯ä»¥çµ¦å¤šå€‹ç¨ç«‹çš„ View ä½¿ç”¨ã€‚å¦‚æœä½ ç”¨ @ObservedObject ä¾†ä¿®é£¾ä¸€å€‹å°è±¡ï¼Œé‚£éº¼é‚£å€‹å°è±¡å¿…é ˆè¦å¯¦ç¾ ObservableObject å”è­°ï¼Œç„¶å¾Œç”¨ @Published ä¿®é£¾å°è±¡è£¡å±¬æ€§ï¼Œè¡¨ç¤ºé€™å€‹å±¬æ€§æ˜¯éœ€è¦è¢« SwiftUI ç›£è½çš„ã€‚<sup><a id="fnr.6.100" class="footref" href="#fn.6">6</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org1fc0108" class="outline-3">
<h3 id="org1fc0108"><span class="section-number-3">15.3</span> @ObservedObject v.s. @ObjectBinding</h3>
<div class="outline-text-3" id="text-15-3">
<p>
å¦ä¸€ç¨®èˆ‡@ObservedObject æœ‰é»ç›¸ä¼¼çš„ wrapper ç‚º@ObjectBindingï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œä½¿ç”¨@ObservedObject çš„ object å¿…é ˆè¦æœ‰@Published wrapperï¼›è€Œä½¿ç”¨@ObjectBinding å‰‡è¦è‡ªå·²åŠ ä¸Š didChangeã€‚@ObjectBindin çš„ç¯„ä¾‹å¦‚ä¸‹:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">User</span>:BindableObject {
<span class="linenr"> 4: </span>   <span style="color: #51afef;">var</span> didChange = PassthroughSubject&lt;<span style="color: #c678dd;">Void</span>,<span style="color: #c678dd;">Never</span>&gt;()
<span class="linenr"> 5: </span>   <span style="color: #51afef;">var</span> username = <span style="color: #98be65;">"Saravana"</span> { <span style="color: #51afef;">didSet</span> { didChange.<span style="color: #c678dd;">send</span>() } }
<span class="linenr"> 6: </span>   <span style="color: #51afef;">var</span> password = <span style="color: #98be65;">"iuwerosdkj3298"</span> { <span style="color: #51afef;">didSet</span> { didChange.<span style="color: #c678dd;">send</span>() } }
<span class="linenr"> 7: </span>   <span style="color: #51afef;">var</span> email = <span style="color: #98be65;">"saravkumar.g@gmail.com"</span> { <span style="color: #51afef;">didSet</span> { didChange.<span style="color: #c678dd;">send</span>() } }
<span class="linenr"> 8: </span>}
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>:View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObjectBinding</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">14: </span>      VStack {
<span class="linenr">15: </span>        <span style="color: #c678dd;">TextField</span>($user.<span style="color: #dcaeea;">username</span>)
<span class="linenr">16: </span>        <span style="color: #c678dd;">TextField</span>($user.<span style="color: #c678dd;">password</span>)
<span class="linenr">17: </span>        <span style="color: #c678dd;">TextField</span>($user.<span style="color: #dcaeea;">email</span>)
<span class="linenr">18: </span>      }
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-EnvironmentObject" class="outline-2">
<h2 id="EnvironmentObject"><span class="section-number-2">16</span> Passing data between Views #3: @EnvironmentObject</h2>
<div class="outline-text-2" id="text-EnvironmentObject">
<p>
é©ç”¨æ™‚æ©Ÿ: SwiftUIâ€™s @EnvironmentObject property wrapper allows us to create views that rely on shared data, often across an entire SwiftUI app. For example, if you create a user that will be shared across many parts of your app, you should use @EnvironmentObject<sup><a id="fnr.14" class="footref" href="#fn.14">14</a></sup>. å…¶ç›¸é—œç‰¹æ€§å¦‚ä¸‹:<br />
</p>
<ul class="org-ul">
<li>Similar to @ObservedObject<br /></li>
<li>Possibility to make it available to all views through the application itself<br /></li>
<li>If one view changes the model all views update<br /></li>
</ul>
</div>
<div id="outline-container-org6f220e9" class="outline-3">
<h3 id="org6f220e9"><span class="section-number-3">16.1</span> @EnvironmentObject èˆ‡@ObservedObject çš„ç•°åŒ</h3>
<div class="outline-text-3" id="text-16-1">
</div>
<div id="outline-container-org9ec4c99" class="outline-4">
<h4 id="org9ec4c99"><span class="section-number-4">16.1.1</span> ç›¸åŒ</h4>
<div class="outline-text-4" id="text-16-1-1">
<p>
@EnvironmentObject has a lot in common with @ObservedObject<br />
</p>
<ul class="org-ul">
<li>both must refer to a class that conforms to ObservableObject<br /></li>
<li>both can be shared across many views,<br /></li>
<li>and both will update any views that are watching when significant changes happen.<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgf9ec651" class="outline-4">
<h4 id="orgf9ec651"><span class="section-number-4">16.1.2</span> å·®ç•°</h4>
<div class="outline-text-4" id="text-16-1-2">
<ul class="org-ul">
<li>However, @EnvironmentObject specifically means â€œthis object will be provided from some outside entity, rather than being created by the current view or specifically passed in.<sup><a id="fnr.14.100" class="footref" href="#fn.14">14</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org4ef2742" class="outline-4">
<h4 id="org4ef2742"><span class="section-number-4">16.1.3</span> ç¯„ä¾‹</h4>
<div class="outline-text-4" id="text-16-1-3">
<p>
ä»¥å¦‚ä¸‹ app ç‚ºä¾‹ï¼Œè‹¥ View A è£¡æœ‰æŸäº› data è¦åœ¨æœªä¾†èˆ‡ View E å…±ç”¨ï¼Œè‹¥æ˜¯ä½¿ç”¨@ObservedObject ä¾†é€²è¡Œåˆ†äº«ï¼Œå‰‡ View A è¦ä¾åºå°‡é€™äº› data å‚³çµ¦ View Bã€View Cã€View Dï¼Œæœ€å¾Œå†å‚³åˆ° View E è£¡ã€‚<br />
ç„¶è€Œï¼Œè‹¥ä½¿ç”¨@EnvironmentObject çš„æ©Ÿåˆ¶ä¾†é€²è¡Œåˆ†äº« dataï¼Œå‰‡å¯ä»¥åœ¨ View A ä¸­å°‡é€™äº›è¦åˆ†äº«çš„ data ç½®æ–¼ Swift environment ä¸­ï¼Œæ‰€æœ‰è™•æ–¼åŒä¸€ environment ä¸­çš„æ‰€æœ‰ View éƒ½èƒ½èˆ‡ä¹‹å…±äº«ï¼Œè€Œä¸ç”¨ä¾æ¬¡å‚³éã€‚<br />
</p>

<div id="org88ee2cb" class="figure">
<p><img src="images/environmentObject.png" alt="environmentObject.png" width="500" /><br />
</p>
<p><span class="figure-number">Figure 26: </span>@Environment é©ç”¨ç‹€æ³</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc79dbe6" class="outline-3">
<h3 id="orgc79dbe6"><span class="section-number-3">16.2</span> EnvironmentObject è¨­å®šæ–¹å¼</h3>
<div class="outline-text-3" id="text-16-2">
</div>
<div id="outline-container-org9097686" class="outline-4">
<h4 id="org9097686"><span class="section-number-4">16.2.1</span> å»ºç«‹ EnvironmentObject class</h4>
<div class="outline-text-4" id="text-16-2-1">
<p>
UserSettings.swift (ObservableObject)<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">UserSettings</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">4: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> name = <span style="color: #98be65;">""</span>
<span class="linenr">5: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">use this ObservableObject as an environment object</span>
<span class="linenr">6: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc9eb4b4" class="outline-4">
<h4 id="orgc9eb4b4"><span class="section-number-4">16.2.2</span> è¨­å®š app ç’°å¢ƒ</h4>
<div class="outline-text-4" id="text-16-2-2">
</div>
<div id="outline-container-org70e9674" class="outline-5">
<h5 id="org70e9674"><span class="section-number-5">16.2.2.1</span> Xcode 11.X: SceneDeleate.swift</h5>
<div class="outline-text-5" id="text-16-2-2-1">
<p>
åŠ å…¥è®Šæ•¸å®£å‘Š(x)åŠ environmentObject(x)<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">....</span>
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">var</span> settings: <span style="color: #c678dd;">UserSettings</span>()
<span class="linenr">4: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">scene</span>(.......) {
<span class="linenr">5: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">....</span>
<span class="linenr">6: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">let tabbedView = TabbedView()</span>
<span class="linenr">7: </span>    <span style="color: #51afef;">let</span> contentView = <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">8: </span>}
<span class="linenr">9: </span><span style="color: #5B6268;">//</span><span style="color: #5B6268;">....</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org682983e" class="outline-5">
<h5 id="org682983e"><span class="section-number-5">16.2.2.2</span> Xcode 12.X: xxxApp.swift</h5>
<div class="outline-text-5" id="text-16-2-2-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">@main</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bindingApp</span>: App {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> settings: <span style="color: #c678dd;">UserSettings</span>()
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> Scene {
<span class="linenr"> 7: </span>        WindowGroup {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">ContentView</span>().<span style="color: #c678dd;">environmentObject</span>(settings)
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org94a6e76" class="outline-4">
<h4 id="org94a6e76"><span class="section-number-4">16.2.3</span> è¨­å®š Client View</h4>
<div class="outline-text-4" id="text-16-2-3">
</div>
<div id="outline-container-orga4af86e" class="outline-5">
<h5 id="orga4af86e"><span class="section-number-5">16.2.3.1</span> Read</h5>
<div class="outline-text-5" id="text-16-2-3-1">
<p>
UserSettingsView.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">UserSettingsView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> settings: UserSettings
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        VStack {
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"My anme: \(</span>settings.<span style="color: #c678dd;">name</span><span style="color: #98be65;">)"</span>)
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">EditView</span>()
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orga17aea2" class="outline-5">
<h5 id="orga17aea2"><span class="section-number-5">16.2.3.2</span> Write</h5>
<div class="outline-text-5" id="text-16-2-3-2">
<p>
EditView.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">EditView</span>: View {
<span class="linenr">4: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> settings: UserSettings
<span class="linenr">5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> Veiw {
<span class="linenr">6: </span>        <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Type in your name:"</span>, text: $settings.<span style="color: #c678dd;">name</span>)
<span class="linenr">7: </span>    }
<span class="linenr">8: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbb6da67" class="outline-3">
<h3 id="orgbb6da67"><span class="section-number-3">16.3</span> ç¯„ä¾‹</h3>
<div class="outline-text-3" id="text-16-3">
<p>
å»ºç«‹ environment ç‰©ä»¶(ShoppingCart)ï¼Œç”±å„ View å…±äº«/ç·¨è¼¯å…§å®¹<br />
</p>
</div>
<div id="outline-container-org462eac4" class="outline-4">
<h4 id="org462eac4"><span class="section-number-4">16.3.1</span> ShoppingCart.swift</h4>
<div class="outline-text-4" id="text-16-3-1">
<p>
æƒ…å¢ƒèªªæ˜ï¼šåœ¨ app ä¸­å»ºç«‹ä¸€å€‹ ShoppingCart é¡åˆ¥ï¼Œä¸¦è®“é€™å€‹ class confirm ObservableObject protocolï¼Œæ–¼ class ä¸­å°‡è¦åœ¨å„ View ä¸­ share çš„ property ä»¥@Published æ¨™ç¤ºå‡ºä¾†ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ShoppingCart</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">4: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> Title = <span style="color: #98be65;">"item"</span>
<span class="linenr">5: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> items = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">6: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org2ac3443" class="outline-4">
<h4 id="org2ac3443"><span class="section-number-4">16.3.2</span> ç’°å¢ƒè¨­å®š SceneDelegate.swift / xxxApp.swift</h4>
<div class="outline-text-4" id="text-16-3-2">
<p>
ç’°å¢ƒè®Šæ•¸ç”± swift ç’°å¢ƒæä¾›ï¼Œæ•…åœ¨ SceneDelegate.swift æª”æ¡ˆä¸­å®£å‘Šè¦å…±äº«çš„è®Šæ•¸(ç¨‹å¼ç¬¬<a href="#coderef-decEnvObj" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-decEnvObj');" onmouseout="CodeHighlightOff(this, 'coderef-decEnvObj');">7</a>è¡Œ)ï¼Œä¸¦æ–¼ UIHostingController function ä¸­å°‡ä¹‹åŠ å…¥èµ·å§‹ View ä¸­ï¼Œå¦‚ä¸‹åˆ—ç¨‹å¼ç¬¬<a href="#coderef-attEnvObj" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-attEnvObj');" onmouseout="CodeHighlightOff(this, 'coderef-attEnvObj');">16</a>è¡Œã€‚<br />
</p>
</div>
<div id="outline-container-org83c22ff" class="outline-5">
<h5 id="org83c22ff"><span class="section-number-5">16.3.2.1</span> èˆŠç‰ˆ: SceneDelegate.swift</h5>
<div class="outline-text-5" id="text-16-3-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> UIKit
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">SceneDelegate</span>: UIResponder, UIWindowSceneDelegate {
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> window: UIWindow?
<span id="coderef-decEnvObj" class="coderef-off"><span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> cart = <span style="color: #c678dd;">ShoppingCart</span>()</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">scene</span>(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.<span style="color: #dcaeea;">ConnectionOptions</span>) {
<span class="linenr">10: </span>
<span class="linenr">11: </span>        <span style="color: #51afef;">let</span> contentView = <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">12: </span>
<span class="linenr">13: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use a UIHostingController as window root view controller.</span>
<span class="linenr">14: </span>        <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> windowScene = scene <span style="color: #51afef;">as</span>? UIWindowScene {
<span class="linenr">15: </span>            <span style="color: #51afef;">let</span> window = <span style="color: #c678dd;">UIWindow</span>(windowScene: windowScene)
<span id="coderef-attEnvObj" class="coderef-off"><span class="linenr">16: </span>            window.<span style="color: #dcaeea;">rootViewController</span> = <span style="color: #c678dd;">UIHostingController</span>(rootView: contentView.<span style="color: #c678dd;">environmentObject</span>(cart))</span>
<span class="linenr">17: </span>            <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">window</span> = window
<span class="linenr">18: </span>            window.<span style="color: #c678dd;">makeKeyAndVisible</span>()
<span class="linenr">19: </span>        }
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">....</span>
<span class="linenr">22: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org7cef180" class="outline-5">
<h5 id="org7cef180"><span class="section-number-5">16.3.2.2</span> æ–°ç‰ˆ: xxxApp.swift</h5>
<div class="outline-text-5" id="text-16-3-2-2">
<p>
åœ¨ WWDC20 ä¹‹å‰ï¼Œä½¿ç”¨ SwiftUI å»ºç«‹ View å¿…é ˆå°‡å…¶åŒ…è£åœ¨ UIHostingControllerï¼ŒController è¢«åŒ…è£åœ¨ä¸€å€‹ UIWindowï¼Œwindow åœ¨ SceneDelegate ä¸­å®šç¾©ã€‚åœ¨ WWDC20 ä¹‹å¾Œï¼Œä¸€å€‹æ–°çš„è§£æ±ºæ–¹æ¡ˆå‡ºç¾ï¼šAppã€‚<br />
</p>

<p>
åœ¨ä¹‹å‰æˆ‘å€‘ä½¿ç”¨ AppDelegate å’Œ SceneDelegate ä¾†ç®¡ç†ç”Ÿå‘½é€±æœŸï¼Œé€™æ¨£å¾ˆç¹ç‘£ã€‚å¦‚ä»Šä½¿ç”¨ App Name App.swift æ–‡ä»¶ä¾†ä»£æ›¿ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">@main</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bindingApp</span>: App {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> cart = <span style="color: #c678dd;">ShoppingCart</span>()
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> Scene {
<span class="linenr"> 7: </span>        WindowGroup {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">ContentView</span>().<span style="color: #c678dd;">environmentObject</span>(cart)
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbacb77d" class="outline-4">
<h4 id="orgbacb77d"><span class="section-number-4">16.3.3</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-16-3-3">
<p>
åœ¨æ¯ä¸€å€‹è¦ä½¿ç”¨åˆ°é€™å€‹ EnvironmentObject çš„ View ä¸­ä»¥@EnvironmentObject ä¾†å»ºç«‹è©² class çš„ instance(ç¬¬<a href="#coderef-environmentObject" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-environmentObject');" onmouseout="CodeHighlightOff(this, 'coderef-environmentObject');">6</a>è¡Œ)ï¼ŒåŒæ™‚ï¼Œåœ¨ previews ä¸­ä¹Ÿè¦åŠ å…¥ environmentObject()çš„ modifier(ç¬¬<a href="#coderef-emptyConstructor" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-emptyConstructor');" onmouseout="CodeHighlightOff(this, 'coderef-emptyConstructor');">26</a>è¡Œ)ï¼Œåœ¨éœ€ç”¨åˆ°ç’°å¢ƒè®Šæ•¸çš„ View(å¦‚ SecondView)è¢«å‘¼å«æ™‚åŠ å…¥ environmentObject(ç¬¬<a href="#coderef-envObj" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-envObj');" onmouseout="CodeHighlightOff(this, 'coderef-envObj');">17</a>è¡Œ)ã€‚<br />
</p>

<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> showCart: <span style="color: #c678dd;">Bool</span> = <span style="color: #a9a1e1;">false</span>
<span id="coderef-environmentObject" class="coderef-off"><span class="linenr"> 6: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> cart: ShoppingCart</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>        <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 9: </span>        VStack {
<span class="linenr">10: </span>            <span style="color: #c678dd;">Text</span>(cart.<span style="color: #dcaeea;">Title</span>)
<span class="linenr">11: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">12: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Item Name: \(</span><span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>.<span style="color: #dcaeea;">Title</span><span style="color: #98be65;">)"</span>)
<span class="linenr">13: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#30446;&#21069;&#25976;&#37327;\(</span><span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>.<span style="color: #dcaeea;">items</span><span style="color: #98be65;">)"</span>)
<span class="linenr">14: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#19979;&#21934;"</span>) {
<span class="linenr">15: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showCart</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr">16: </span>            }.<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showCart, content: {
<span id="coderef-envObj" class="coderef-off"><span class="linenr">17: </span>                <span style="color: #c678dd;">SecondView</span>().<span style="color: #c678dd;">environmentObject</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>)</span>
<span class="linenr">18: </span>            })
<span class="linenr">19: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">20: </span>        }
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>}
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">25: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span id="coderef-emptyConstructor" class="coderef-off"><span class="linenr">26: </span>        <span style="color: #c678dd;">ContentView</span>().<span style="color: #c678dd;">environmentObject</span>(<span style="color: #c678dd;">ShoppingCart</span>())</span>
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9ded6ea" class="outline-4">
<h4 id="org9ded6ea"><span class="section-number-4">16.3.4</span> SecondView</h4>
<div class="outline-text-4" id="text-16-3-4">
<p>
åŒæ¨£çš„ï¼Œåœ¨ SecondView ä¸­è¦ä½¿ç”¨åˆ° environment object ä¹Ÿè¦ä»¥@EnvironmentObject ä¾†å®£å‘Šåˆ©ç”¨è©² class æ‰€å»ºç«‹çš„ instance(ç¬¬<a href="#coderef-useEnv" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-useEnv');" onmouseout="CodeHighlightOff(this, 'coderef-useEnv');">4</a>è¡Œ)ï¼Œè€Œ SecondView çš„ preview ä¹Ÿè¦åŠ ä¸ŠåŒæ¨£çš„ modifier(å‚³å…¥åƒæ•¸)ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView</span>: View {
<span id="coderef-useEnv" class="coderef-off"><span class="linenr"> 4: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> cart: ShoppingCart</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        VStack {
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span><span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>.<span style="color: #dcaeea;">Title</span><span style="color: #98be65;">)"</span>)
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Item Name"</span>, text: <span style="color: #51afef;">self</span>.$cart.<span style="color: #dcaeea;">Title</span>)
<span class="linenr">10: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"amount: \(</span><span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>.<span style="color: #dcaeea;">items</span><span style="color: #98be65;">)"</span>)
<span class="linenr">11: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#21152;&#36092;"</span>) {
<span class="linenr">12: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">cart</span>.<span style="color: #dcaeea;">items</span> += <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr">13: </span>            }
<span class="linenr">14: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SecondView_Previews</span>: PreviewProvider {
<span class="linenr">20: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">21: </span>        <span style="color: #c678dd;">SecondView</span>().<span style="color: #c678dd;">environmentObject</span>(<span style="color: #c678dd;">ShoppingCart</span>())
<span class="linenr">22: </span>    }
<span class="linenr">23: </span>}
</pre>
</div>
<p>
é€™è£¡çš„ cart.items åœ¨è®Šæ›´å¾Œï¼ŒContentView çš„æ•¸é‡æœƒå³æ™‚æ›´æ–°ï¼ŒåŒæ¨£çš„ï¼ŒContentView ä¸­è¢«è®Šæ›´çš„ Title ä¹Ÿæœƒå³æ™‚åœ¨ SecondView ä¸­çœ‹å‡ºçµæœã€‚<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgd0abd73" class="outline-3">
<h3 id="orgd0abd73"><span class="section-number-3">16.4</span> Further Reading</h3>
<div class="outline-text-3" id="text-16-4">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=iH88uJcdzDM">SwiftUI Reactive Intro - Understanding State and Binding in SwiftUI in Xcode 11 (2019)</a><br /></li>
<li><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8%E7%8B%80%E6%85%8B%E8%A8%AD%E8%A8%88-swiftui-%E7%95%AB%E9%9D%A2-%E8%AA%8D%E8%AD%98-state-property-binding-27fea6885ead">ç”¨ç‹€æ…‹è¨­è¨ˆ SwiftUI ç•«é¢ â€” èªè­˜ @State propertyï¼Œbinding &amp; Toggle</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=stSB04C4iS4">SwiftUI Tutorial: What&rsquo;s the difference between @State, @ObjectBinding, and @EnvironmentObject?</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-UserDefaults" class="outline-2">
<h2 id="UserDefaults"><span class="section-number-2">17</span> UserDefaults</h2>
<div class="outline-text-2" id="text-UserDefaults">
</div>
<div id="outline-container-orgc5a5591" class="outline-3">
<h3 id="orgc5a5591"><span class="section-number-3">17.1</span> å¹¾ç¨®å¯ä»¥åœ¨ iOS app æ°¸ä¹…å„²å­˜è³‡æ–™çš„æ–¹å¼:</h3>
<div class="outline-text-3" id="text-17-1">
<ul class="org-ul">
<li>Filesystem: FileManager<br /></li>
<li>SQL database: CoreData(è‡ªå­¸)<br /></li>
<li>Cloud: ClodKit, Firebase(ä¸‹å­¸æœŸé€²åº¦)<br /></li>
<li>UserDefualts<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgfd311bd" class="outline-3">
<h3 id="orgfd311bd"><span class="section-number-3">17.2</span> UserDefautls</h3>
<div class="outline-text-3" id="text-17-2">
<p>
æˆ‘å€‘å¯ä»¥å°‡ UserDefaults è¦–ç‚º persistent dictionaryã€‚UserDefaults å¯ä»¥å„²å­˜ Property List é¡å‹çš„è³‡æ–™ã€‚Property List is not a protocol or a struct or anything tangible or Swift-like. It is any combination of String, Int, Bool, Floating point, Date, Array or Dictionary.<br />
</p>

<p>
A powerful way to do this is using the <b>Codable</b> protocol inf Swift. Codable converts structs into Data objects.<br />
</p>
</div>
</div>
<div id="outline-container-org276e156" class="outline-3">
<h3 id="org276e156"><span class="section-number-3">17.3</span> Using userDefaults</h3>
<div class="outline-text-3" id="text-17-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">let</span> defaults = <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>
</pre>
</div>
</div>
<div id="outline-container-org6b652d9" class="outline-4">
<h4 id="org6b652d9"><span class="section-number-4">17.3.1</span> Storing Data</h4>
<div class="outline-text-4" id="text-17-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>defaults.<span style="color: #51afef;">set</span>(object, forKey: <span style="color: #98be65;">"SomeKey"</span>)
<span class="linenr">2: </span>defautls.<span style="color: #c678dd;">setDouble</span>(<span style="color: #da8548; font-weight: bold;">37.5</span>, forKey: <span style="color: #98be65;">"MyDouble"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org84f7cd5" class="outline-4">
<h4 id="org84f7cd5"><span class="section-number-4">17.3.2</span> Retrieving Data</h4>
<div class="outline-text-4" id="text-17-3-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">let</span> i: <span style="color: #c678dd;">Int</span> = defaults.<span style="color: #c678dd;">integer</span>(forKey: <span style="color: #98be65;">"MyInt"</span>)
<span class="linenr">2: </span><span style="color: #51afef;">let</span> u: <span style="color: #c678dd;">URL</span>? = defaults.<span style="color: #c678dd;">url</span>(forKey: <span style="color: #98be65;">"MyURL"</span>)
<span class="linenr">3: </span><span style="color: #51afef;">let</span> strings: [<span style="color: #c678dd;">String</span>]? = defaults.<span style="color: #c678dd;">stringArray</span>(forKey: <span style="color: #98be65;">"MyString"</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org23d0cb0" class="outline-3">
<h3 id="org23d0cb0"><span class="section-number-3">17.4</span> Demo</h3>
<div class="outline-text-3" id="text-17-4">
</div>
<div id="outline-container-orgc89f361" class="outline-4">
<h4 id="orgc89f361"><span class="section-number-4">17.4.1</span> Create UserDefault.swift</h4>
<div class="outline-text-4" id="text-17-4-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">UserSettings</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> username: <span style="color: #c678dd;">String</span> {
<span class="linenr"> 6: </span>        <span style="color: #51afef;">didSet</span> {
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #51afef;">set</span>(username, forKey: <span style="color: #98be65;">"username"</span>)
<span class="linenr"> 8: </span>        }
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> isVIP: <span style="color: #c678dd;">Bool</span> {
<span class="linenr">11: </span>        <span style="color: #51afef;">didSet</span> {
<span class="linenr">12: </span>            <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #51afef;">set</span>(isVIP, forKey: <span style="color: #98be65;">"isAccountVIP"</span>)
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">16: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">username</span> = <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #c678dd;">object</span>(forKey: <span style="color: #98be65;">"username"</span>) <span style="color: #51afef;">as</span>? <span style="color: #c678dd;">String</span> ?? <span style="color: #98be65;">""</span>
<span class="linenr">17: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">isVIP</span> = <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #c678dd;">object</span>(forKey: <span style="color: #98be65;">"isAccountVIP"</span>) <span style="color: #51afef;">as</span>? <span style="color: #c678dd;">Bool</span> ?? <span style="color: #a9a1e1;">true</span>
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org4d28a29" class="outline-4">
<h4 id="org4d28a29"><span class="section-number-4">17.4.2</span> use userSetting in ContentView.swift</h4>
<div class="outline-text-4" id="text-17-4-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">settingsView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> userSettings = <span style="color: #c678dd;">UserSettings</span>()
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>        List {
<span class="linenr"> 7: </span>            HStack {
<span class="linenr"> 8: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Username"</span>)
<span class="linenr"> 9: </span>                <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Username"</span>, text:$userSettings.<span style="color: #dcaeea;">username</span>)
<span class="linenr">10: </span>                    .<span style="color: #c678dd;">textFieldStyle</span>(<span style="color: #c678dd;">RoundedBorderTextFieldStyle</span>())
<span class="linenr">11: </span>            }
<span class="linenr">12: </span>            <span style="color: #c678dd;">Toggle</span>(isOn: $userSettings.<span style="color: #dcaeea;">isVIP</span>) {
<span class="linenr">13: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"VIP Account"</span>)
<span class="linenr">14: </span>            }.<span style="color: #c678dd;">padding</span>()
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">20: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">21: </span>        NavigationView {
<span class="linenr">22: </span>            VStack {
<span class="linenr">23: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"BALABALA"</span>)
<span class="linenr">24: </span>                <span style="color: #c678dd;">NavigationLink</span>(<span style="color: #98be65;">"Settings"</span>, destination: <span style="color: #c678dd;">settingsView</span>())
<span class="linenr">25: </span>                <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">26: </span>            }.<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"&#20027;&#30059;&#38754;"</span>)
<span class="linenr">27: </span>            .<span style="color: #c678dd;">padding</span>()
<span class="linenr">28: </span>        }
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
</pre>
</div>

<div id="orgc151bc7" class="figure">
<p><img src="images/UserDefaults.jpg" alt="UserDefaults.jpg" width="500" /><br />
</p>
<p><span class="figure-number">Figure 27: </span>UserDefault for Settings</p>
</div>
</div>
</div>
<div id="outline-container-org25fd24f" class="outline-4">
<h4 id="org25fd24f"><span class="section-number-4">17.4.3</span> BookList: UserDefault v.s. @EnvironmentObject</h4>
<div class="outline-text-4" id="text-17-4-3">
</div>
<div id="outline-container-orgfe53c10" class="outline-5">
<h5 id="orgfe53c10"><span class="section-number-5">17.4.3.1</span> UserSettings.swift</h5>
<div class="outline-text-5" id="text-17-4-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">UserSettings.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">navigation</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2020/12/14.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">UserSettings</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> username: <span style="color: #c678dd;">String</span> {
<span class="linenr">13: </span>        <span style="color: #51afef;">didSet</span> {
<span class="linenr">14: </span>            <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #51afef;">set</span>(username, forKey: <span style="color: #98be65;">"username"</span>)
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> isVIP: <span style="color: #c678dd;">Bool</span> {
<span class="linenr">18: </span>        <span style="color: #51afef;">didSet</span> {
<span class="linenr">19: </span>            <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #51afef;">set</span>(isVIP, forKey: <span style="color: #98be65;">"isAccountVIP"</span>)
<span class="linenr">20: </span>        }
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">23: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">username</span> = <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #c678dd;">object</span>(forKey: <span style="color: #98be65;">"username"</span>) <span style="color: #51afef;">as</span>? <span style="color: #c678dd;">String</span> ?? <span style="color: #98be65;">""</span>
<span class="linenr">24: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">isVIP</span> = <span style="color: #c678dd;">UserDefaults</span>.<span style="color: #c678dd;">standard</span>.<span style="color: #c678dd;">object</span>(forKey: <span style="color: #98be65;">"isAccountVIP"</span>) <span style="color: #51afef;">as</span>? <span style="color: #c678dd;">Bool</span> ?? <span style="color: #a9a1e1;">true</span>
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
<span class="linenr">27: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge6ebc87" class="outline-5">
<h5 id="orge6ebc87"><span class="section-number-5">17.4.3.2</span> ContentView.swift</h5>
<div class="outline-text-5" id="text-17-4-3-2">
<p>
The way to arrange ore than one navigationBarItems.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">navigation</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2020/9/27.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">Book</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewBook = <span style="color: #a9a1e1;">false</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showSetting = <span style="color: #a9a1e1;">false</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> userSettings: UserSettings
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">16: </span>        NavigationView {
<span class="linenr">17: </span>            <span style="color: #c678dd;">List</span>(book.<span style="color: #dcaeea;">list</span>) { book <span style="color: #51afef;">in</span>
<span class="linenr">18: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">DetailView</span>(book: book) ){
<span class="linenr">19: </span>                    <span style="color: #c678dd;">bookRow</span>(book: book)
<span class="linenr">20: </span>                }
<span class="linenr">21: </span>            }
<span class="linenr">22: </span>            .<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"\(</span>userSettings.<span style="color: #dcaeea;">username</span><span style="color: #98be65;">)&#26360;&#21934;"</span>)
<span class="linenr">23: </span>            .<span style="color: #c678dd;">navigationBarItems</span>(trailing:
<span class="linenr">24: </span>                                    HStack {
<span class="linenr">25: </span>                                        <span style="color: #c678dd;">Button</span>(action: { <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewBook</span> = <span style="color: #a9a1e1;">true</span> }, label: {
<span class="linenr">26: </span>                                            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus"</span>)
<span class="linenr">27: </span>                                        }).<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showNewBook, content: {
<span class="linenr">28: </span>                                            <span style="color: #c678dd;">AddNewBook</span>(book: book, showThisView: $showNewBook, title: <span style="color: #98be65;">""</span>, author: <span style="color: #98be65;">""</span>)
<span class="linenr">29: </span>                                        })
<span class="linenr">30: </span>                                        <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">31: </span>                                                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showSetting</span> = <span style="color: #a9a1e1;">true</span> }, label: {
<span class="linenr">32: </span>                                                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"gearshape"</span>)
<span class="linenr">33: </span>                                                }).<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showSetting, content: {
<span class="linenr">34: </span>                                                    <span style="color: #c678dd;">settingView</span>(showThisView: <span style="color: #51afef;">self</span>.$showSetting)
<span class="linenr">35: </span>                                                })
<span class="linenr">36: </span>                                    })
<span class="linenr">37: </span>        }
<span class="linenr">38: </span>    }
<span class="linenr">39: </span>}
<span class="linenr">40: </span>
<span class="linenr">41: </span>
<span class="linenr">42: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bookRow</span>: View {
<span class="linenr">43: </span>    <span style="color: #51afef;">var</span> book: BookModel
<span class="linenr">44: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">45: </span>        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">46: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">47: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">48: </span>        }
<span class="linenr">49: </span>    }
<span class="linenr">50: </span>}
<span class="linenr">51: </span>
<span class="linenr">52: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">53: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">54: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">55: </span>    }
<span class="linenr">56: </span>}
<span class="linenr">57: </span>
</pre>
</div>

<div id="org4d7b753" class="figure">
<p><img src="images/UserDefault-1.png" alt="UserDefault-1.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 28: </span>UserDefault v.s. @Environment</p>
</div>
</div>
</div>
<div id="outline-container-org00aeb18" class="outline-5">
<h5 id="org00aeb18"><span class="section-number-5">17.4.3.3</span> settingView.swift</h5>
<div class="outline-text-5" id="text-17-4-3-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Setting.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">navigation</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2020/12/14.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">settingView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> userSettings: UserSettings
<span class="linenr">12: </span>    <span style="color: #51afef;">@Binding</span> <span style="color: #51afef;">var</span> showThisView: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">14: </span>        VStack {
<span class="linenr">15: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Setting"</span>).<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">largeTitle</span>)
<span class="linenr">16: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">17: </span>            List{
<span class="linenr">18: </span>                <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Username"</span>, text: $userSettings.<span style="color: #dcaeea;">username</span>)
<span class="linenr">19: </span>                <span style="color: #c678dd;">Toggle</span>(isOn: $userSettings.<span style="color: #dcaeea;">isVIP</span>, label: {
<span class="linenr">20: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"VIP"</span>)
<span class="linenr">21: </span>                })
<span class="linenr">22: </span>            }
<span class="linenr">23: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"DONE"</span>, action: {
<span class="linenr">24: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showThisView</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr">25: </span>            })
<span class="linenr">26: </span>        }
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
<span class="linenr">29: </span>
<span class="linenr">30: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Setting_Previews</span>: PreviewProvider {
<span class="linenr">31: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">32: </span>        <span style="color: #c678dd;">settingView</span>(showThisView: .<span style="color: #c678dd;">constant</span>(<span style="color: #a9a1e1;">true</span>))
<span class="linenr">33: </span>    }
<span class="linenr">34: </span>}
<span class="linenr">35: </span>
</pre>
</div>

<div id="orgf1b1f20" class="figure">
<p><img src="images/UserDefault-2.png" alt="UserDefault-2.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 29: </span>UserDefault v.s. @Environment</p>
</div>
</div>
</div>
<div id="outline-container-org8df77bf" class="outline-5">
<h5 id="org8df77bf"><span class="section-number-5">17.4.3.4</span> SceneDelegate.swift</h5>
<div class="outline-text-5" id="text-17-4-3-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span>
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> UIKit
<span class="linenr"> 3: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">SceneDelegate</span>: UIResponder, UIWindowSceneDelegate {
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> window: UIWindow?
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> userSetting = <span style="color: #c678dd;">UserSettings</span>()
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">scene</span>(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.<span style="color: #dcaeea;">ConnectionOptions</span>) {
<span class="linenr">11: </span>
<span class="linenr">12: </span>        <span style="color: #51afef;">let</span> contentView = <span style="color: #c678dd;">ContentView</span>().<span style="color: #c678dd;">environmentObject</span>(userSetting)
<span class="linenr">13: </span>
<span class="linenr">14: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Use a UIHostingController as window root view controller.</span>
<span class="linenr">15: </span>        <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> windowScene = scene <span style="color: #51afef;">as</span>? UIWindowScene {
<span class="linenr">16: </span>            <span style="color: #51afef;">let</span> window = <span style="color: #c678dd;">UIWindow</span>(windowScene: windowScene)
<span class="linenr">17: </span>            window.<span style="color: #dcaeea;">rootViewController</span> = <span style="color: #c678dd;">UIHostingController</span>(rootView: contentView)
<span class="linenr">18: </span>            <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">window</span> = window
<span class="linenr">19: </span>            window.<span style="color: #c678dd;">makeKeyAndVisible</span>()
<span class="linenr">20: </span>        }
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>      ......
<span class="linenr">23: </span>}
<span class="linenr">24: </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org8d3e662" class="outline-3">
<h3 id="org8d3e662"><span class="section-number-3">17.5</span> Reading Resources</h3>
<div class="outline-text-3" id="text-17-5">
<ul class="org-ul">
<li><a href="https://www.simpleswiftguide.com/how-to-use-userdefaults-in-swiftui/">How to use UserDefaults in SwiftUI</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-Wrappers" class="outline-2">
<h2 id="Wrappers"><span class="section-number-2">18</span> Passing data between Views #4: Property Wrappers</h2>
<div class="outline-text-2" id="text-Wrappers">
<p>
All of these @Something statements are property wrappers. A property wrapper is actually a struct. These structs encapsulate some &ldquo;template&rdquo; behavior applied to the vars they wrap.<br />
</p>

<p>
The property wrapper feature adds <b>&ldquo;syntactic sugar&rdquo;</b> to make these structs easy to create/use.&ldquo; <sup><a id="fnr.15" class="footref" href="#fn.15">15</a></sup><br />
</p>
</div>
<div id="outline-container-orgf148d99" class="outline-3">
<h3 id="orgf148d99"><span class="section-number-3">18.1</span> SwiftUI çš„ç‹€æ…‹ç®¡ç†</h3>
<div class="outline-text-3" id="text-18-1">
<p>
<a href="https://onevcat.com/2020/06/stateobject/">è³‡æ–™ä¾†æº:@StateObject å’Œ @ObservedObject çš„åŒºåˆ«å’Œä½¿ç”¨</a><br />
åœ¨ 2019 å¹´ SwiftUI å‰›å•ä¸–æ™‚ï¼Œé™¤å»å°ˆé–€ç”¨ä¾†ç®¡ç†æ‰‹å‹¢çš„@GestureState ä»¥å¤–ï¼Œæœ‰ä¸‰å€‹å¸¸ç”¨çš„å’Œç‹€æ…‹ç®¡ç†ç›¸é—œçš„ property wrapperï¼Œå®ƒå€‘åˆ†åˆ¥æ˜¯@Stateï¼Œ@ObservedObject å’Œ@EnvironmentObjectã€‚æ ¹æ“šè·è²¬å’Œä½œç”¨ç¯„åœä¸åŒï¼Œå®ƒå€‘å„è‡ªçš„é©ç”¨å ´æ™¯ä¹Ÿæœ‰å€åˆ¥<sup><a id="fnr.16" class="footref" href="#fn.16">16</a></sup>ã€‚ä¸€èˆ¬ä¾†èªªï¼š<br />
</p>
<ul class="org-ul">
<li>@State ç”¨æ–¼ View ä¸­çš„ç§æœ‰ç‹€æ…‹å€¼ï¼Œä¸€èˆ¬ä¾†èªªå®ƒæ‰€ä¿®é£¾çš„éƒ½æ‡‰è©²æ˜¯ struct å€¼ï¼Œä¸¦ä¸”ä¸æ‡‰è©²è¢«å…¶ä»–çš„ view çœ‹åˆ°ã€‚å®ƒä»£è¡¨äº† SwiftUI ä¸­ä½œç”¨ç¯„åœæœ€å°ï¼Œæœ¬èº«ä¹Ÿæœ€ç°¡å–®çš„ç‹€æ…‹ï¼Œæ¯”å¦‚ä¸€å€‹ Boolï¼Œä¸€å€‹ Int æˆ–è€…ä¸€å€‹ Stringã€‚ç°¡å–®èªªï¼Œå¦‚æœä¸€å€‹ç‹€æ…‹èƒ½å¤ è¢«æ¨™è¨˜ç‚º private ä¸¦ä¸”å®ƒæ˜¯å€¼é¡å‹ï¼Œé‚£éº¼@State æ˜¯é©åˆçš„ã€‚<br /></li>
<li>å°æ–¼æ›´è¤‡é›œçš„ä¸€çµ„ç‹€æ…‹ï¼Œæˆ‘å€‘å¯ä»¥å°‡å®ƒçµ„ç¹”åœ¨ä¸€å€‹ class ä¸­ï¼Œä¸¦è®“å…¶å¯¦ç¾ ObservableObject å”è­°ã€‚å°æ–¼é€™æ¨£çš„ class é¡å‹ï¼Œå…¶ä¸­è¢«æ¨™è¨˜ç‚º@Published çš„å±¬æ€§ï¼Œå°‡æœƒåœ¨è®Šæ›´æ™‚è‡ªå‹•ç™¼å‡ºäº‹ä»¶ï¼Œé€šçŸ¥å°å®ƒæœ‰ä¾è³´çš„ View é€²è¡Œæ›´æ–°ã€‚View ä¸­å¦‚æœéœ€è¦ä¾è³´é€™æ¨£çš„ ObservableObject å°è±¡ï¼Œåœ¨è²æ˜æ™‚å‰‡ä½¿ç”¨@ObservedObject ä¾†è¨‚é–±ã€‚<br /></li>
<li>@EnvironmentObject é‡å°é‚£äº›éœ€è¦å‚³éåˆ°æ·±å±¤æ¬¡çš„å­ View ä¸­çš„ ObservableObject å°è±¡ï¼Œæˆ‘å€‘å¯ä»¥åœ¨çˆ¶å±¤ç´šçš„ View ä¸Šç”¨.environmentObject ä¿®é£¾å™¨ä¾†å°‡å®ƒæ³¨å…¥åˆ°ç’°å¢ƒä¸­ï¼Œé€™æ¨£ä»»æ„å­ View éƒ½å¯ä»¥é€šé@EnvironmentObject ä¾†ç²å–å°æ‡‰çš„å°è±¡ã€‚<br /></li>
</ul>

<p>
é€™åŸºæœ¬å°±æ˜¯åˆç‰ˆ SwiftUI ç‹€æ…‹ç®¡ç†çš„å…¨éƒ¨äº†ã€‚çœ‹èµ·ä¾†å°æ–¼ç‹€æ…‹ç®¡ç†ï¼ŒSwiftUI çš„è¦†è“‹å·²ç¶“å¾ˆå…¨é¢äº†ï¼Œé‚£ç‚ºä»€éº¼è¦æ–°åŠ ä¸€å€‹@StateObjectproperty wrapper å‘¢ï¼Ÿ<br />
</p>
</div>
</div>
<div id="outline-container-org75b6260" class="outline-3">
<h3 id="org75b6260"><span class="section-number-3">18.2</span> @StateObject v.s. @ObservedObject</h3>
<div class="outline-text-3" id="text-18-2">
<p>
@ObservedObject ä¸ç®¡å­˜å„²ï¼Œæœƒéš¨è‘— View çš„å‰µå»ºè¢«å¤šæ¬¡å‰µå»ºã€‚è€Œ@StateObject ä¿è­‰å°åƒåªæœƒè¢«å‰µå»ºä¸€æ¬¡ã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯åœ¨ View è£¡è‡ªè¡Œå‰µå»ºçš„ ObservableObjectmodel å°è±¡ï¼Œå¤§æ¦‚ç‡ä¾†èªªä½¿ç”¨@StateObject æœƒæ˜¯æ›´æ­£ç¢ºçš„é¸æ“‡ã€‚@StateObject åŸºæœ¬ä¸Šä¾†èªªå°±æ˜¯ä¸€å€‹é‡å° class çš„@State å‡ç´šç‰ˆ<sup><a id="fnr.16.100" class="footref" href="#fn.16">16</a></sup><br />
</p>
</div>
<div id="outline-container-orgcf7c6e7" class="outline-4">
<h4 id="orgcf7c6e7"><span class="section-number-4">18.2.1</span> ç¨‹å¼ç¯„ä¾‹</h4>
<div class="outline-text-4" id="text-18-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> showRealName = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 4: </span>        VStack {
<span class="linenr"> 5: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#23416;&#34399;/&#22995;&#21517;"</span>) {
<span class="linenr"> 6: </span>                showRealName.<span style="color: #c678dd;">toggle</span>()
<span class="linenr"> 7: </span>            }
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#23416;&#29983;: \(</span>showRealName ? <span style="color: #98be65;">"202010101"</span> : <span style="color: #98be65;">"&#29579;&#23567;&#26126;")"</span>)
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">ScoreBoad</span>().<span style="color: #c678dd;">padding</span>(.<span style="color: #c678dd;">top</span>, <span style="color: #da8548; font-weight: bold;">10</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ScoreModel</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">15: </span>    <span style="color: #51afef;">init</span>() {<span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"ScoreModel Created"</span>)}
<span class="linenr">16: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> score: <span style="color: #c678dd;">Int</span> = <span style="color: #da8548; font-weight: bold;">40</span>
<span class="linenr">17: </span>}
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ScoreBoad</span>: View {
<span class="linenr">20: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> scoreModel = <span style="color: #c678dd;">ScoreModel</span>()
<span class="linenr">21: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> pass = <span style="color: #a9a1e1;">false</span>
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">24: </span>        VStack {
<span class="linenr">25: </span>            <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"&#21152;10&#20998;"</span>) {
<span class="linenr">26: </span>                scoreModel.<span style="color: #dcaeea;">score</span> += <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">27: </span>                <span style="color: #51afef;">if</span> scoreModel.<span style="color: #dcaeea;">score</span> &gt;= <span style="color: #da8548; font-weight: bold;">60</span> {
<span class="linenr">28: </span>                    pass = <span style="color: #a9a1e1;">true</span>
<span class="linenr">29: </span>                }
<span class="linenr">30: </span>            }
<span class="linenr">31: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#20998;&#25976;: \(</span>scoreModel.<span style="color: #dcaeea;">score</span><span style="color: #98be65;">)"</span>)
<span class="linenr">32: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#21450;&#26684;? \(</span>pass ? <span style="color: #98be65;">"YES"</span> : <span style="color: #98be65;">"NO")"</span>)
<span class="linenr">33: </span>            <span style="color: #c678dd;">GradeText</span>(scoreModel: scoreModel).<span style="color: #c678dd;">padding</span>(.<span style="color: #c678dd;">top</span>, <span style="color: #da8548; font-weight: bold;">10</span>)
<span class="linenr">34: </span>        }
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">GradeText</span>: View {
<span class="linenr">39: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> scoreModel: ScoreModel
<span class="linenr">40: </span>
<span class="linenr">41: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">42: </span>        <span style="color: #51afef;">if</span> scoreModel.<span style="color: #dcaeea;">score</span> &gt;= <span style="color: #da8548; font-weight: bold;">90</span> {
<span class="linenr">43: </span>            <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31561;&#32026;:A"</span>)
<span class="linenr">44: </span>        } <span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span> scoreModel.<span style="color: #dcaeea;">score</span> &gt;= <span style="color: #da8548; font-weight: bold;">80</span> {
<span class="linenr">45: </span>            <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31561;&#32026;:B"</span>)
<span class="linenr">46: </span>        } <span style="color: #51afef;">else</span> {
<span class="linenr">47: </span>            <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#31561;&#32026;:QQ"</span>)
<span class="linenr">48: </span>        }
<span class="linenr">49: </span>    }
<span class="linenr">50: </span>}
</pre>
</div>

<div id="orge119e1f" class="figure">
<p><img src="images/observeState.jpg" alt="observeState.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 30: </span>@ObservableObject v.s. @StateObject</p>
</div>

<p>
ä¸Šä¾‹ä¸­ï¼ŒæŒ‰åŠ åˆ†å¾Œï¼ŒåŠæ ¼èˆ‡ç­‰ç´šçš„åˆ¤æ–·éƒ½èƒ½æ­£å¸¸é‹ä½œï¼Œç„¶è€Œä¸€æ—¦åˆ‡æ›å­¸ç”Ÿå§“åèˆ‡å­¸è™Ÿï¼ŒscoreModel çš„åˆ†æ•¸å°±æœƒè¢«é‡ç½®ç‚º 60 åˆ†ã€‚åŸå› åœ¨æ–¼æŒ‰ä¸‹ã€ŒåŠ åˆ†ã€button å°è‡´ ContentView çš„ç‹€æ…‹ç™¼ç”Ÿè®ŠåŒ–ï¼ŒContentView.body è¢«é‡æ–°æ±‚å€¼ï¼Œé€£å¸¶ scoreBoard é€™å€‹ View ä¹Ÿè¢«é‡å»ºï¼Œè€Œå…¶ä¸­çš„ scoreModel ä¹Ÿä¸€èµ·é‡æ–°ç”Ÿæˆï¼Œæ–¼æ˜¯ä¹‹å‰æ‰€åšçš„æ”¹è®Š(ç‹€æ…‹)å°±æ¶ˆå¤±äº†ã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org59e1d8e" class="outline-4">
<h4 id="org59e1d8e"><span class="section-number-4">18.2.2</span> Create once</h4>
<div class="outline-text-4" id="text-18-2-2">
<p>
åªè¦ç†è§£äº†@ObservedObject å­˜åœ¨çš„å•é¡Œï¼Œ@StateObject çš„æ„ç¾©ä¹Ÿå°±å¾ˆæ˜é¡¯äº†ã€‚@StateObject å°±æ˜¯@State çš„å‡ç´šç‰ˆï¼š@State æ˜¯é‡å° struct ç‹€æ…‹æ‰€å‰µå»ºçš„å­˜å„²ï¼Œ@StateObject å‰‡æ˜¯é‡å° ObservableObjectclass çš„å­˜å„²ã€‚å®ƒä¿è­‰é€™å€‹ class å¯¦ä¾‹ä¸æœƒéš¨è‘— View è¢«é‡æ–°å‰µå»ºã€‚å¾è€Œè§£æ±ºå•é¡Œ<sup><a id="fnr.16.100" class="footref" href="#fn.16">16</a></sup>ã€‚<br />
</p>

<p>
è§£æ±ºæ–¹æ¡ˆï¼šæŠŠ scoreBoard ä¸­çš„@ObservedObject æ”¹ç‚º@StateObject<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>...
<span class="linenr">2: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ScoreBoad</span>: View {
<span class="linenr">3: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> scoreModel = <span style="color: #c678dd;">ScoreModel</span>()
<span class="linenr">4: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> pass = <span style="color: #a9a1e1;">false</span>
<span class="linenr">5: </span>
<span class="linenr">6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">7: </span>        ....
<span class="linenr">8: </span>    }
<span class="linenr">9: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3e5939c" class="outline-3">
<h3 id="org3e5939c"><span class="section-number-3">18.3</span> ä½¿ç”¨@EnvironmentObject ä¿æŒç‹€æ…‹</h3>
<div class="outline-text-3" id="text-18-3">
<p>
é™¤äº†@StateObject å¤–ï¼Œå¦ä¸€ç¨®è®“ç‹€æ…‹ object ä¿æŒä½çš„æ–¹å¼ï¼Œæ˜¯åœ¨æ›´å¤–å±¤ä½¿ç”¨.environmentObjectï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SwiftUINewApp</span>: App {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> Scene {
<span class="linenr">3: </span>        WindowGroup {
<span class="linenr">4: </span>            <span style="color: #c678dd;">ContentView</span>().<span style="color: #c678dd;">environmentObject</span>(<span style="color: #c678dd;">scoreModel</span>())
<span class="linenr">5: </span>        }
<span class="linenr">6: </span>    }
<span class="linenr">7: </span>}
</pre>
</div>
<p>
é€™æ¨£ï¼ŒscoreModel å°è±¡å°‡è¢«æ³¨å…¥åˆ°ç’°å¢ƒä¸­ï¼Œä¸å†éš¨è‘— ContentView çš„åˆ·æ–°è€Œè®Šæ›´ã€‚åœ¨ä½¿ç”¨æ™‚ï¼Œåªéœ€è¦éµå¾ªæ™®é€šçš„ environment æ–¹å¼ï¼ŒæŠŠ Model è²æ˜ç‚º@EnvironmentObject å°±è¡Œäº†ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ScoreBoard</span>: View {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> scoreModel: ScoreModel
<span class="linenr"> 3: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">...</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">ScoreText(model: model).padding(.top, 20)</span>
<span class="linenr"> 6: </span>    <span style="color: #c678dd;">ScoreText</span>().<span style="color: #c678dd;">padding</span>(.<span style="color: #c678dd;">top</span>, <span style="color: #da8548; font-weight: bold;">20</span>)
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">GradeText</span>: View {
<span class="linenr">10: </span>    <span style="color: #51afef;">@EnvironmentObject</span> <span style="color: #51afef;">var</span> scoreModel: ScofeModel
<span class="linenr">11: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">...</span>
<span class="linenr">12: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d26cdb" class="outline-3">
<h3 id="org2d26cdb"><span class="section-number-3">18.4</span> Property wrapper syntactic Sugar</h3>
<div class="outline-text-3" id="text-18-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> dice: Dice = <span style="color: #c678dd;">Dice</span>()
</pre>
</div>
<p>
ä¸Šè¿°å®£å‘Šå¯¦éš›åŒä»¥ä¸‹ struct<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Published</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> wrappedValue: Dice
<span class="linenr">3: </span>    <span style="color: #51afef;">var</span> projectedValue: <span style="color: #c678dd;">Publisher</span>&lt;Dice, <span style="color: #c678dd;">Never</span>&gt;
<span class="linenr">4: </span>}
</pre>
</div>
<p>
æ¥ä¸‹ä¾† Swift ç”¢ç”Ÿä»¥ä¸‹è®Šæ•¸<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">var</span> _dice: <span style="color: #c678dd;">Published</span> = <span style="color: #c678dd;">Published</span>(wrappedValue: <span style="color: #c678dd;">Dice</span>())
<span class="linenr">2: </span><span style="color: #51afef;">var</span> dice: Dice {
<span class="linenr">3: </span>    <span style="color: #51afef;">get</span> { _dice.<span style="color: #dcaeea;">wrappedValue</span>  }
<span class="linenr">4: </span>    <span style="color: #51afef;">set</span> { _dice.<span style="color: #dcaeea;">wrappedValue</span> = newValue }
<span class="linenr">5: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdfbd847" class="outline-3">
<h3 id="orgdfbd847"><span class="section-number-3">18.5</span> å„ç¨® property wrapper æ¯”è¼ƒ</h3>
<div class="outline-text-3" id="text-18-5">
<p>
Three ways for sharing data in SwiftUI<sup><a id="fnr.17" class="footref" href="#fn.17">17</a></sup><br />
</p>
<!-- This HTML table template is generated by emacs 27.1 -->
<table border="1">
  <tr>
    <td align="left" valign="top">
      @State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      @ObservedObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      @EnvironmentObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      Simple&nbsp;properties&nbsp;like&nbsp;String&nbsp;<br />
      or&nbsp;Int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      Can&nbsp;be&nbsp;shared&nbsp;across&nbsp;views&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      Similar&nbsp;to&nbsp;@ObservedObject&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      Belongs&nbsp;to&nbsp;a&nbsp;specific&nbsp;view&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      More&nbsp;complex&nbsp;properties&nbsp;(e.g.&nbsp;<br />
      custom&nbsp;type)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      Possiblity&nbsp;to&nbsp;make&nbsp;it&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      available&nbsp;to&nbsp;all&nbsp;views&nbsp;through<br />
      the&nbsp;application&nbsp;itself&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      Never&nbsp;used&nbsp;outside&nbsp;that&nbsp;view&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      External&nbsp;reference&nbsp;type&nbsp;that&nbsp;&nbsp;<br />
      has&nbsp;to&nbsp;be&nbsp;managed&nbsp;(Create&nbsp;an&nbsp;&nbsp;<br />
      instance&nbsp;of&nbsp;the&nbsp;class,&nbsp;create&nbsp;<br />
      its&nbsp;own&nbsp;properties,&nbsp;...)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      If&nbsp;one&nbsp;view&nbsp;changes&nbsp;the&nbsp;model&nbsp;<br />
      all&nbsp;views&nbsp;update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      Class&nbsp;should&nbsp;conform&nbsp;to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      ObservableObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      @Published&nbsp;property&nbsp;wrapper&nbsp;&nbsp;&nbsp;<br />
      used&nbsp;to&nbsp;mark&nbsp;properties&nbsp;that&nbsp;&nbsp;<br />
      should&nbsp;force&nbsp;a&nbsp;view&nbsp;to&nbsp;refresh
    </td>
    <td align="left" valign="top">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
</table>
</div>
</div>
</div>
<div id="outline-container-orgc54816f" class="outline-2">
<h2 id="orgc54816f"><span class="section-number-2">19</span> Filtered List</h2>
<div class="outline-text-2" id="text-19">
<p>
ç‚º Dynamic List åŠ å…¥é¡¯ç¤ºéæ¿¾åŠŸèƒ½<br />
</p>
</div>
<div id="outline-container-org802d9d4" class="outline-3">
<h3 id="org802d9d4"><span class="section-number-3">19.1</span> Model</h3>
<div class="outline-text-3" id="text-19-1">
<p>
BookModel.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookModel</span>: Identifiable {
<span class="linenr">4: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
<span class="linenr">5: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">6: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">7: </span>    <span style="color: #51afef;">var</span> liked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">8: </span>}
<span class="linenr">9: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf75e884" class="outline-3">
<h3 id="orgf75e884"><span class="section-number-3">19.2</span> ViewModel</h3>
<div class="outline-text-3" id="text-19-2">
<p>
Book.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Book</span>: <span style="color: #c678dd;">ObservableObject</span>{
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> list: [BookModel]
<span class="linenr"> 5: </span>    <span style="color: #51afef;">init</span>(){
<span class="linenr"> 6: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">list</span> = [
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"X&#30340;&#24754;&#21127;"</span>, author: <span style="color: #98be65;">"&#33406;&#21202;&#37324;&#65294;&#26118;&#24681;"</span>, liked: <span style="color: #a9a1e1;">false</span>),
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#22320;&#29508;&#34253;&#35519;"</span>, author: <span style="color: #98be65;">"&#26446;&#26597;&#24503;"</span>, liked: <span style="color: #a9a1e1;">false</span>),
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#26481;&#26041;&#21015;&#36554;&#35584;&#27578;&#26696;"</span>, author: <span style="color: #98be65;">"&#38463;&#22025;&#33678;&#8231;&#20811;&#33673;&#32114;&#33922;"</span>, liked: <span style="color: #a9a1e1;">true</span>),
<span class="linenr">10: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#20843;&#30334;&#33836;&#31278;&#27515;&#27861;"</span>, author: <span style="color: #98be65;">"&#21214;&#20523;&#26031;.&#21340;&#27931;&#20811;"</span>, liked: <span style="color: #a9a1e1;">false</span>),
<span class="linenr">11: </span>            <span style="color: #c678dd;">BookModel</span>(title:<span style="color: #98be65;">"&#34880;&#23383;&#30740;&#31350;"</span>, author: <span style="color: #98be65;">"&#26607;&#21335;&#36947;&#29246;"</span>, liked: <span style="color: #a9a1e1;">true</span>)
<span class="linenr">12: </span>        ]
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org539121e" class="outline-3">
<h3 id="org539121e"><span class="section-number-3">19.3</span> ä¸»ç•«é¢</h3>
<div class="outline-text-3" id="text-19-3">
<p>
ContentView.swift<br />
æ–¼ List å·¦ä¸Šè§’åŠ å…¥ä¸€å€‹ Hide/Show çš„ Buttonï¼Œä»¥æ§åˆ¶æ˜¯å¦æ–¼æ›¸ç±åˆ—è¡¨ä¸­åŠ å…¥ Like<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> book = <span style="color: #c678dd;">Book</span>()
<span class="linenr"> 5: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewBook = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showLiked = <span style="color: #a9a1e1;">true</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 8: </span>        NavigationView {
<span class="linenr"> 9: </span>            <span style="color: #c678dd;">List</span>(book.<span style="color: #dcaeea;">list</span>) { book <span style="color: #51afef;">in</span>
<span class="linenr">10: </span>                <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Show Detail here..."</span>) ){
<span class="linenr">11: </span>                    <span style="color: #c678dd;">bookRow</span>(book: book, showLiked: <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showLiked</span>)
<span class="linenr">12: </span>                }
<span class="linenr">13: </span>            }
<span class="linenr">14: </span>            .<span style="color: #c678dd;">navigationBarItems</span>(
<span class="linenr">15: </span>                leading: <span style="color: #c678dd;">Button</span>(
<span class="linenr">16: </span>                    action: { <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showLiked</span>.<span style="color: #c678dd;">toggle</span>() },
<span class="linenr">17: </span>                    label: { <span style="color: #c678dd;">Text</span>(<span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showLiked</span> ? <span style="color: #98be65;">"Hide"</span> : <span style="color: #98be65;">"Show"</span>) }
<span class="linenr">18: </span>                ),
<span class="linenr">19: </span>                trailing: <span style="color: #c678dd;">Button</span>(<span style="color: #98be65;">"New"</span>){
<span class="linenr">20: </span>                    <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewBook</span> = <span style="color: #a9a1e1;">true</span>
<span class="linenr">21: </span>                }.<span style="color: #c678dd;">sheet</span>(isPresented: <span style="color: #51afef;">self</span>.$showNewBook, content: {
<span class="linenr">22: </span>                    <span style="color: #c678dd;">AddNewBook</span>(book: book, showThisView: $showNewBook, title: <span style="color: #98be65;">""</span>, author: <span style="color: #98be65;">""</span>, liked: <span style="color: #a9a1e1;">false</span>)
<span class="linenr">23: </span>                }))
<span class="linenr">24: </span>        }
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">bookRow</span>: View {
<span class="linenr">29: </span>    <span style="color: #51afef;">var</span> book: BookModel
<span class="linenr">30: </span>    <span style="color: #51afef;">var</span> showLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">31: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">32: </span>        <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">33: </span>
<span class="linenr">34: </span>            HStack {
<span class="linenr">35: </span>                <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">title</span>)
<span class="linenr">36: </span>                <span style="color: #51afef;">if</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showLiked</span> &amp;&amp; book.<span style="color: #dcaeea;">liked</span>{
<span class="linenr">37: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"heart"</span>).<span style="color: #c678dd;">foregroundColor</span>(.<span style="color: #dcaeea;">red</span>)
<span class="linenr">38: </span>                }
<span class="linenr">39: </span>            }
<span class="linenr">40: </span>            <span style="color: #c678dd;">Text</span>(book.<span style="color: #c678dd;">author</span>)
<span class="linenr">41: </span>        }
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>}
<span class="linenr">44: </span>
<span class="linenr">45: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">46: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">47: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">48: </span>    }
<span class="linenr">49: </span>}
</pre>
</div>

<div id="org6425613" class="figure">
<p><img src="images/filterList.gif" alt="filterList.gif" width="300" /><br />
</p>
<p><span class="figure-number">Figure 31: </span>Filtered List</p>
</div>
</div>
</div>
</div>
<div id="outline-container-SW-MVVM" class="outline-2">
<h2 id="SW-MVVM"><span class="section-number-2">20</span> MVVM</h2>
<div class="outline-text-2" id="text-SW-MVVM">
</div>
<div id="outline-container-orga75cc01" class="outline-3">
<h3 id="orga75cc01"><span class="section-number-3">20.1</span> Design pattern</h3>
<div class="outline-text-3" id="text-20-1">
<p>
MVVM çš„æ¦‚å¿µæœ€æ—©æ‡‰è©²æ˜¯åœ¨ 2005 å¹´ç”± Microsoftçš„<a href="https://blogs.msdn.microsoft.com/johngossman/2005/10/08/introduction-to-modelviewviewmodel-pattern-for-building-wpf-apps/">John Gossman</a>æå‡ºä¾†çš„ï¼Œå®ƒçš„æ¦‚å¿µæ˜¯ï¼Œæ•´å€‹ Swift project æœƒæ‹†åˆ†æˆä¸‰å€‹éƒ¨ä»½: Viewã€ViewModelã€Modelï¼Œå…¶ä¸­ View çš„è§’è‰²å°±æ˜¯å–®ç´”çš„è¦–è¦ºå…ƒä»¶ï¼Œåƒæ˜¯æŒ‰éˆ•ã€æ–‡å­—æ¨™ç±¤ç­‰ç­‰ï¼Œåœ¨ View è£¡é¢ä¸æœƒæœ‰é‚è¼¯ã€ç‹€æ…‹ç­‰ç­‰ï¼Œå–®ç´”å°±æ˜¯å€‹å‘ˆç¾è³‡æ–™çš„å…ƒä»¶ã€‚è€Œè¦è®“ View å‘ˆç¾è³‡æ–™ï¼Œæœ€ç›´è¦ºçš„æ–¹å¼ï¼Œå°±æ˜¯æŠŠ View è·Ÿ Model åšç¶å®šï¼Œè®“ View çš„å…ƒä»¶è·Ÿè‘— Model ä¸€èµ·åšè®ŠåŒ–ã€‚ä½†é€™æ¨£æœƒæœ‰å€‹å•é¡Œï¼Œå°±æ˜¯é€šå¸¸ Model ä¾†çš„è³‡æ–™ï¼Œä¸¦ä¸æ˜¯ç°¡å–®å°±èƒ½è½‰æ›æˆ View çš„æ¨£å¼çš„ï¼Œé€™æ™‚å€™å°±éœ€è¦æœ‰å€‹ç‰©ä»¶ï¼Œä»‹åœ¨ View è·Ÿ Model çš„ä¸­é–“ï¼Œé€™å€‹ç‰©ä»¶æœƒæŒç®¡é€™äº›è·Ÿ View é«˜åº¦ç›¸é—œçš„é‚è¼¯çš„æ“ä½œï¼Œåƒæ˜¯è½‰æ› Date ç‰©ä»¶è®Šæˆäººçœ‹å¾—æ‡‚çš„æ–‡å­—æ ¼å¼ç­‰ï¼Œç¨±ä¹‹ç‚º ViewModelã€‚ä¸Šé¢çš„æ¦‚å¿µå¯ä»¥ç•«æˆé€™æ¨£çš„è³‡æ–™æµï¼š<br />
</p>


<div id="org43bc8dd" class="figure">
<p><img src="images/MVVM-Basic.jpg" alt="MVVM-Basic.jpg" width="600" /><br />
</p>
<p><span class="figure-number">Figure 32: </span>MVVM Architecture</p>
</div>

<p>
åœ¨ iOS é–‹ç™¼ä¸Šï¼Œä¾ç…§ä¸Šè¿° MVVM çš„å®šç¾©ï¼ŒContentView è®Šæˆä¸€å€‹å–®ç´”çš„ Viewï¼Œè€Œæˆ‘å€‘æœƒå¦å¤–ç”¢ç”Ÿä¸€å€‹ ViewModel ä¾†è² è²¬ presentational logic è·Ÿéƒ¨ä»½çš„ controller logicã€‚æ‰€ä»¥åœ¨ ContentView è£¡é¢ï¼Œå°±åªæœƒæœ‰ï¼š<br />
</p>
<ol class="org-ol">
<li>View logicï¼Œæ‰€æœ‰è·Ÿå‘ˆç¾æœ‰é—œçš„ Code<br /></li>
<li>ç¶å®š ViewModel<br /></li>
</ol>
<p>
è€Œåœ¨ ViewModel è£¡é¢ï¼Œå‰‡æ˜¯è² è²¬å…©å€‹éƒ¨ä»½ï¼š<br />
</p>
<ol class="org-ol">
<li>Controller logicï¼Œå¦‚ pagination, error handling,â€¦ etc<br /></li>
<li>Presentation logicï¼Œæä¾›æ¥å£è®“ View ç¶å®š(binding)<br /></li>
</ol>
<p>
é–‹ç™¼ä¸Šï¼Œä¸€æ—¦ View ç¶å®šå¥½ ViewModel çš„è³‡æ–™ï¼Œåœ¨æ’°å¯«å•†æ¥­é‚è¼¯çš„æ™‚å€™ï¼Œå°±å¯ä»¥ä¸ç”¨ç®¡åŒ…æ‹¬å‹•ç•«ã€è½‰å ´ã€main thread ç­‰ç­‰è·Ÿ View ç›¸é—œçš„å•é¡Œï¼Œå› ç‚ºåˆ†å·¥æ˜ç¢ºæ‰€ä»¥å°±ä¸æœƒæœ‰å¯«èµ·ä¾†ç¶æ‰‹ç¶è…³çš„æ„Ÿè¦ºã€‚æ›´æ£’çš„æ˜¯ï¼Œä¸¦ä¸”å› ç‚º ViewModel æ˜¯ä¸€å€‹å–®ç´”çš„ã€æ²’æœ‰ç›¸ä¾æ–¼ View çš„ç‰©ä»¶ï¼Œæ‰€ä»¥è¦åšæ¸¬è©¦ç°¡å–®å¤šäº†ï¼<br />
<a href="https://www.codementor.io/@koromiko/mvvm-app-cl1wvw2sh">è³‡æ–™ä¾†æº: æ­¡è¿ä¾†åˆ°çœŸå¯¦ä¸–ç•Œ - åŸä¾†æ˜¯é‚£å€‹å‚³èªªä¸­çš„MVVMé˜¿</a><br />
</p>
</div>
</div>
<div id="outline-container-orgb4c3c1e" class="outline-3">
<h3 id="orgb4c3c1e"><span class="section-number-3">20.2</span> What is the idea behind MVVM</h3>
<div class="outline-text-3" id="text-20-2">
</div>
<div id="outline-container-org9aa5212" class="outline-4">
<h4 id="org9aa5212"><span class="section-number-4">20.2.1</span> Model</h4>
<div class="outline-text-4" id="text-20-2-1">
<ul class="org-ul">
<li>Business logic<br /></li>
<li>UI Independent<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org7c786db" class="outline-4">
<h4 id="org7c786db"><span class="section-number-4">20.2.2</span> View</h4>
<div class="outline-text-4" id="text-20-2-2">
<ul class="org-ul">
<li>Presentation<br /></li>
<li>User interaction<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgb4d1baa" class="outline-4">
<h4 id="orgb4d1baa"><span class="section-number-4">20.2.3</span> ViewModel</h4>
<div class="outline-text-4" id="text-20-2-3">
<ul class="org-ul">
<li>Presentation logic<br /></li>
<li>Glue between Model and View<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org84d2837" class="outline-4">
<h4 id="org84d2837"><span class="section-number-4">20.2.4</span> ç‚ºä»€éº¼è¦æ‹†æˆä¸‰éƒ¨ä»½(What does it solve?)</h4>
<div class="outline-text-4" id="text-20-2-4">
<ul class="org-ul">
<li>MVC - Massive View Controller<br /></li>
<li>Testability<br /></li>
<li>Code organization<br /></li>
<li>Code reusability<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org999c6b2" class="outline-4">
<h4 id="org999c6b2"><span class="section-number-4">20.2.5</span> Limitations / Cons</h4>
<div class="outline-text-4" id="text-20-2-5">
<ul class="org-ul">
<li>Requires binding<br /></li>
<li>Potential for boilerplate code<br /></li>
<li>Overkill for simple views and logic<br /></li>
<li>Doesn&rsquo;t cover every case<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org75858d7" class="outline-3">
<h3 id="org75858d7"><span class="section-number-3">20.3</span> DEMO</h3>
<div class="outline-text-3" id="text-20-3">
<p>
ä»¥&ldquo;æ¨è–¦æ›¸å–®&rdquo;çš„ APP ç‚ºä¾‹:<br />
</p>
<ul class="org-ul">
<li><p>
Model: åŒ…å«æ›¸åã€ä½œè€…ã€å‡ºç‰ˆç¤¾&#x2026;.ï¼Œè€Œå¯¦éš›çš„è³‡æ–™ä¾†æºå¯èƒ½æ˜¯é›²ç«¯è³‡æ–™åº«(Firebase)ã€Web APIã€æœ¬æ©Ÿè³‡æ–™åº«(Core data)ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Book</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">let</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">let</span> dateReleased: <span style="color: #c678dd;">String</span>
<span class="linenr">5: </span>    <span style="color: #51afef;">let</span> publishCamp: <span style="color: #c678dd;">String</span>
<span class="linenr">6: </span>    <span style="color: #51afef;">let</span> publishCity: <span style="color: #c678dd;">String</span>
<span class="linenr">7: </span>    <span style="color: #51afef;">let</span> isFavorite: <span style="color: #c678dd;">Bool</span>
<span class="linenr">8: </span>}
</pre>
</div></li>
<li>View: åœ¨ APP ç•«é¢ä¸Šå‘ˆç¾ Model ä¸­è³‡æ–™çš„å…ƒä»¶ï¼Œå¦‚ Text, Image, Button, List&#x2026;..<br /></li>
<li><p>
ViewModel: å°‡ Model ä¸­çš„è³‡æ–™å–å‡ºï¼Œä¾› View å‘ˆç¾ï¼Œæˆ–æ˜¯æ¥å— View è¼¸å…¥çš„è³‡æ–™ï¼Œå­˜å› Modelã€‚ä»¥&ldquo;æ¨è–¦æ›¸å–® APP&rdquo;ç‚ºä¾‹ï¼Œå…¶ ViewModel å¯èƒ½åŒ…å«å¦‚ä¸‹ struct:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookDetailViewModel</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> book: Book
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> isFavorite: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">init</span>(book: Book) {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span> = book
<span class="linenr"> 8: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">isFavorite</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span> {
<span class="linenr">12: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #c678dd;">title</span>
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span> {
<span class="linenr">16: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #c678dd;">author</span>
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> dateReleased: <span style="color: #c678dd;">String</span> {
<span class="linenr">20: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">dateReleased</span>
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21576;&#29694;&#26178;&#35201;&#27714;&#20197; &#36960;&#27969;&#20986;&#29256;&#31038;(&#21488;&#21271;&#24066;) &#30340;&#26684;&#24335;&#20358;&#21576;&#29694;</span>
<span class="linenr">24: </span>    <span style="color: #51afef;">var</span> publisher: <span style="color: #c678dd;">String</span> {
<span class="linenr">25: </span>        <span style="color: #51afef;">let</span> output = <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">publishCamp</span> + <span style="color: #98be65;">"("</span> + <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">publishCity</span> + <span style="color: #98be65;">")"</span>
<span class="linenr">26: </span>        <span style="color: #51afef;">return</span> output
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
</pre>
</div>
<p>
å¾ Model ä¸­å¯ä»¥çœ‹åˆ°æ›¸ç±çš„è¨˜éŒ„æ¬„ä½åªæœ‰&ldquo;å‡ºç‰ˆç¤¾&rdquo;(publishCamp)å’Œ&ldquo;å‡ºç‰ˆåœ°é»&rdquo;(publishCity)ï¼Œä½†è‹¥ app å°é¡¯ç¤ºçµæœçš„æ ¼å¼è¦æ±‚ç‚º&ldquo;å‡ºç‰ˆç¤¾(å‡ºç‰ˆåœ°é»)&rdquo;ï¼Œå‰‡å¯ä»¥åœ¨ ViewModel ä¸­ä¾†è™•ç†ã€‚<br />
æ­¤å¤–ï¼Œå¦‚æœåœ¨ View ä¸Šæœ‰ä¸€å€‹ Favorite Buttonï¼Œå‰‡ç•¶ user é»äº† Favorite å¾Œï¼ŒViewModel æ‡‰è² è²¬å°‡ struct ä¸­çš„ isFavorite æ”¹å­˜ Trueï¼Œä¸¦å›å­˜è‡³ Model ä¸­ã€‚Model çš„è³‡æ–™åªèƒ½é€é ViewModel ä¾†æ–°å¢åˆªé™¤ï¼ŒView ç„¡æ³•ç›´æ¥æŸ“æŒ‡ã€‚<br />
Model èˆ‡ UI å®Œå…¨ç„¡é—œï¼Œå–®ç´”ç”¨ä¾†å„²å­˜è³‡æ–™ï¼ŒViewModel ç‚º Model èˆ‡ View æºé€šçš„æ©‹æ¨‘ã€‚<br />
</p></li>
</ul>
</div>
</div>
<div id="outline-container-org25aea3c" class="outline-3">
<h3 id="org25aea3c"><span class="section-number-3">20.4</span> Model è¦ç”¨ Struct æˆ–æ˜¯ Class</h3>
<div class="outline-text-3" id="text-20-4">
<p>
<a href="https://www.appcoda.com.tw/swift-class/">è³‡æ–™ä¾†æº:Swift Class vs Structï¼šè¨­è¨ˆ Model æ™‚ï¼Œè©²ç”¨ Struct é‚„æ˜¯ Class å‘¢ï¼Ÿ</a><br />
</p>
</div>
<div id="outline-container-org4653788" class="outline-4">
<h4 id="org4653788"><span class="section-number-4">20.4.1</span> Struct èˆ‡ Class çš„ä¸åŒæ€§è³ª</h4>
<div class="outline-text-4" id="text-20-4-1">
<p>
é¦–å…ˆï¼Œç•¶æˆ‘å€‘æŒ‡æ´¾ (assign) ä¸€å€‹å¯¦é«”çµ¦ä¸€å€‹è¾¨è­˜ç¬¦ï¼ˆidentifierï¼Œä¹Ÿå°±æ˜¯è®Šæ•¸ï¼å¸¸æ•¸åï¼‰çš„æ™‚å€™ï¼Œå¦‚æœè©²å¯¦é«”æ˜¯ struct çš„è©±ï¼Œè©²è¾¨è­˜ç¬¦æ‰€å®¹ç´çš„æœƒæ˜¯è©²å¯¦é«”çš„æ‰€æœ‰å…§å®¹ï¼›ä½†å¦‚æœå®ƒæ˜¯ class çš„è©±ï¼Œé€™å€‹è¾¨è­˜ç¬¦å°±åªæœƒå®¹ç´å­˜æ”¾è©²å¯¦é«”çš„ä½å€ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#29992; struct &#23450;&#32681; Dog&#12290;</span>
<span class="linenr"> 2: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Dog</span> {
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> name = <span style="color: #98be65;">"Bart"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#25972;&#20491; Dog &#23526;&#39636;&#37117;&#26371;&#34987;&#23384;&#21040; myDog &#35041;&#12290;</span>
<span class="linenr"> 6: </span><span style="color: #51afef;">var</span> myDog = <span style="color: #c678dd;">Dog</span>()
<span class="linenr"> 7: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#29992; class &#23450;&#32681; Cat&#12290;</span>
<span class="linenr"> 8: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Cat</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name = <span style="color: #98be65;">"Mimi"</span>
<span class="linenr">10: </span>}
<span class="linenr">11: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">myCat &#21482;&#26371;&#20786;&#23384; Cat &#23526;&#39636;&#30340;&#20301;&#22336;&#12290;Cat &#23526;&#39636;&#26412;&#36523;&#26371;&#34987;&#23384;&#21040;&#21029;&#30340;&#22320;&#26041;&#12290;</span>
<span class="linenr">12: </span><span style="color: #51afef;">var</span> myCat = <span style="color: #c678dd;">Cat</span>()
</pre>
</div>
<p>
ä¹Ÿå°±æ˜¯èªªï¼Œç•¶æˆ‘å€‘ä½¿ç”¨è¾¨è­˜ç¬¦çš„æ™‚å€™ï¼Œå¦‚æœå®ƒçš„å‹åˆ¥æ˜¯ struct çš„è©±ï¼Œæˆ‘å€‘åœ¨æ“ä½œçš„å¯¦é«”éƒ½æœƒæ˜¯æœ¬åœ°çš„ã€‚ä½†æ˜¯ç•¶æˆ‘å€‘åœ¨æ“ä½œ class å‹åˆ¥çš„è¾¨è­˜ç¬¦çš„è©±ï¼Œé‚£éº¼æˆ‘å€‘å¯¦éš›ä¸Šæ˜¯é€éè¾¨è­˜ç¬¦åœ¨æ“ä½œä¸€å€‹é ç«¯çš„å¯¦é«”ã€‚æ‰€ä»¥ï¼Œç•¶æˆ‘å€‘æ›´æ”¹é€™äº›å¯¦é«”çš„å±¬æ€§çš„æ™‚å€™ï¼Œå®ƒå€‘çš„è¡Œç‚ºå°±ä¸å¤ªä¸€æ¨£äº†ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992; struct&#12290;</span>
<span class="linenr"> 2: </span><span style="color: #51afef;">var</span> herDog = <span style="color: #c678dd;">Dog</span>() {
<span class="linenr"> 3: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#22914;&#26524; herDog &#26377;&#35722;&#21205;&#30340;&#35441;&#23601;&#39023;&#31034;&#35338;&#24687;&#12290;</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">didSet</span> {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Her dog is changed!"</span>)
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>herDog.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Starlord"</span>
<span class="linenr"> 9: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Her dog is changed!</span>
<span class="linenr">10: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992; class&#12290;</span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> herCat = <span style="color: #c678dd;">Cat</span>() {
<span class="linenr">12: </span>    <span style="color: #51afef;">didSet</span> {
<span class="linenr">13: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Her cat is changed!"</span>)
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>herCat.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Mumu"</span>
<span class="linenr">17: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#27794;&#26377;&#35338;&#24687;&#12290;</span>
</pre>
</div>
<p>
æ€éº¼æœƒæœ‰é€™æ¨£çš„å·®åˆ¥å‘¢ï¼Ÿå› ç‚º herDog å„²å­˜äº†æ‰€æœ‰çš„ Dog å¯¦é«”å…§å®¹ï¼Œæ‰€ä»¥ä»»ä½• Dog å¯¦é«”çš„å±¬æ€§çš„è®Šå‹•ï¼Œå°±ç­‰æ–¼èªª herDog æœ¬èº«æœ‰è®Šå‹•ã€‚ç„¶è€Œï¼ŒherCat ä¸¦æ²’æœ‰å„²å­˜ Cat å¯¦é«”çš„å…§å®¹ï¼Œæ‰€ä»¥ Cat å¯¦é«”å±¬æ€§çš„è®Šå‹•æ˜¯åœ¨åˆ¥çš„åœ°æ–¹ç™¼ç”Ÿçš„ï¼Œä¸” herCat æœ¬èº«æ‰€å„²å­˜çš„ Cat å¯¦é«”ä½å€ä¸¦æ²’æœ‰ä»»ä½•çš„æ”¹è®Šã€‚<br />
ç”±åœ–<a href="#org43bc8dd">32</a>å¯çœ‹å‡ºï¼Œ<br />
</p>
</div>
</div>
<div id="outline-container-org1991eae" class="outline-4">
<h4 id="org1991eae"><span class="section-number-4">20.4.2</span> MMVM ä¸­çš„ Model</h4>
</div>
</div>
<div id="outline-container-org679a15e" class="outline-3">
<h3 id="org679a15e"><span class="section-number-3">20.5</span> DICE DEMO</h3>
</div>
<div id="outline-container-orgd884801" class="outline-3">
<h3 id="orgd884801"><span class="section-number-3">20.6</span> Further Reading Resources</h3>
<div class="outline-text-3" id="text-20-6">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=1IlUBHvgY8Q&amp;t=29s">SwiftUI MVVM Programming with ObservableObject @Published @ObservedObject</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=LntH6moCuo0">SwiftUI 2.0: MVVM - A Practical Approach</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=gkAV4D1nopA">SwiftUI Tip Calculator Using MVVM Design Pattern</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=cbqMkIG6Qeg">Understanding MVVM Design Pattern</a>: è¬›çš„è¶…æ¸…æ¥š<br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=EhtK_H9LsYQ">MVVM SwiftUI - Model View ViewModel Pattern - Getting Started</a><br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=LntH6moCuo0">https://www.youtube.com/watch?v=LntH6moCuo0</a><br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=sWx8TtRBOfk">MVVM in Practice - RWDevCon Session - raywenderlich.com</a><br /></li>
<li>GitHub: <a href="https://github.com/rebeloper/SwiftUIMVVM.git">https://github.com/rebeloper/SwiftUIMVVM.git</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0f85e65" class="outline-2">
<h2 id="org0f85e65"><span class="section-number-2">21</span> Web API: URLSession v.s. JSONDecoder</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org805571c" class="outline-3">
<h3 id="org805571c"><span class="section-number-3">21.1</span> Demo 1</h3>
<div class="outline-text-3" id="text-21-1">
</div>
<div id="outline-container-orgfabdb54" class="outline-4">
<h4 id="orgfabdb54"><span class="section-number-4">21.1.1</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-21-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Todo</span>: <span style="color: #c678dd;">Codable</span>, Identifiable {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> id: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> completed: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">FetchToDo</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">10: </span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">1.</span>
<span class="linenr">11: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> todos = [Todo]()
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">14: </span>        <span style="color: #51afef;">let</span> url = <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"https://jsonplaceholder.typicode.com/todos"</span>)!
<span class="linenr">15: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">2.</span>
<span class="linenr">16: </span>        <span style="color: #c678dd;">URLSession</span>.<span style="color: #c678dd;">shared</span>.<span style="color: #c678dd;">dataTask</span>(with: url) {(data, response, error) <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>            <span style="color: #51afef;">do</span> {
<span class="linenr">18: </span>                <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> todoData = data {
<span class="linenr">19: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">3.</span>
<span class="linenr">20: </span>                    <span style="color: #51afef;">let</span> decodedData = <span style="color: #51afef;">try</span> <span style="color: #c678dd;">JSONDecoder</span>().<span style="color: #c678dd;">decode</span>([Todo].<span style="color: #51afef;">self</span>, from: todoData)
<span class="linenr">21: </span>                    DispatchQueue.<span style="color: #c678dd;">main</span>.<span style="color: #dcaeea;">async</span> {
<span class="linenr">22: </span>                        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">todos</span> = decodedData
<span class="linenr">23: </span>                    }
<span class="linenr">24: </span>                } <span style="color: #51afef;">else</span> {
<span class="linenr">25: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"No data"</span>)
<span class="linenr">26: </span>                }
<span class="linenr">27: </span>            } <span style="color: #51afef;">catch</span> {
<span class="linenr">28: </span>                <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Error"</span>)
<span class="linenr">29: </span>            }
<span class="linenr">30: </span>        }.<span style="color: #c678dd;">resume</span>()
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
<span class="linenr">33: </span>
<span class="linenr">34: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">35: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">1.</span>
<span class="linenr">36: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> fetch = <span style="color: #c678dd;">FetchToDo</span>()
<span class="linenr">37: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">38: </span>        VStack {
<span class="linenr">39: </span>            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">2.</span>
<span class="linenr">40: </span>            <span style="color: #c678dd;">List</span>(fetch.<span style="color: #dcaeea;">todos</span>) { todo <span style="color: #51afef;">in</span>
<span class="linenr">41: </span>                <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">42: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">3.</span>
<span class="linenr">43: </span>                    <span style="color: #c678dd;">Text</span>(todo.<span style="color: #c678dd;">title</span>)
<span class="linenr">44: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>todo.<span style="color: #c678dd;">completed</span>.<span style="color: #c678dd;">description</span><span style="color: #98be65;">)"</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">print boolean</span>
<span class="linenr">45: </span>                        .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">system</span>(size: <span style="color: #da8548; font-weight: bold;">11</span>))
<span class="linenr">46: </span>                        .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">47: </span>                }
<span class="linenr">48: </span>            }
<span class="linenr">49: </span>        }
<span class="linenr">50: </span>    }
<span class="linenr">51: </span>}
</pre>
</div>

<div id="orgddef715" class="figure">
<p><img src="images/json-1.jpg" alt="json-1.jpg" width="300" /><br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org0042d20" class="outline-3">
<h3 id="org0042d20"><span class="section-number-3">21.2</span> Demo 2</h3>
<div class="outline-text-3" id="text-21-2">
</div>
<div id="outline-container-org7733137" class="outline-4">
<h4 id="org7733137"><span class="section-number-4">21.2.1</span> MVVM</h4>
<div class="outline-text-4" id="text-21-2-1">
<ul class="org-ul">
<li>Model: FlowModel.swift<br /></li>
<li>View: ContentView.swift<br /></li>
<li>ViewModel: Flow.swift<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org67e0439" class="outline-4">
<h4 id="org67e0439"><span class="section-number-4">21.2.2</span> FlowModel.swift</h4>
<div class="outline-text-4" id="text-21-2-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">FlowModel</span>: <span style="color: #c678dd;">Decodable</span>, <span style="color: #c678dd;">Hashable</span> {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> &#24180;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> &#26376;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> &#32317;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> &#26085;&#22343;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> &#20551;&#26085;&#22343;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> &#26376;&#21488;&#19978;&#21047;&#21345;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> &#36554;&#19978;&#21047;&#21345;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> &#21806;&#31080;&#27231;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> &#35036;&#31080;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> &#22296;&#39636;&#31080;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">14: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org730c74a" class="outline-4">
<h4 id="org730c74a"><span class="section-number-4">21.2.3</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-21-2-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> flow = <span style="color: #c678dd;">FetchFlow</span>()
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>() {
<span class="linenr"> 9: </span>                <span style="color: #c678dd;">ForEach</span>(flow.<span style="color: #dcaeea;">flows</span>, id: \.<span style="color: #51afef;">self</span>) {(item) <span style="color: #51afef;">in</span>
<span class="linenr">10: </span>                    <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#32317;&#36939;&#37327;: \(</span>item.<span style="color: #dcaeea;">&#32317;&#36939;&#37327;</span>!<span style="color: #98be65;">)"</span>)) {
<span class="linenr">11: </span>                        HStack {
<span class="linenr">12: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>item.<span style="color: #dcaeea;">&#24180;</span>!<span style="color: #98be65;">)&#24180;\(</span>item.<span style="color: #dcaeea;">&#26376;</span>!<span style="color: #98be65;">)&#26376;"</span>)
<span class="linenr">13: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>item.<span style="color: #dcaeea;">&#26085;&#22343;&#36939;&#37327;</span>!<span style="color: #98be65;">)"</span>)
<span class="linenr">14: </span>                        }
<span class="linenr">15: </span>                    }
<span class="linenr">16: </span>                }
<span class="linenr">17: </span>            }.<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">""</span>)
<span class="linenr">18: </span>        }
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">22: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">23: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3dfb97c" class="outline-4">
<h4 id="org3dfb97c"><span class="section-number-4">21.2.4</span> Flow.swift</h4>
<div class="outline-text-4" id="text-21-2-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">FetchFlow</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr"> 3: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> flows = [FlowModel]()
<span class="linenr"> 4: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr"> 5: </span>        <span style="color: #51afef;">let</span> urlstr = <span style="color: #98be65;">"https://data.kcg.gov.tw/dataset/6f29f6f4-2549-4473-aa90-bf60d10895dc/resource/30dfc2cf-17b5-4a40-8bb7-c511ea166bd3/download/lightrailtraffic.json"</span>
<span class="linenr"> 6: </span>        <span style="color: #51afef;">guard</span> <span style="color: #51afef;">let</span> url = <span style="color: #c678dd;">URL</span>(string: urlstr) <span style="color: #51afef;">else</span> {
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Invalid json url"</span>)
<span class="linenr"> 8: </span>            <span style="color: #51afef;">return</span>
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>        <span style="color: #c678dd;">URLSession</span>.<span style="color: #c678dd;">shared</span>.<span style="color: #c678dd;">dataTask</span>(with: url) {(data, response, error) <span style="color: #51afef;">in</span>
<span class="linenr">11: </span>            <span style="color: #51afef;">do</span> {
<span class="linenr">12: </span>                <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> flowData = data {
<span class="linenr">13: </span>                    <span style="color: #51afef;">let</span> decodeData = <span style="color: #51afef;">try</span> <span style="color: #c678dd;">JSONDecoder</span>().<span style="color: #c678dd;">decode</span>([FlowModel].<span style="color: #51afef;">self</span>, from: flowData)
<span class="linenr">14: </span>
<span class="linenr">15: </span>                    DispatchQueue.<span style="color: #c678dd;">main</span>.<span style="color: #dcaeea;">async</span> {
<span class="linenr">16: </span>                        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">flows</span> = decodeData
<span class="linenr">17: </span>                    }
<span class="linenr">18: </span>                } <span style="color: #51afef;">else</span> {
<span class="linenr">19: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"No data"</span>)
<span class="linenr">20: </span>                }
<span class="linenr">21: </span>            } <span style="color: #51afef;">catch</span> {
<span class="linenr">22: </span>                <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"\(</span>error<span style="color: #98be65;">)"</span>)
<span class="linenr">23: </span>            }
<span class="linenr">24: </span>        }.<span style="color: #c678dd;">resume</span>()
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcf87b22" class="outline-4">
<h4 id="orgcf87b22"><span class="section-number-4">21.2.5</span> Result</h4>
<div class="outline-text-4" id="text-21-2-5">

<div id="org01367a1" class="figure">
<p><img src="images/json-2.jpg" alt="json-2.jpg" width="600" /><br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orge775886" class="outline-3">
<h3 id="orge775886"><span class="section-number-3">21.3</span> å…¬é–‹è³‡æ–™å¹³å°</h3>
<div class="outline-text-3" id="text-21-3">
<ul class="org-ul">
<li><a href="https://data.gov.tw/">æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°</a><br /></li>
<li><a href="https://data.kcg.gov.tw/dataset">é«˜é›„å¸‚æ”¿åºœé–‹æ”¾è³‡æ–™é›†</a><br /></li>
<li><a href="https://data.tainan.gov.tw/dataset">å°å—å¸‚æ”¿åºœé–‹æ”¾è³‡æ–™é›†</a><br /></li>
<li><a href="https://ptx.transportdata.tw/PTX/Service">å…¬å…±é‹è¼¸æ•´åˆè³‡è¨Š</a><br /></li>
<li><a href="https://kaleidosblog.s3-eu-west-1.amazonaws.com/json/tutorial.json">country/code JSON sample</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org382938b" class="outline-3">
<h3 id="org382938b"><span class="section-number-3">21.4</span> Further Reading</h3>
<div class="outline-text-3" id="text-21-4">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=HvfE4G9PfeU">SwiftUI Tutorial - Using an API and Decoding JSON Data</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=tdxKIPpPDAI">iOS Swift Tutorial: Use Web APIs and JSON Data with Swift 5</a>- <a href="https://www.ioscreator.com/tutorials/swiftui-json-list-tutorial">SwiftUI Fetch JSON Data into List</a><br /></li>
<li><a href="https://programmingwithswift.com/parse-json-from-file-and-url-with-swift/">Parse JSON from file and URL with Swift</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=1en4JyW3XSI">Making an API call and fetch JSON data in SwiftUI</a><br /></li>
<li><a href="https://benoitpasquier.com/encoding-decoding-json-swift4/">The best way to encode and decode JSON in Swift4 </a><br /></li>
<li><a href="https://www.reddit.com/r/swift/comments/emw0i3/jsondecoder_fails_if_i_dont_have_an_id_for_each/">JSONDecoder fails if I don&rsquo;t have an &ldquo;id&rdquo; for each item&#x2026; why doesn&rsquo;t UUID work?</a><br /></li>
<li><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E8%A7%A3%E6%B1%BAjson-key%E4%B8%8D%E5%9B%BA%E5%AE%9A%E6%99%82%E5%87%BA%E7%8F%BE-no-value-associated-with-key-codingkeys-%E7%8B%80%E6%B3%81-720d7d09486a">è§£æ±ºJson Keyä¸å›ºå®šæ™‚å‡ºç¾â€œNo value associated with key CodingKeysâ€ ç‹€æ³</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-SW-Protocols" class="outline-2">
<h2 id="SW-Protocols"><span class="section-number-2">22</span> <span class="todo STRT">STRT</span> Protocols</h2>
<div class="outline-text-2" id="text-SW-Protocols">
<ul class="org-ul">
<li>Protocols are a fundamental feature of Swift. They play a leading role in the structure of the Swift standard library and are a common method of abstraction. They provide a similar experience to interfaces that some other languages have. An advantage of protocols in Swift is that objects can conform to multiple protocols.<sup><a id="fnr.18" class="footref" href="#fn.18">18</a></sup><br /></li>
<li>Protocol æ˜¯ä¸€å€‹åªå®£å‘Šä¸å®šç¾©çš„å‹åˆ¥ï¼Œç„¶è€Œé€™å€‹ç‰¹æ€§å¯ä»¥è®“æˆ‘å€‘çš„ç¨‹å¼æ›´æœ‰å½ˆæ€§ï¼Œåƒåœ¨ IOS SDK è£¡é¢ï¼Œè€³ç†Ÿèƒ½è©³çš„ Delegateï¼Œå°±å¤§é‡çš„é‹ç”¨ Potocolï¼Œæ–¹ä¾¿æˆ‘å€‘å®¢è£½åŒ–äº‹ä»¶ç™¼ç”Ÿæ™‚è¦è™•ç†çš„äº‹æƒ…ã€‚<sup><a id="fnr.19" class="footref" href="#fn.19">19</a></sup><br /></li>

<li>å°ä»»ä½•ç¨‹å¼é–‹ç™¼ä¾†èªªï¼Œæ¸›å°‘é‡è¦†çš„ codeï¼ŒæŠŠæ¬Šè²¬æ˜ç¢ºåˆ†é–‹ï¼Œè®“ code ç¶­è­·æ€§è®Šå¥½ï¼Œæ˜¯éå¸¸é‡è¦çš„èª²é¡Œã€‚è€Œåœ¨ç¾ä»Šçš„è»Ÿé«”é–‹ç™¼æ¨¡å¼ä¸­ï¼Œæœ‰è¨±å¤šæ–¹æ³•å¯ä»¥åšåˆ°é€™é»ï¼Œæœ€ç‚ºäººæ‰€çŸ¥çš„ä¸€å€‹æ¨¡å¼ï¼Œå°±æ˜¯åˆ©ç”¨ç¹¼æ‰¿ (Inheritance)ï¼ŒæŠŠæœƒé‡è¦†åˆ©ç”¨çš„éƒ¨ä»½æ”¾åœ¨æ¯é¡åˆ¥ï¼Œè®“å…¶å®ƒå­é¡åˆ¥å»ç¹¼æ‰¿ã€‚å¦å¤–ä¸€ç¨®åšæ³•ï¼Œå‰‡æ˜¯åˆ©ç”¨ Composition Patternï¼Œå°‡åŠŸèƒ½åšæˆçµ„ä»¶åˆ†å‡ºä¾†ï¼Œè®“éœ€è¦çš„æ¨¡çµ„å»çµ„åˆå–ç”¨ã€‚<sup><a id="fnr.20" class="footref" href="#fn.20">20</a></sup><br /></li>
</ul>
<p class="verse">
A protocol defines a blueprint of methods, properties, and other requirements that suit a particular task or piece of functionality. The protocol can then be adopted by a class, structure, or enumeration to provide an actual implementation of those requirements. Any type that satisfies the requirements of a protocol is said to conform to that protocol. <sup><a id="fnr.21" class="footref" href="#fn.21">21</a></sup><br />
</p>

<ul class="org-ul">
<li>å”å®šæä¾›é¡å‹å¯ä»¥åšçš„è³‡è¨Šï¼ŒClasses å’Œ structs å‰‡æä¾›ç‰©ä»¶çš„è³‡è¨Šï¼Œå”å®šå‰‡æä¾›ç‰©ä»¶å°‡æœƒåŸ·è¡Œçš„å‹•ä½œã€‚<sup><a id="fnr.22" class="footref" href="#fn.22">22</a></sup><br /></li>
</ul>
<p class="verse">
å”å®šæ˜¯ Swift ä¸€å€‹é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒæœƒå®šç¾©å‡ºç‚ºäº†å®ŒæˆæŸé …ä»»å‹™æˆ–åŠŸèƒ½æ‰€éœ€çš„æ–¹æ³•ã€å±¬æ€§ï¼Œä½†æ˜¯æœ¬èº«ä¸æœƒå¯¦ä½œé€™äº›ä»»å‹™è·ŸåŠŸèƒ½ï¼Œè€Œåƒ…åƒ…åªæ˜¯è¡¨é”å‡ºè©²ä»»å‹™æˆ–åŠŸèƒ½çš„åç¨±ã€‚å”å®šç‚ºæ–¹æ³•ã€å±¬æ€§ã€ä»¥åŠå…¶ä»–ç‰¹å®šçš„ä»»å‹™éœ€æ±‚æˆ–åŠŸèƒ½å®šç¾©è—åœ–ã€‚å”å®šå¯è¢« classã€structã€æˆ– enum é¡å‹æ¡ç´ä»¥æä¾›æ‰€éœ€åŠŸèƒ½çš„å…·é«”å¯¦ç¾ã€‚æ»¿è¶³äº†å”å®šä¸­éœ€æ±‚çš„ä»»æ„é¡å‹éƒ½å«åšéµå¾ªäº†è©²å”å®šã€‚<br />
</p>

<p>
é™¤äº†æŒ‡å®šéµå¾ªé¡å‹å¿…é ˆå¯¦ç¾çš„è¦æ±‚å¤–ï¼Œä½ å¯ä»¥æ“´å±•ä¸€å€‹å”å®šä»¥å¯¦ç¾å…¶ä¸­çš„ä¸€äº›éœ€æ±‚æˆ–å¯¦ç¾ä¸€å€‹ç¬¦åˆé¡å‹çš„å¯ä»¥åˆ©ç”¨çš„é™„åŠ åŠŸèƒ½ã€‚<sup><a id="fnr.23" class="footref" href="#fn.23">23</a></sup><br />
</p>
<ul class="org-ul">
<li>ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€å€‹åç‚º str çš„è®Šé‡ï¼Œå…¶é¡å‹ç‚º Stringã€‚èº«ç‚ºä¸€å€‹é–‹ç™¼äººå“¡ï¼Œä½ æ‡‰è©²çŸ¥é“ str ä»£è¡¨ Stringï¼Œå¦‚æœæˆ‘å€‘å®šç¾©äº†ä¸€å€‹åç‚º StringProtocol çš„å”å®šï¼Œå®ƒå…·æœ‰æ‰€æœ‰çš„ String çš„ APIï¼Œæˆ‘å€‘å¯ä»¥æ“´å±•ä»»ä½•é¡å‹å»éµå¾ª StringProtocolï¼ˆæ„æ€æ˜¯æ»¿è¶³å…¶æ‰€æœ‰è¦æ±‚ï¼‰ï¼Œå¦‚æ­¤ä¸€ä¾†ï¼Œå³å¯ä»¥ä½¿ç”¨è©²å°è±¡ï¼Œè®“å®ƒå°±åƒæ˜¯ä¸€å€‹ Stringï¼Œå„˜ç®¡æˆ‘å€‘ä¸çŸ¥é“å®ƒæ˜¯ä»€éº¼ï¼å¦‚æœçœ‹èµ·ä¾†åƒä¸€éš»é´¨å­ï¼Œæ¸¸æ³³åƒä¸€éš»é´¨å­ï¼Œå«è²åƒä¸€éš»é´¨å­ï¼Œé‚£å°±æ˜¯ä¸€éš»é´¨å­ã€‚æˆ‘å€‘æ–°çš„ StringProtocol å¯ä»¥å‘Šè¨´é‚£äº›éµå®ˆå®ƒå”å®šçš„é¡å‹èƒ½å¤ åšä»€éº¼ï¼Œä¸”ä¸éœ€è¦çŸ¥é“é€™äº›é¡å‹çš„è³‡è¨Šã€‚<sup><a id="fnr.22.100" class="footref" href="#fn.22">22</a></sup><br /></li>
</ul>
</div>
<div id="outline-container-orgefc34ca" class="outline-3">
<h3 id="orgefc34ca"><span class="section-number-3">22.1</span> Protocol Syntax</h3>
<div class="outline-text-3" id="text-22-1">
</div>
<div id="outline-container-org69dfcc7" class="outline-4">
<h4 id="org69dfcc7"><span class="section-number-4">22.1.1</span> Syntax</h4>
<div class="outline-text-4" id="text-22-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">protocol definition goes here</span>
<span class="linenr">3: </span>}
</pre>
</div>
<p>
Classes , structs, enums can adopt these protocol by placing protocolâ€™s name after the typeâ€™s name, separated by a colon, as part of their definition. Multiple protocols can be listed, and are separated by commas:<sup><a id="fnr.24" class="footref" href="#fn.24">24</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SomeStructure</span>: FirstProtocol, AnotherProtocol {
<span class="linenr">2: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">structure definition goes here</span>
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org1da108f" class="outline-4">
<h4 id="org1da108f"><span class="section-number-4">22.1.2</span> DEMO</h4>
<div class="outline-text-4" id="text-22-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Polite</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHello</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Teacher</span>: Polite {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHello</span>() {
<span class="linenr"> 8: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"&#21516;&#23416;&#22909;"</span>)
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Student</span>: Polite {
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHEllo</span>() {
<span class="linenr">15: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"&#32769;&#24107;&#22909;"</span>)
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #51afef;">var</span> aPolitePerson: Polite = <span style="color: #c678dd;">Teacher</span>()
<span class="linenr">20: </span>aPolitePerson.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Mr. Yen"</span>
<span class="linenr">21: </span>aPolitePerson.<span style="color: #c678dd;">sayHellow</span>()
<span class="linenr">22: </span>aPolitePerson = <span style="color: #c678dd;">Student</span>()
<span class="linenr">23: </span>aPolitePerson.<span style="color: #c678dd;">sayHello</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbb21fd3" class="outline-4">
<h4 id="orgbb21fd3"><span class="section-number-4">22.1.3</span> Adding property requirements</h4>
<div class="outline-text-4" id="text-22-1-3">
<p>
source: <a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in swift</a><br />
</p>
<ul class="org-ul">
<li>A protocol can have properties as well as methods that a class, enum or struct conforming to this protocol can implement.<br /></li>
<li>A protocol declaration only specifies the required property name and type. It doesnâ€™t say anything about whether the property should be a stored one or a computed one.<br /></li>
<li>A protocol also specifies whether each property must be gettable or gettable and settable.<br /></li>
<li>Property requirements are always declared as variable properties, prefixed with the var keyword.<br /></li>
<li>Gettable and settable properties are indicated by writing { get set } after their type declaration, and gettable properties are indicated by writing { get }.<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> mustBeSettable: <span style="color: #c678dd;">Int</span> { <span style="color: #51afef;">get</span> <span style="color: #51afef;">set</span> }
<span class="linenr">3: </span>    <span style="color: #51afef;">var</span> doesNotNeedToBeSettable: <span style="color: #c678dd;">Int</span> { <span style="color: #51afef;">get</span> }
<span class="linenr">4: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org949943c" class="outline-4">
<h4 id="org949943c"><span class="section-number-4">22.1.4</span> Protocols with mutating methods</h4>
<div class="outline-text-4" id="text-22-1-4">
<p>
Mutating methods are methods that we use on value types like structs and enums. These methods are allowed to modify the instance it belongs to and any properties of that instance. A small example:<br />
</p>

<p>
Consider a simple struct Rectangle:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Rectangle</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> width = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> height = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">area</span>() -&gt; <span style="color: #c678dd;">Int</span> {
<span class="linenr"> 6: </span>        <span style="color: #51afef;">return</span> width * height
<span class="linenr"> 7: </span>    }
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">scaleBy</span>(value: <span style="color: #c678dd;">Int</span>) {
<span class="linenr">10: </span>        width *= value
<span class="linenr">11: </span>        height *= value
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div>
<p>
The scaleBy(value:) method modifies the value of width and height. So it should be marked as mutating. Otherwise the compiler will throw error at you.<br />
</p>

<p class="verse">
If you mark a protocol instance method requirement as mutating, you do not need to write the mutatingkeyword when writing an implementation of that method for a class. The mutating keyword is only used by structures and enumerations.<br />
</p>
<p>
Consider an enum and class implementing a protocol with mutating function:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Togglable</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">OnOffSwitch</span>: Toggglable {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">case</span> off, on
<span class="linenr"> 7: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>() {
<span class="linenr"> 8: </span>        <span style="color: #51afef;">switch</span> <span style="color: #51afef;">self</span> {
<span class="linenr"> 9: </span>        <span style="color: #51afef;">case</span> .<span style="color: #dcaeea;">off</span>:
<span class="linenr">10: </span>            <span style="color: #51afef;">self</span> = .<span style="color: #dcaeea;">on</span>
<span class="linenr">11: </span>        <span style="color: #51afef;">case</span> .<span style="color: #dcaeea;">on</span>:
<span class="linenr">12: </span>            <span style="color: #51afef;">self</span> = .<span style="color: #dcaeea;">off</span>
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">var</span> lightSwitch = OnOffSwitch.<span style="color: #dcaeea;">off</span>
<span class="linenr">18: </span>lightSwitch.<span style="color: #c678dd;">toggle</span>()
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ToggleClass</span>: Togglable {
<span class="linenr">21: </span>    <span style="color: #51afef;">var</span> someBool = <span style="color: #a9a1e1;">false</span>
<span class="linenr">22: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>() {
<span class="linenr">23: </span>        someBool = <span style="color: #a9a1e1;">true</span>
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #51afef;">let</span> toggleClassObj = <span style="color: #c678dd;">ToggleClass</span>()
<span class="linenr">28: </span>toggleClassObj.<span style="color: #c678dd;">toggle</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-org2157679" class="outline-4">
<h4 id="org2157679"><span class="section-number-4">22.1.5</span> Initializer Requirements</h4>
<div class="outline-text-4" id="text-22-1-5">
<p>
Protocols can have specific initializers like normal methods which the conforming types can implement.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">init</span>(someParameter: <span style="color: #c678dd;">Int</span>)
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2d55844" class="outline-3">
<h3 id="org2d55844"><span class="section-number-3">22.2</span> DEMO</h3>
<div class="outline-text-3" id="text-22-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Sound</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Dog</span>: Sound {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Woof"</span>)
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Tree</span>: Sound {
<span class="linenr">12: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr">13: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Susrrate"</span>)
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">iPhone</span>: Sound {
<span class="linenr">18: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr">19: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Ring"</span>)
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb681302" class="outline-3">
<h3 id="orgb681302"><span class="section-number-3">22.3</span> ç¯„ä¾‹</h3>
<div class="outline-text-3" id="text-22-3">
</div>
<div id="outline-container-org0f5dfd8" class="outline-4">
<h4 id="org0f5dfd8"><span class="section-number-4">22.3.1</span> ç‰ˆæœ¬ 1</h4>
<div class="outline-text-4" id="text-22-3-1">
<p>
æœ¬ä¾‹ä¸­æœ‰å…©å€‹ struct: Song, Album ä»¥åŠä¸€å€‹ class ç”¨ä¾†æ’­æ”¾ Song æˆ– Albumï¼ŒåŸæœ¬çš„ Player è¦ç‚ºä¸åŒçš„ struct å¯«ä¸åŒçš„ funcï¼Œè€Œä¸”ç¨‹å¼ç¢¼å¤§å¤šé‡è¤‡ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">16: </span>}
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">19: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">20: </span>
<span class="linenr">21: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ song: Song) {
<span class="linenr">22: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: song.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">23: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">24: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>
<span class="linenr">27: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ album: Album) {
<span class="linenr">28: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: album.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">29: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">30: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org80d2417" class="outline-4">
<h4 id="org80d2417"><span class="section-number-4">22.3.2</span> ç‰ˆæœ¬ 2</h4>
<div class="outline-text-4" id="text-22-3-2">
<p>
å®£å‘Šä¸€å€‹ protocolï¼Œå®šç¾© audioURL è®Šæ•¸(read only)ï¼Œç„¶å¾Œä»¤å…©å€‹ struct çš†éµå¾ªè©² protocol(æ–¹å¼æœ‰äºŒ)ï¼Œå¦‚æ­¤ï¼ŒåŸæœ¬çš„ Player class ä¸­çš„ play func å°±èƒ½åªå¯«ä¸€æ¬¡ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Playable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span> { <span style="color: #51afef;">get</span> }
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span>: Playable {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Album</span>: Playable {}
<span class="linenr">23: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">24: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ resource: Playable) {
<span class="linenr">27: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: resource.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">28: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">29: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">30: </span>    }
<span class="linenr">31: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcff9ea3" class="outline-4">
<h4 id="orgcff9ea3"><span class="section-number-4">22.3.3</span> ç‰ˆæœ¬ 3</h4>
<div class="outline-text-4" id="text-22-3-3">
<p>
åŸæœ¬ protocol çš„çœŸæ­£æ„æ€å…¶å¯¦åªæ˜¯åœ¨ç¢ºå®š audioURL æ˜¯å¦èƒ½æ­£ç¢ºè½‰æ›æˆ Audioï¼Œæ‰€ä»¥å…¶å¯¦å°‡ protocol name ç”± Playable æ”¹ç‚º AudioURLConvertable æœƒæ›´è²¼è¿‘äº‹å¯¦ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">AudioURLConvertable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span> { <span style="color: #51afef;">get</span> }
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span>: AudioURLConvertable {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span>: AudioURLConvertable {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">23: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">24: </span>
<span class="linenr">25: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ resource: AudioURLConvertable) {
<span class="linenr">26: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: resource.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">27: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">28: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1b5cf20" class="outline-3">
<h3 id="org1b5cf20"><span class="section-number-3">22.4</span> mutating</h3>
<div class="outline-text-3" id="text-22-4">
<p>
protocol é™¤äº†å¯ä»¥æä¾›å‚³å›å€¼å‹æ…‹çš„å½ˆæ€§ï¼Œä¹Ÿå¯ä»¥ç”¨ä¾†è®Šæ›´ class/struct ä¸­çš„å±¬æ€§ã€‚å¦‚ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>()
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Song</span>: Likeable {
<span class="linenr">23: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>() {
<span class="linenr">24: </span>        isLiked = <span style="color: #a9a1e1;">true</span>
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
</pre>
</div>
<p>
å¯ä»¥åœ¨ä¸æ”¹è®ŠåŸ struct Album çš„æƒ…æ³ä¸‹ï¼Œè—‰ç”± extension ä¾†æ“´å…… Songï¼Œä½¿å…¶éµå¾ª Likeable protocolï¼Œæä¾›è®Šä¾›å±¬æ€§ isLiked çš„å€¼ï¼Œ*é€™åœ¨æ“´å…… API åŠŸèƒ½æ™‚ç‰¹åˆ¥æœ‰ç”¨*ã€‚<br />
</p>
</div>
</div>
<div id="outline-container-org8614839" class="outline-3">
<h3 id="org8614839"><span class="section-number-3">22.5</span> æ“´å…… protocol</h3>
<div class="outline-text-3" id="text-22-5">
<p>
é™¤äº†æ“´å……ç¾æœ‰ structï¼Œprotocol ä¹Ÿå¯ä»¥ç”¨ä¾†æ“´å…… protocolï¼Œå¦‚ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span> {<span style="color: #51afef;">get</span> <span style="color: #51afef;">set</span>}
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>() {
<span class="linenr">10: </span>        isLiked = <span style="color: #a9a1e1;">true</span>
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">19: </span>}
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">22: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">23: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">24: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">25: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">26: </span>}
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Song</span>: Likeable {}
<span class="linenr">29: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Album</span>: Likeable {}
</pre>
</div>
</div>
</div>
<div id="outline-container-org31f085b" class="outline-3">
<h3 id="org31f085b"><span class="section-number-3">22.6</span> Further Reading</h3>
<div class="outline-text-3" id="text-22-6">
<ul class="org-ul">
<li><a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html">Protocol</a><br /></li>
<li><a href="https://appcoda.com.tw/swift-protocol/">Swifté–‹ç™¼æŒ‡å—ï¼šProtocolsèˆ‡Protocol Extensionsçš„ä½¿ç”¨å¿ƒæ³•</a><br /></li>
<li><a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in SWIFT</a><br /></li>
<li><a href="https://blog.csdn.net/XunCiy/article/details/107367571">Swift5 14.Protocols</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga22ff01" class="outline-2">
<h2 id="orga22ff01"><span class="section-number-2">23</span> Struct v.s. Class</h2>
<div class="outline-text-2" id="text-23">
<p>
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-does-swiftui-use-structs-for-views">è³‡æ–™ä¾†æº:Why does SwiftUI use structs for views?</a><br />
If you ever programmed for UIKit or AppKit (Appleâ€™s original user interface frameworks for iOS and macOS) youâ€™ll know that they use classes for views rather than structs. SwiftUI does not: we prefer to use structs for views across the board, and there are a couple of reasons why.<sup><a id="fnr.25" class="footref" href="#fn.25">25</a></sup><br />
</p>
<ul class="org-ul">
<li>Structs are simpler and faster than classes.<br />
In SwiftUI, all our views are trivial structs and are almost free to create. Think about it: if you make a struct that holds a single integer, the entire size of your struct isâ€¦ that one integer. Nothing else. No surprise extra values inherited from parent classes, or grandparent classes, or great-grandparent classes, etc â€“ they contain exactly what you can see and nothing more.<br /></li>

<li>You can see this in action when you look at the kinds of things that can be a view. We already used Color.red and LinearGradient as views â€“ trivial types that hold very little data. In fact, you canâ€™t get a great deal simpler than using Color.red as a view: it holds no information other than â€œfill my space with redâ€.<br /></li>

<li>In comparison, Appleâ€™s documentation for UIView lists about 200 properties and methods that UIView has, all of which get passed on to its subclasses whether they need them or not.<br /></li>
</ul>
</div>
<div id="outline-container-orgc8ca8e4" class="outline-3">
<h3 id="orgc8ca8e4"><span class="section-number-3">23.1</span> What is in class/struct</h3>
<div class="outline-text-3" id="text-23-1">
<p>
<a href="https://www.avanderlee.com/swift/struct-class-differences/">è³‡æ–™ä¾†æº:Struct vs classes in Swift: The differences explained</a><br />
</p>
</div>
<div id="outline-container-orgc93348f" class="outline-4">
<h4 id="orgc93348f"><span class="section-number-4">23.1.1</span> What is a class in Swift?</h4>
<div class="outline-text-4" id="text-23-1-1">
<p>
A class in Swift is a reference type which can contain:<br />
</p>
<ul class="org-ul">
<li>properties<br /></li>
<li>methods<br /></li>
<li>subscripts<br /></li>
<li>initializers<br /></li>
<li>protocol conformances<br /></li>
<li>extensions<br /></li>
</ul>

<p>
Itâ€™s often described as a template definition of an object, like in the following Article instance definition:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ArticleClass</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">let</span> url: <span style="color: #c678dd;">URL</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> readCount: <span style="color: #c678dd;">Int</span> = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">init</span>(title: <span style="color: #c678dd;">String</span>, url: <span style="color: #c678dd;">URL</span>) {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">title</span> = title
<span class="linenr"> 8: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">url</span> = url
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3748b59" class="outline-4">
<h4 id="org3748b59"><span class="section-number-4">23.1.2</span> What is a struct in Swift?</h4>
<div class="outline-text-4" id="text-23-1-2">
<p>
A struct in Swift is a value type which, just like classes, can contain:<br />
</p>
<ul class="org-ul">
<li>properties<br /></li>
<li>methods<br /></li>
<li>subscripts<br /></li>
<li>initializers<br /></li>
<li>protocol conformances<br /></li>
<li>extensions<br /></li>
</ul>

<p>
It can also be seen as a template definition of an object, like in the following Article instance definition:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ArticleStruct</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">let</span> url: <span style="color: #c678dd;">URL</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">var</span> readCount: <span style="color: #c678dd;">Int</span> = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">5: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org25d44e0" class="outline-4">
<h4 id="org25d44e0"><span class="section-number-4">23.1.3</span> What are the differences between a struct and a class?</h4>
<div class="outline-text-4" id="text-23-1-3">
<p width="300">
<img src="images/coffee.gif" alt="coffee.gif" width="300" /><br />
When you pass a class object around your program, you are actually passing a reference to that object, so different parts of your program can share and modify your object. When you pass a structure [ or enum] around your program, what gets passes around is a copy of the structure. So modifications to structures donâ€™t get shared.<sup><a id="fnr.26" class="footref" href="#fn.26">26</a></sup><br />
</p>

<p>
One of the major benefits of value types is that they are thread-safe not requiring any<br />
 synchronization.<sup><a id="fnr.26.100" class="footref" href="#fn.26">26</a></sup> Structs always have unique owners, whereas with classes multiple things can point to the same value.<sup><a id="fnr.27" class="footref" href="#fn.27">27</a></sup><br />
</p>

<p>
Classes donâ€™t need the <b>mutating</b> keyword before methods that change their properties, because you can change properties of constant classes.<br />
In practice, what this means is that if we have two SwiftUI views and we send them both the same struct to work with, they actually each have a unique copy of that struct; if one changes it, the other wonâ€™t see that change. On the other hand, if we create an instance of a class and send that to both views, they will share changes.<sup><a id="fnr.27.100" class="footref" href="#fn.27">27</a></sup><br />
Value vs reference types<br />
</p>

<p>
One of the most important differences is that a struct is a value type while a class is a reference type. References to a class instance share single data which means that any changes in that class will be available to each reference.<br />
</p>

<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">let</span> articleClass = <span style="color: #c678dd;">ArticleClass</span>(title: <span style="color: #98be65;">"Struct vs Class"</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"www.avanderlee.com"</span>)!)
<span class="linenr">2: </span><span style="color: #51afef;">let</span> articleClassCopy = articleClass
<span class="linenr">3: </span>
<span class="linenr">4: </span>articleClass.<span style="color: #dcaeea;">readCount</span> = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(articleClassCopy.<span style="color: #dcaeea;">readCount</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Prints: 10</span>
</pre>
</div>

<p>
A struct is a value type and will create a unique copy for each new reference.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">var</span> articleStruct = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">"Struct vs Class"</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"www.avanderlee.com"</span>)!, readCount: <span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">2: </span><span style="color: #51afef;">var</span> articleStructCopy = articleStruct
<span class="linenr">3: </span>
<span class="linenr">4: </span>articleStruct.<span style="color: #dcaeea;">readCount</span> = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(articleStructCopy.<span style="color: #dcaeea;">readCount</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Prints: 0</span>
</pre>
</div>
</div>
<div id="outline-container-orgb753df9" class="outline-5">
<h5 id="orgb753df9"><span class="section-number-5">23.1.3.1</span> The benefit of mutation in safety</h5>
<div class="outline-text-5" id="text-23-1-3-1">
<p>
With this, structs have the benefit of mutation in safety as you can trust that no other part of your app is changing the data at the same time. This makes it easier to reason about your code and is especially helpful in multi-threaded environments where a different thread could alter your data at the same time.<br />
</p>
</div>
</div>
<div id="outline-container-orge1c261b" class="outline-5">
<h5 id="orge1c261b"><span class="section-number-5">23.1.3.2</span> Structs get an initializer for free</h5>
<div class="outline-text-5" id="text-23-1-3-2">
<p>
If you go back and compare the above code examples you can see that the ArticleClass has a defined initializer which is required for classes. Structs, however, get an initializer for free.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Before Swift 5.1 Memberwise initializers:</span>
<span class="linenr">2: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Generated memberwise init: init(title: String, url: URL, readCount: Int)</span>
<span class="linenr">3: </span><span style="color: #51afef;">let</span> article = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">""</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">""</span>)!, readCount: <span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">After Swift 5.1 Memberwise initializers, using the default 0 for read count</span>
<span class="linenr">6: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Generated memberwise init: init(title: String, url: URL, readCount: Int = 0)</span>
<span class="linenr">7: </span><span style="color: #51afef;">let</span> article = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">""</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">""</span>)!)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeb299cc" class="outline-5">
<h5 id="orgeb299cc"><span class="section-number-5">23.1.3.3</span> Classes allow inheritance</h5>
<div class="outline-text-5" id="text-23-1-3-3">
<p>
Classes can inherit the characteristics of another class and with that, act like abstract classes. A common example is a custom view controller which inherit from UIViewController.<br />
</p>

<p>
With protocols in Swift, this is often no longer needed and replaceable with protocols. Protocols can be used with both classes and structs while inheritance is only possible with classes.<br />
Classes can be deinitialized<br />
</p>

<p>
A class allows executing code just before it gets destroyed by using a deinit method. When you define the same deinit method in a struct youâ€™ll get the following error:<br />
</p>
<p class="verse">
Deinitializers may only be declared within a class<br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org2bf515d" class="outline-3">
<h3 id="org2bf515d"><span class="section-number-3">23.2</span> å¦‚ä½•æ±ºæ“‡? / When should I go for a struct and when for a class?</h3>
<div class="outline-text-3" id="text-23-2">
<p>
A simple bullet point list will make it a lot easier to decide.<br />
</p>
</div>
<div id="outline-container-org08b5f0a" class="outline-4">
<h4 id="org08b5f0a"><span class="section-number-4">23.2.1</span> You should use a class when:</h4>
<div class="outline-text-4" id="text-23-2-1">
<ul class="org-ul">
<li>Comparing instance identity is needed by using <code>=</code><br /></li>
<li>Shared mutable state is required<br /></li>
<li>Objective-C interoperability is required<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org321363d" class="outline-4">
<h4 id="org321363d"><span class="section-number-4">23.2.2</span> You should use a struct when:</h4>
<div class="outline-text-4" id="text-23-2-2">
<ul class="org-ul">
<li>Comparing instance data is needed by using ==<br /></li>
<li>Unique copies with an independent state are required<br /></li>
<li>The data is used in multiple threads<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org3d5beef" class="outline-4">
<h4 id="org3d5beef"><span class="section-number-4">23.2.3</span> Try to go for a struct by default.</h4>
<div class="outline-text-4" id="text-23-2-3">
<p>
Structs make your code easier to reason about and make it easier to work in multithreaded environments which we often have while developing in Swift.<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org108e6b8" class="outline-3">
<h3 id="org108e6b8"><span class="section-number-3">23.3</span> DEMO</h3>
<div class="outline-text-3" id="text-23-3">
<p>
ä»¥ä¸‹é€™å€‹ View å¯æ­£å¸¸é‹ä½œï¼Œæ–¼ TextField ä¸­æ‰€åšçš„ç·¨è¼¯ä¿®æ”¹éƒ½æœƒå³æ™‚é¡¯ç¤ºæ–¼ Text ä¸­ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">User</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> firstName<span style="color: #98be65;">" = Bilbo"</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> lastName = <span style="color: #98be65;">"Baggins"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        VStack {
<span class="linenr">11: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your name is \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">lastName</span><span style="color: #98be65;">)."</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr">14: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last name"</span>, text: $user.<span style="color: #dcaeea;">lastName</span>)
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
</pre>
</div>
<p>
ä½†è‹¥å°‡ struct æ”¹ç‚º classï¼Œé›–ç¨‹å¼ä»å¯åŸ·è¡Œï¼Œä½† Text ä¸­çš„å§“åå»ä¸å†éš¨ TextField çš„ä¿®æ”¹è€Œé€£å‹•ã€‚<br />
To fix this, we need to tell SwiftUI when interesting parts of our class have changed. By â€œinteresting partsâ€ I mean parts that should cause SwiftUI to reload any views that are watching our class â€“ itâ€™s possible you might have lots of properties inside your class, but only a few should be exposed to the wider world in this way.<sup><a id="fnr.28" class="footref" href="#fn.28">28</a></sup><br />
è‹¥è¦å°‡ struct æ”¹ç‚º classï¼Œå‰‡ç¨‹å¼è¦æ”¹æˆï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">User</span>: <span style="color: #c678dd;">ObservableObject</span>{
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> firstName = <span style="color: #98be65;">"Bilbo"</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> lastName = <span style="color: #98be65;">"Baggins"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        VStack {
<span class="linenr">11: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your name is \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">lastName</span><span style="color: #98be65;">)."</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr">14: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last name"</span>, text: $user.<span style="color: #dcaeea;">lastName</span>)
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
</pre>
</div>
<p>
Our User class has two properties: firstName and lastName. Whenever either of those two changes, we want to notify any views that are watching our class that a change has happened so they can be reloaded. We can do this using the @Published property observer.<br />
</p>

<p>
@Published is more or less half of @State: it tells Swift that whenever either of those two properties changes, it should send an announcement out to any SwiftUI views that are watching that they should reload.<br />
</p>

<p>
How do those views know which classes might send out these notifications? Thatâ€™s another property wrapper, @ObservedObject, which is the other half of @State â€“ it tells SwiftUI to watch a class for any change announcements.<br />
</p>

<p>
The @ObservedObject property wrapper can only be used on types that conform to the ObservableObject protocol. This protocol has no requirements, and really all it means is â€œwe want other things to be able to monitor this for changes.â€<br />
</p>

<p>
As youâ€™ve seen, rather than just using @State to declare local state, we now take three steps:<br />
</p>

<ul class="org-ul">
<li>Make a class that conforms to the ObservableObject protocol.<br /></li>
<li>Mark some properties with @Published so that any views using the class get updated when they change.<br /></li>
<li>Create an instance of our class using the @ObservedObject property wrapper.<br /></li>
</ul>

<p>
The end result is that we can have our state stored in an external object, and, even better, we can now use that object in multiple views and have them all point to the same values.<br />
</p>
</div>
</div>
</div>
<div id="outline-container-some" class="outline-2">
<h2 id="some"><span class="section-number-2">24</span> <span class="todo TODO">TODO</span> some</h2>
<div class="outline-text-2" id="text-some">
<p class="verse">
Adding the keyword some in front of a return type indicates that the return type is opaque. <sup><a id="fnr.29" class="footref" href="#fn.29">29</a></sup><br />
</p>
</div>
<div id="outline-container-org562f3f9" class="outline-3">
<h3 id="org562f3f9"><span class="section-number-3">24.1</span> Generics</h3>
<div class="outline-text-3" id="text-24-1">
</div>
<div id="outline-container-org4672418" class="outline-4">
<h4 id="org4672418"><span class="section-number-4">24.1.1</span> å•é¡Œ</h4>
<div class="outline-text-4" id="text-24-1-1">
<p>
Generics å…è¨±é–‹ç™¼è€…åœ¨ä¸åŒé¡å‹ä¸­è¤‡ç”¨ä½ çš„ç¨‹å¼ç¢¼ï¼Œç”¨ä¾†è§£æ±ºä¸‹åˆ—å•é¡Œï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapInts</span>(_ a: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">Int</span>, _ b: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">Int</span>) {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">let</span> temporaryB = b
<span class="linenr"> 3: </span>    b = a
<span class="linenr"> 4: </span>    a = temporaryB
<span class="linenr"> 5: </span>}
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> num1 = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr"> 8: </span><span style="color: #51afef;">var</span> num2 = <span style="color: #da8548; font-weight: bold;">20</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #c678dd;">swapInts</span>(&amp;num1, &amp;num2)
<span class="linenr">11: </span><span style="color: #c678dd;">print</span>(num1)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">20</span>
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(num2)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">10</span>
</pre>
</div>
<p>
ä½†è‹¥æƒ³äº¤æ›å­—ä¸²ï¼Œå‰‡è¦å¯«æˆ<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapStrings</span>(_ a: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">String</span>, _ b: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">String</span>) {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> temporaryB = b
<span class="linenr">3: </span>    b = a
<span class="linenr">4: </span>    a = temporaryB
<span class="linenr">5: </span>}
</pre>
</div>
<p>
å¯ä»¥ç™¼ç¾é™¤äº†åƒæ•¸ä¹‹å¤–ï¼Œé‡è¤‡çš„ code å¯¦åœ¨å¤ªå¤š<br />
</p>
</div>
</div>
<div id="outline-container-org6115757" class="outline-4">
<h4 id="org6115757"><span class="section-number-4">24.1.2</span> è§£æ±ºæ–¹æ¡ˆ</h4>
<div class="outline-text-4" id="text-24-1-2">
<p>
å°‡å›ºå®šå‹æ…‹çš„åƒæ•¸è½‰ç‚º Generic type<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapTwoValues</span>&lt;T&gt;(_ a: <span style="color: #51afef;">inout</span> T, _ b: <span style="color: #51afef;">inout</span> T) {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">let</span> temporaryA = a
<span class="linenr"> 5: </span>    a = b
<span class="linenr"> 6: </span>    b = temporaryA
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">var</span> num1 = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> num2 = <span style="color: #da8548; font-weight: bold;">20</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #c678dd;">swapTwoValues</span>(&amp;num1, &amp;num2)
<span class="linenr">14: </span><span style="color: #c678dd;">print</span>(num1)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">20</span>
<span class="linenr">15: </span><span style="color: #c678dd;">print</span>(num2)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">10</span>
</pre>
</div>
<p>
å¦ä¸€å€‹ä¾‹å­ç‚º Stack çš„å¯¦ä½œï¼š<br />
åŸæœ¬åªèƒ½å„²å­˜ Int çš„ Stack å¦‚ä¸‹ï¼Œè‹¥è¦å„²å­˜å­—ä¸²å‰‡è¦å†å¦è¡Œå®šç¾©ã€‚<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">IntStack</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> items = [<span style="color: #c678dd;">Int</span>]()
<span class="linenr">3: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">push</span>(_ item: <span style="color: #c678dd;">Int</span>) {
<span class="linenr">4: </span>        items.<span style="color: #c678dd;">append</span>(item)
<span class="linenr">5: </span>    }
<span class="linenr">6: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">pop</span>() -&gt; <span style="color: #c678dd;">Int</span> {
<span class="linenr">7: </span>        <span style="color: #51afef;">return</span> items.<span style="color: #c678dd;">removeLast</span>()
<span class="linenr">8: </span>    }
<span class="linenr">9: </span>}
</pre>
</div>
<p>
æ”¹ç‚º Generic type å¾Œå¯å‹•æ…‹è®Šæ›´ç‚ºæ•´æ•¸ stack æˆ–å­—ä¸² stackï¼Œå¦‚ï¼š<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Stack</span>&lt;<span style="color: #c678dd;">Element</span>&gt; {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> items = [<span style="color: #c678dd;">Element</span>]()
<span class="linenr"> 3: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">push</span>(_ item: <span style="color: #c678dd;">Element</span>) {
<span class="linenr"> 4: </span>        items.<span style="color: #c678dd;">append</span>(item)
<span class="linenr"> 5: </span>    }
<span class="linenr"> 6: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">pop</span>() -&gt; <span style="color: #c678dd;">Element</span> {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">return</span> items.<span style="color: #c678dd;">removeLast</span>()
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> stackOfStrings = Stack&lt;<span style="color: #c678dd;">String</span>&gt;()
<span class="linenr">12: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"uno"</span>)
<span class="linenr">13: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"dos"</span>)
<span class="linenr">14: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"tres"</span>)
<span class="linenr">15: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"cuatro"</span>)
<span class="linenr">16: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">the stack now contains 4 strings</span>
<span class="linenr">17: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge50f362" class="outline-3">
<h3 id="orge50f362"><span class="section-number-3">24.2</span> opaque</h3>
<div class="outline-text-3" id="text-24-2">
<p>
å¸¶æœ‰ä¸é€æ˜ï¼ˆopaqueï¼‰è¿”å›é¡å‹çš„å‡½æ•¸æˆ–æ–¹æ³•ï¼Œå°‡æœƒéš±è—å…¶è¿”å›å€¼çš„é¡å‹<sup><a id="fnr.30" class="footref" href="#fn.30">30</a></sup><br />
</p>
</div>
</div>
</div>
<div id="outline-container-advanced" class="outline-2">
<h2 id="advanced"><span class="section-number-2">25</span> <span class="todo TODO">TODO</span> é€²éšä¸»é¡Œ</h2>
<div class="outline-text-2" id="text-advanced">
<ul class="org-ul">
<li><a href="https://developer.apple.com/design/human-interface-guidelines/">Human Interface Guidelines</a>: Apple çš„äººæ©Ÿè¨­è¨ˆç•Œé¢æŒ‡å—<br /></li>
<li><a href="https://developer.apple.com/documentation">Apple Developer Documentation</a>: Apple é–‹ç™¼è€…æ–‡ä»¶<br /></li>
<li><a href="https://www.appcoda.com.tw/protocol-extension/">åˆ©ç”¨ Protocol Extension æ¸›å°‘é‡è¦†çš„ Codeã€€å¤§å¤§å¢å¼· Code çš„ç¶­è­·æ€§</a><br /></li>
<li><a href="https://appcoda.com.tw/mastering-swift/">ç²¾é€šSwiftï¼šåˆ—èˆ‰ã€é–‰åŒ…ã€æ³›å‹ã€Protocolså’Œé«˜éšå‡½æ•¸</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org29ac339" class="outline-2">
<h2 id="org29ac339"><span class="section-number-2">26</span> Firebase</h2>
<div class="outline-text-2" id="text-26">
<ul class="org-ul">
<li><a href="https://medium.com/flawless-app-stories/how-to-build-a-firebase-app-with-swiftui-5919d2d8a396">How To Build A Firebase App With SwiftUI</a><br /></li>
<li><a href="https://benmcmahen.com/authentication-with-swiftui-and-firebase/">Using Firebase Authentication with SwiftUI</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=4RUeW5rUcww">Building a to-do list app with SwiftUI and Firebase - Part 1 | Firebase Semi-live</a><br /></li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/@mikru168/swiftui-%E6%B7%BA%E7%8E%A9-swiftui-%E7%94%A8%E5%85%B6%E5%BB%BA%E6%A7%8B%E4%B8%80%E7%B0%A1%E5%96%AE%E7%9A%84-app-2f2477bd49d7">ç°¡ä»‹ SwiftUI &amp; ç”¨å…¶å»ºæ§‹ä¸€ç°¡å–®çš„ APP </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/@SteelKiwiDev/swiftui-vs-uikit-benefits-and-drawbacks-6a540cced684">SwiftUI vs UIKit: Benefits and Drawbacks</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/swiftui-introduction/">SwiftUI åˆé«”é©—ï¼š å»ºæ§‹ä¸€å€‹ç°¡å–® Appã€€è®“ä½ äº†è§£ SwiftUI æœ‰å¤šå¼·å¤§ï¼</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://stackoverflow.com/questions/56514998/find-all-available-images-for-imagesystemname-in-swiftui">Find all available images for Image(systemName:) in SwiftUI</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8%E7%8B%80%E6%85%8B%E8%A8%AD%E8%A8%88-swiftui-%E7%95%AB%E9%9D%A2-%E8%AA%8D%E8%AD%98-state-property-binding-27fea6885ead">ç”¨ç‹€æ…‹è¨­è¨ˆ SwiftUI ç•«é¢ â€” èªè­˜ @State propertyï¼Œbinding &amp; Toggle</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://juejin.cn/post/6844903924084768776">[è­¯]ç†è§£ SwiftUI è£¡çš„å±¬æ€§è£é£¾å™¨</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%AE%A2%E8%A3%BD-ui-%E5%85%83%E4%BB%B6%E6%A8%A3%E5%BC%8F%E7%9A%84-swiftui-modifier-b31ff65c1f0d">å®¢è£½ UI å…ƒä»¶æ¨£å¼çš„ SwiftUI modifier</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E8%A3%81%E5%88%87%E5%BD%A2%E7%8B%80%E7%9A%84-clipshape-mask-4fc49b34141">SwiftUI è£åˆ‡å½¢ç‹€çš„ clipShape &amp; mask</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/swiftui-border/">SwiftUI å°æŠ€å·§ï¼šåˆ©ç”¨ border ä¿®é£¾ç¬¦ã€€è¼•é¬†ç‚ºæŒ‰éˆ•æˆ–æ–‡æœ¬ç¹ªè£½é‚Šæ¡†</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-create-a-list-of-dynamic-items">How to create a list of dynamic items</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/quick-start/swiftui/what-is-the-binding-property-wrapper">What is the @Binding property wrapper?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/@nwyyy/swift%E7%AD%86%E8%A8%98-tab-bar-2ddba7d56587">iOSç­†è¨˜ï¼šTab Bar</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13">13</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com/swiftui-tabview/">Introducing SwiftUI TabView and Working with Tab Bar Customization</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14">14</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/quick-start/swiftui/what-is-the-environmentobject-property-wrapper">What is the @EnvironmentObject property wrapper?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15">15</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.youtube.com/watch?v=0i152oA3T3s">Lecture 9: Data Flow</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16">16</a></sup> <div class="footpara"><p class="footpara">
<a href="https://onevcat.com/2020/06/stateobject/">@StateObject å’Œ @ObservedObject çš„åŒºåˆ«å’Œä½¿ç”¨</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17">17</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.youtube.com/watch?v=cc23YTGZVbQ">iOS 13 SwiftUI Tutorial: Interactively Transition and Share Data between Views with SwiftUI</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.18" class="footnum" href="#fnr.18">18</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.raywenderlich.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started">Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.19" class="footnum" href="#fnr.19">19</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E7%B0%A1%E6%98%93%E8%AA%AA%E6%98%8Eswift-4-protocol-919b7f9cbaee">ã€ç°¡æ˜“èªªæ˜Swift 4ã€Protocol</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.20" class="footnum" href="#fnr.20">20</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/protocol-extension/">åˆ©ç”¨ Protocol Extension æ¸›å°‘é‡è¦†çš„ Codeã€€å¤§å¤§å¢å¼· Code çš„ç¶­è­·æ€§</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.21" class="footnum" href="#fnr.21">21</a></sup> <div class="footpara"><p class="footpara">
<a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html">Protocols</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.22" class="footnum" href="#fnr.22">22</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/swift-protocol/">Swifté–‹ç™¼æŒ‡å—ï¼šProtocolsèˆ‡Protocol Extensionsçš„ä½¿ç”¨å¿ƒæ³•</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.23" class="footnum" href="#fnr.23">23</a></sup> <div class="footpara"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10197366">Day-29 Swift èªæ³•(25) - å”å®š Protocol</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.24" class="footnum" href="#fnr.24">24</a></sup> <div class="footpara"><p class="footpara">
<a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in swift</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.25" class="footnum" href="#fnr.25">25</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-does-swiftui-use-structs-for-views">Why does SwiftUI use structs for views?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.26" class="footnum" href="#fnr.26">26</a></sup> <div class="footpara"><p class="footpara">
<a href="https://abhimuralidharan.medium.com/difference-between-a-struct-and-a-class-in-swift-53e08df73714">Difference between a struct and a class in Swift</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.27" class="footnum" href="#fnr.27">27</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-state-only-works-with-structs">Why @State only works with structs</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.28" class="footnum" href="#fnr.28">28</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/sharing-swiftui-state-with-observedobject">Sharing SwiftUI state with @ObservedObject</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.29" class="footnum" href="#fnr.29">29</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/@PhiJay/whats-this-some-in-swiftui-34e2c126d4c4">Whatâ€™s this â€œsomeâ€ in SwiftUI?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.30" class="footnum" href="#fnr.30">30</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/jeremy-xue-s-blog/swift-%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80-opaque-types-600ad5758b91">Swift ç¨‹å¼èªè¨€ â€” Opaque Types</a><br />
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Yung Chin, Yen</p>
<p class="date">Created: 2021-01-05 Tue 10:36</p>
</div>
</body>
</html>
