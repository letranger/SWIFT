<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-03-16 Tue 19:21 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Advanced Swift Ui</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Yung Chin, Yen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://letranger.github.io/org-html-themes/styles/purplereadtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://letranger.github.io/org-html-themes/styles/purplereadtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Advanced Swift Ui</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#SW-MVVM">1. MVVM</a>
<ul>
<li><a href="#org82dc20c">1.1. Design pattern</a></li>
<li><a href="#org1ca0d1e">1.2. What is the idea behind MVVM</a>
<ul>
<li><a href="#orgc0c0d69">1.2.1. Model</a></li>
<li><a href="#orgfe12f9e">1.2.2. View</a></li>
<li><a href="#org484e721">1.2.3. ViewModel</a></li>
<li><a href="#org7a56659">1.2.4. 為什麼要拆成三部份(What does it solve?)</a></li>
<li><a href="#orgd68da60">1.2.5. Limitations / Cons</a></li>
</ul>
</li>
<li><a href="#orgec2591d">1.3. DEMO</a></li>
<li><a href="#orgf21c534">1.4. Model 要用 Struct 或是 Class</a>
<ul>
<li><a href="#orgdfa6d12">1.4.1. Struct 與 Class 的不同性質</a></li>
<li><a href="#orga84d947">1.4.2. MVVM 中的 Model</a></li>
</ul>
</li>
<li><a href="#orgcab1343">1.5. DICE DEMO</a></li>
<li><a href="#org199c0bf">1.6. Further Reading Resources</a></li>
</ul>
</li>
<li><a href="#SW-Review">2. Review</a>
<ul>
<li><a href="#org6d92027">2.1. Data Model</a></li>
<li><a href="#org0139180">2.2. Basic UI</a>
<ul>
<li><a href="#orgf68808f">2.2.1. Change struct name (ContentView.swift)</a></li>
<li><a href="#orgc0564c2">2.2.2. classify files into the following group</a></li>
<li><a href="#org850aa84">2.2.3. Create basic UI</a>
<ul>
<li><a href="#orgb538445">2.2.3.1. TaskListView.swift</a></li>
<li><a href="#org1baeaac">2.2.3.2. Extract the task cell</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org1042c11">2.3. MVVM</a>
<ul>
<li><a href="#org1b30f0e">2.3.1. ViewModel</a>
<ul>
<li><a href="#org2bc55e4">2.3.1.1. Diagram for now</a></li>
<li><a href="#orgc3c4aad">2.3.1.2. Model for the future</a></li>
<li><a href="#org9fe3422">2.3.1.3. TaskCellViewModel</a></li>
<li><a href="#org4782682">2.3.1.4. TaskListViewModel</a></li>
</ul>
</li>
<li><a href="#orgaa103a7">2.3.2. View</a></li>
</ul>
</li>
<li><a href="#org83e5a38">2.4. New task</a>
<ul>
<li><a href="#orga8d7f47">2.4.1. View</a>
<ul>
<li><a href="#orgf326eca">2.4.1.1. NewTaskView.swift</a></li>
<li><a href="#org9223624">2.4.1.2. TaskListView.swift</a></li>
</ul>
</li>
<li><a href="#org03939cf">2.4.2. ViewModel</a>
<ul>
<li><a href="#orgda8a068">2.4.2.1. TaskListViewModel.swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb254860">2.5. Delete task</a>
<ul>
<li><a href="#org676f81c">2.5.1. View</a>
<ul>
<li><a href="#org6d00a45">2.5.1.1. TaskListView.swift</a></li>
</ul>
</li>
<li><a href="#org671f7c7">2.5.2. ViewModel</a>
<ul>
<li><a href="#org52fd5c0">2.5.2.1. TaskListViewModel.swift</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org95423a3">2.6. enum v.s. picker</a>
<ul>
<li><a href="#org9e77e41">2.6.1. Model</a>
<ul>
<li><a href="#org0a87daa">2.6.1.1. Model.swift</a></li>
</ul>
</li>
<li><a href="#org99491b6">2.6.2. View</a>
<ul>
<li><a href="#orgcf55ab0">2.6.2.1. TaskListView.swift</a></li>
<li><a href="#orgc713ef5">2.6.2.2. NewTaskView.swift</a></li>
</ul>
</li>
<li><a href="#orgd56a3ee">2.6.3. ViewModel</a>
<ul>
<li><a href="#org873829a">2.6.3.1. TaskCellViewModel.swift</a></li>
</ul>
</li>
<li><a href="#org3ec30d1">2.6.4. 結果</a></li>
</ul>
</li>
<li><a href="#org13883e1">2.7. Tap on Icon to change completion and priority status</a>
<ul>
<li><a href="#org9e03a8c">2.7.1. View</a>
<ul>
<li><a href="#org1c39308">2.7.1.1. TaskListView.swift</a></li>
</ul>
</li>
<li><a href="#orgd39fdf3">2.7.2. ViewModel</a>
<ul>
<li><a href="#orgc4a86a9">2.7.2.1. TaskCellViewModel.swift</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#SW-AdvFuncs">3. Advance function</a>
<ul>
<li><a href="#org12bd79e">3.1. filter()</a>
<ul>
<li><a href="#org9464a4e">3.1.1. 在 closure 回傳每個元素使否符合判斷式的結果，決定最後 filter() 回傳的元素集合。</a></li>
<li><a href="#orgf3db650">3.1.2. 將一、三象限的點過濾出來</a></li>
</ul>
</li>
<li><a href="#org7ed2583">3.2. map()</a>
<ul>
<li><a href="#org2c85d20">3.2.1. 透過map()將整數陣列轉化成兩倍數值與字串的陣列。</a>
<ul>
<li><a href="#org026e6ad">3.2.1.1. map()如何將一組二度空間的點對 X 軸與 Y 軸做鏡射。</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org59aafc2">3.3. debounce</a>
<ul>
<li><a href="#org491c3b1">3.3.1. Example</a>
<ul>
<li><a href="#orgc64dae3">3.3.1.1. UI</a></li>
<li><a href="#org788677a">3.3.1.2. ViewModel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#org3e12375">4. Web API: URLSession v.s. JSONDecoder</a>
<ul>
<li><a href="#orgbfa4f7d">4.1. Demo 1</a>
<ul>
<li><a href="#org4efbce8">4.1.1. ContentView.swift</a></li>
</ul>
</li>
<li><a href="#org6af4b6f">4.2. Demo 2</a>
<ul>
<li><a href="#org3f72b8d">4.2.1. MVVM</a></li>
<li><a href="#org3eb7be0">4.2.2. FlowModel.swift</a></li>
<li><a href="#org3b9121a">4.2.3. ContentView.swift</a></li>
<li><a href="#orgd8e582a">4.2.4. Flow.swift</a></li>
<li><a href="#orgb472bc8">4.2.5. Result</a></li>
</ul>
</li>
<li><a href="#orgefb64ea">4.3. 公開資料平台</a></li>
<li><a href="#orgeab131f">4.4. Further Reading</a></li>
</ul>
</li>
<li><a href="#SW-Protocols">5. Protocols</a>
<ul>
<li><a href="#orgf337bc9">5.1. Protocol Syntax</a>
<ul>
<li><a href="#orge389169">5.1.1. Syntax</a></li>
<li><a href="#orgb838af0">5.1.2. DEMO</a></li>
<li><a href="#org3168773">5.1.3. Adding property requirements</a></li>
<li><a href="#orge0e2afc">5.1.4. Protocols with mutating methods</a></li>
<li><a href="#org32a57d2">5.1.5. Initializer Requirements</a></li>
</ul>
</li>
<li><a href="#org833adc0">5.2. DEMO</a></li>
<li><a href="#org5d0eae6">5.3. 範例</a>
<ul>
<li><a href="#orgb9c82c8">5.3.1. 版本 1</a></li>
<li><a href="#org6a9c94c">5.3.2. 版本 2</a></li>
<li><a href="#orgee324af">5.3.3. 版本 3</a></li>
</ul>
</li>
<li><a href="#org5fffb1f">5.4. mutating</a></li>
<li><a href="#org613983e">5.5. 擴充 protocol</a></li>
<li><a href="#orgb7d71a4">5.6. Further Reading</a></li>
</ul>
</li>
<li><a href="#SW-enum">6. Enum</a>
<ul>
<li><a href="#org47bcd83">6.1. without enum</a></li>
<li><a href="#orge584177">6.2. with enum</a></li>
<li><a href="#org7ce2e19">6.3. enum的rawValue</a></li>
<li><a href="#org342c30d">6.4. enum v.s. switch</a></li>
<li><a href="#orgd011c48">6.5. Swift列舉中最強大的功能之一：associated values</a></li>
</ul>
</li>
<li><a href="#org96e0ebb">7. Struct v.s. Class</a>
<ul>
<li><a href="#org5128251">7.1. What is in class/struct</a>
<ul>
<li><a href="#org1e29943">7.1.1. What is a class in Swift?</a></li>
<li><a href="#orgb74d962">7.1.2. What is a struct in Swift?</a></li>
<li><a href="#org5e13d1a">7.1.3. What are the differences between a struct and a class?</a>
<ul>
<li><a href="#orgf4edfbd">7.1.3.1. The benefit of mutation in safety</a></li>
<li><a href="#orgc626532">7.1.3.2. Structs get an initializer for free</a></li>
<li><a href="#org81e600c">7.1.3.3. Classes allow inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgec055ea">7.2. 如何決擇? / When should I go for a struct and when for a class?</a>
<ul>
<li><a href="#orgc3dd039">7.2.1. You should use a class when:</a></li>
<li><a href="#org6ef3812">7.2.2. You should use a struct when:</a></li>
<li><a href="#orgd2138fe">7.2.3. Try to go for a struct by default.</a></li>
</ul>
</li>
<li><a href="#org3c83e9b">7.3. DEMO</a></li>
</ul>
</li>
<li><a href="#some">8. <span class="todo TODO">TODO</span> some</a>
<ul>
<li><a href="#orgb5ae245">8.1. Generics</a>
<ul>
<li><a href="#org9555bfe">8.1.1. 問題</a></li>
<li><a href="#orgf424856">8.1.2. 解決方案</a></li>
</ul>
</li>
<li><a href="#orgc191236">8.2. opaque</a></li>
</ul>
</li>
<li><a href="#advanced">9. <span class="todo TODO">TODO</span> 進階主題</a></li>
</ul>
</div>
</div>

<div id="outline-container-SW-MVVM" class="outline-2">
<h2 id="SW-MVVM"><span class="section-number-2">1</span> MVVM</h2>
<div class="outline-text-2" id="text-SW-MVVM">
</div>
<div id="outline-container-org82dc20c" class="outline-3">
<h3 id="org82dc20c"><span class="section-number-3">1.1</span> Design pattern</h3>
<div class="outline-text-3" id="text-1-1">
<p>
MVVM 的概念最早應該是在 2005 年由 Microsoft的<a href="https://blogs.msdn.microsoft.com/johngossman/2005/10/08/introduction-to-modelviewviewmodel-pattern-for-building-wpf-apps/">John Gossman</a>提出來的，它的概念是，整個 Swift project 會拆分成三個部份: View、ViewModel、Model，其中 View 的角色就是單純的視覺元件，像是按鈕、文字標籤等等，在 View 裡面不會有邏輯、狀態等等，單純就是個呈現資料的元件。而要讓 View 呈現資料，最直覺的方式，就是把 View 跟 Model 做綁定，讓 View 的元件跟著 Model 一起做變化。但這樣會有個問題，就是通常 Model 來的資料，並不是簡單就能轉換成 View 的樣式的，這時候就需要有個物件，介在 View 跟 Model 的中間，這個物件會掌管這些跟 View 高度相關的邏輯的操作，像是轉換 Date 物件變成人看得懂的文字格式等，稱之為 ViewModel。上面的概念可以畫成這樣的資料流：<br />
</p>


<div id="org403c684" class="figure">
<p><img src="images/MVVM-Basic.jpg" alt="MVVM-Basic.jpg" width="600" /><br />
</p>
<p><span class="figure-number">Figure 1: </span>MVVM Architecture</p>
</div>

<p>
在 iOS 開發上，依照上述 MVVM 的定義，ContentView 變成一個單純的 View，而我們會另外產生一個 ViewModel 來負責 presentational logic 跟部份的 controller logic。所以在View裡面，就只會有：<br />
</p>
<ol class="org-ol">
<li>View logic，所有跟呈現有關的 Code<br /></li>
<li>綁定 ViewModel<br /></li>
</ol>
<p>
而在 ViewModel 裡面，則是負責兩個部份：<br />
</p>
<ol class="org-ol">
<li>Controller logic，如 pagination, error handling,… etc<br /></li>
<li>Presentation logic，提供接口讓 View 綁定(binding)(提供適合在View中呈現的資料)<br /></li>
</ol>
<p>
開發上，一旦 View 綁定好 ViewModel 的資料，在撰寫商業邏輯的時候，就可以不用管包括動畫、轉場、main thread 等等跟 View 相關的問題，因為分工明確所以就不會有寫起來綁手綁腳的感覺。更棒的是，並且因為 ViewModel 是一個單純的、沒有相依於 View 的物件，所以要做測試簡單多了！<br />
<a href="https://www.codementor.io/@koromiko/mvvm-app-cl1wvw2sh">資料來源: 歡迎來到真實世界 - 原來是那個傳說中的MVVM阿</a><br />
</p>
</div>
</div>
<div id="outline-container-org1ca0d1e" class="outline-3">
<h3 id="org1ca0d1e"><span class="section-number-3">1.2</span> What is the idea behind MVVM</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orgc0c0d69" class="outline-4">
<h4 id="orgc0c0d69"><span class="section-number-4">1.2.1</span> Model</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Business logic<br /></li>
<li>UI Independent<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgfe12f9e" class="outline-4">
<h4 id="orgfe12f9e"><span class="section-number-4">1.2.2</span> View</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>Presentation<br /></li>
<li>User interaction<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org484e721" class="outline-4">
<h4 id="org484e721"><span class="section-number-4">1.2.3</span> ViewModel</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>Presentation logic<br /></li>
<li>Glue between Model and View<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org7a56659" class="outline-4">
<h4 id="org7a56659"><span class="section-number-4">1.2.4</span> 為什麼要拆成三部份(What does it solve?)</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>MVC - Massive View Controller<br /></li>
<li>Testability<br /></li>
<li>Code organization<br /></li>
<li>Code reusability<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgd68da60" class="outline-4">
<h4 id="orgd68da60"><span class="section-number-4">1.2.5</span> Limitations / Cons</h4>
<div class="outline-text-4" id="text-1-2-5">
<ul class="org-ul">
<li>Requires binding<br /></li>
<li>Potential for boilerplate code<br /></li>
<li>Overkill for simple views and logic<br /></li>
<li>Doesn&rsquo;t cover every case<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgec2591d" class="outline-3">
<h3 id="orgec2591d"><span class="section-number-3">1.3</span> DEMO</h3>
<div class="outline-text-3" id="text-1-3">
<p>
以&ldquo;推薦書單&rdquo;的 APP 為例:<br />
</p>
<ul class="org-ul">
<li><p>
Model: 包含書名、作者、出版社&#x2026;.，而實際的資料來源可能是雲端資料庫(Firebase)、Web API、本機資料庫(Core data)。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Book</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">let</span> author: <span style="color: #c678dd;">String</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">let</span> dateReleased: <span style="color: #c678dd;">String</span>
<span class="linenr">5: </span>    <span style="color: #51afef;">let</span> publishCamp: <span style="color: #c678dd;">String</span>
<span class="linenr">6: </span>    <span style="color: #51afef;">let</span> publishCity: <span style="color: #c678dd;">String</span>
<span class="linenr">7: </span>    <span style="color: #51afef;">let</span> isFavorite: <span style="color: #c678dd;">Bool</span>
<span class="linenr">8: </span>}
</pre>
</div></li>
<li>View: 在 APP 畫面上呈現 Model 中資料的元件，如 Text, Image, Button, List&#x2026;..<br /></li>
<li><p>
ViewModel: 將 Model 中的資料取出，供 View 呈現，或是接受 View 輸入的資料，存回 Model。以&ldquo;推薦書單 APP&rdquo;為例，其 ViewModel 可能包含如下 struct:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">BookDetailViewModel</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> book: Book
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> isFavorite: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">init</span>(book: Book) {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span> = book
<span class="linenr"> 8: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">isFavorite</span> = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span> {
<span class="linenr">12: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #c678dd;">title</span>
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> author: <span style="color: #c678dd;">String</span> {
<span class="linenr">16: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #c678dd;">author</span>
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> dateReleased: <span style="color: #c678dd;">String</span> {
<span class="linenr">20: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">dateReleased</span>
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21576;&#29694;&#26178;&#35201;&#27714;&#20197; &#36960;&#27969;&#20986;&#29256;&#31038;(&#21488;&#21271;&#24066;) &#30340;&#26684;&#24335;&#20358;&#21576;&#29694;</span>
<span class="linenr">24: </span>    <span style="color: #51afef;">var</span> publisher: <span style="color: #c678dd;">String</span> {
<span class="linenr">25: </span>        <span style="color: #51afef;">let</span> output = <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">publishCamp</span> + <span style="color: #98be65;">"("</span> + <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">book</span>.<span style="color: #dcaeea;">publishCity</span> + <span style="color: #98be65;">")"</span>
<span class="linenr">26: </span>        <span style="color: #51afef;">return</span> output
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
</pre>
</div>
<p>
從 Model 中可以看到書籍的記錄欄位只有&ldquo;出版社&rdquo;(publishCamp)和&ldquo;出版地點&rdquo;(publishCity)，但若 app 對顯示結果的格式要求為&ldquo;出版社(出版地點)&rdquo;，則可以在 ViewModel 中來處理。<br />
此外，如果在 View 上有一個 Favorite Button，則當 user 點了 Favorite 後，ViewModel 應負責將 struct 中的 isFavorite 改存 True，並回存至 Model 中。Model 的資料只能透過 ViewModel 來新增刪除，View 無法直接染指。<br />
Model 與 UI 完全無關，單純用來儲存資料，ViewModel 為 Model 與 View 溝通的橋樑。<br />
</p></li>
</ul>
</div>
</div>
<div id="outline-container-orgf21c534" class="outline-3">
<h3 id="orgf21c534"><span class="section-number-3">1.4</span> Model 要用 Struct 或是 Class</h3>
<div class="outline-text-3" id="text-1-4">
<p>
<a href="https://www.appcoda.com.tw/swift-class/">資料來源:Swift Class vs Struct：設計 Model 時，該用 Struct 還是 Class 呢？</a><br />
</p>
</div>
<div id="outline-container-orgdfa6d12" class="outline-4">
<h4 id="orgdfa6d12"><span class="section-number-4">1.4.1</span> Struct 與 Class 的不同性質</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
首先，當我們指派 (assign) 一個實體給一個辨識符（identifier，也就是變數／常數名）的時候，如果該實體是 struct 的話，該辨識符所容納的會是該實體的所有內容；但如果它是 class 的話，這個辨識符就只會容納存放該實體的位址：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#29992; struct &#23450;&#32681; Dog&#12290;</span>
<span class="linenr"> 2: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Dog</span> {
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> name = <span style="color: #98be65;">"Bart"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#25972;&#20491; Dog &#23526;&#39636;&#37117;&#26371;&#34987;&#23384;&#21040; myDog &#35041;&#12290;</span>
<span class="linenr"> 6: </span><span style="color: #51afef;">var</span> myDog = <span style="color: #c678dd;">Dog</span>()
<span class="linenr"> 7: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#29992; class &#23450;&#32681; Cat&#12290;</span>
<span class="linenr"> 8: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Cat</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name = <span style="color: #98be65;">"Mimi"</span>
<span class="linenr">10: </span>}
<span class="linenr">11: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">myCat &#21482;&#26371;&#20786;&#23384; Cat &#23526;&#39636;&#30340;&#20301;&#22336;&#12290;Cat &#23526;&#39636;&#26412;&#36523;&#26371;&#34987;&#23384;&#21040;&#21029;&#30340;&#22320;&#26041;&#12290;</span>
<span class="linenr">12: </span><span style="color: #51afef;">var</span> myCat = <span style="color: #c678dd;">Cat</span>()
</pre>
</div>
<p>
也就是說，當我們使用辨識符的時候，如果它的型別是 struct 的話，我們在操作的實體都會是本地的。但是當我們在操作 class 型別的辨識符的話，那麼我們實際上是透過辨識符在操作一個遠端的實體。所以，當我們更改這些實體的屬性的時候，它們的行為就不太一樣了：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992; struct&#12290;</span>
<span class="linenr"> 2: </span><span style="color: #51afef;">var</span> herDog = <span style="color: #c678dd;">Dog</span>() {
<span class="linenr"> 3: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#22914;&#26524; herDog &#26377;&#35722;&#21205;&#30340;&#35441;&#23601;&#39023;&#31034;&#35338;&#24687;&#12290;</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">didSet</span> {
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Her dog is changed!"</span>)
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>herDog.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Starlord"</span>
<span class="linenr"> 9: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Her dog is changed!</span>
<span class="linenr">10: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992; class&#12290;</span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> herCat = <span style="color: #c678dd;">Cat</span>() {
<span class="linenr">12: </span>    <span style="color: #51afef;">didSet</span> {
<span class="linenr">13: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Her cat is changed!"</span>)
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>herCat.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Mumu"</span>
<span class="linenr">17: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#27794;&#26377;&#35338;&#24687;&#12290;</span>
</pre>
</div>
<p>
怎麼會有這樣的差別呢？因為 herDog 儲存了所有的 Dog 實體內容，所以任何 Dog 實體的屬性的變動，就等於說 herDog 本身有變動。然而，herCat 並沒有儲存 Cat 實體的內容，所以 Cat 實體屬性的變動是在別的地方發生的，且 herCat 本身所儲存的 Cat 實體位址並沒有任何的改變。<br />
由圖<a href="#org403c684">1</a>可看出，<br />
</p>
</div>
</div>
<div id="outline-container-orga84d947" class="outline-4">
<h4 id="orga84d947"><span class="section-number-4">1.4.2</span> MVVM 中的 Model</h4>
</div>
</div>
<div id="outline-container-orgcab1343" class="outline-3">
<h3 id="orgcab1343"><span class="section-number-3">1.5</span> DICE DEMO</h3>
</div>
<div id="outline-container-org199c0bf" class="outline-3">
<h3 id="org199c0bf"><span class="section-number-3">1.6</span> Further Reading Resources</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=1IlUBHvgY8Q&amp;t=29s">SwiftUI MVVM Programming with ObservableObject @Published @ObservedObject</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=LntH6moCuo0">SwiftUI 2.0: MVVM - A Practical Approach</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=gkAV4D1nopA">SwiftUI Tip Calculator Using MVVM Design Pattern</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=cbqMkIG6Qeg">Understanding MVVM Design Pattern</a>: 講的超清楚<br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=EhtK_H9LsYQ">MVVM SwiftUI - Model View ViewModel Pattern - Getting Started</a><br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=LntH6moCuo0">https://www.youtube.com/watch?v=LntH6moCuo0</a><br /></li>
<li>Video: <a href="https://www.youtube.com/watch?v=sWx8TtRBOfk">MVVM in Practice - RWDevCon Session - raywenderlich.com</a><br /></li>
<li>GitHub: <a href="https://github.com/rebeloper/SwiftUIMVVM.git">https://github.com/rebeloper/SwiftUIMVVM.git</a><br /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-SW-Review" class="outline-2">
<h2 id="SW-Review"><span class="section-number-2">2</span> Review</h2>
<div class="outline-text-2" id="text-SW-Review">
<ul class="org-ul">
<li>Functions: Tasks management project: task listing, adding, removing, editing<br /></li>
<li>Technoloties: View navigation, variable sharing, data model<br /></li>
</ul>
<p>
參考資料: <a href="https://medium.com/better-programming/replicating-the-ios-reminders-app-part1-44211a7b7029">Building a To-Do List App with SwiftUI, Combine, and Firebase</a><br />
</p>
</div>
<div id="outline-container-org6d92027" class="outline-3">
<h3 id="org6d92027"><span class="section-number-3">2.1</span> Data Model</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span style="color: #5B6268;">//</span>
<span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Task.swift</span>
<span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span style="color: #5B6268;">//</span>
<span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/18.</span>
<span style="color: #5B6268;">//</span>

<span style="color: #51afef;">import</span> Foundation


<span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Task</span>: Identifiable {
    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
    <span style="color: #51afef;">var</span> completed: <span style="color: #c678dd;">Bool</span>
}

<span style="color: #51afef; font-weight: bold;">#if</span> DEBUG
<span style="color: #51afef;">let</span> testDataTasks = [
    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Implement UI"</span>, completed: <span style="color: #a9a1e1;">true</span>),
    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Share data"</span>, completed: <span style="color: #a9a1e1;">false</span>),
    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Create Chart"</span>, completed: <span style="color: #a9a1e1;">false</span>),
    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Connect to Firebase"</span>, completed: <span style="color: #a9a1e1;">false</span>),
    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"PROFIT!!!"</span>, completed: <span style="color: #a9a1e1;">false</span>)
]
<span style="color: #51afef; font-weight: bold;">#endif</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0139180" class="outline-3">
<h3 id="org0139180"><span class="section-number-3">2.2</span> Basic UI</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-orgf68808f" class="outline-4">
<h4 id="orgf68808f"><span class="section-number-4">2.2.1</span> Change struct name (ContentView.swift)</h4>
<div class="outline-text-4" id="text-2-2-1">
<ol class="org-ol">
<li>right click on struct ContentView<br /></li>
<li>Refactor<br /></li>
<li>Rename&#x2026;: to <b>TaskListView</b><br /></li>
<li>The file name on navigator (left panel in Xcode) will be renamed to <b>TaskListView.swift</b><br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgc0564c2" class="outline-4">
<h4 id="orgc0564c2"><span class="section-number-4">2.2.2</span> classify files into the following group</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>App<br /></li>
<li>View<br /></li>
<li><p>
Model<br />
</p></li>
</ul>

<div id="org6b1bb20" class="figure">
<p><img src="images/renameStruct.jpg" alt="renameStruct.jpg" /><br />
</p>
</div>
</div>
</div>
<div id="outline-container-org850aa84" class="outline-4">
<h4 id="org850aa84"><span class="section-number-4">2.2.3</span> Create basic UI</h4>
<div class="outline-text-4" id="text-2-2-3">
</div>
<div id="outline-container-orgb538445" class="outline-5">
<h5 id="orgb538445"><span class="section-number-5">2.2.3.1</span> TaskListView.swift</h5>
<div class="outline-text-5" id="text-2-2-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">let</span> tasks = testDataTasks
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">15: </span>                <span style="color: #c678dd;">List</span>(tasks) { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"circle"</span>)
<span class="linenr">17: </span>                    <span style="color: #c678dd;">Text</span>(task.<span style="color: #c678dd;">title</span>)
<span class="linenr">18: </span>                }
<span class="linenr">19: </span>                <span style="color: #c678dd;">HStack</span>(alignment: .<span style="color: #c678dd;">center</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">20: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">21: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">22: </span>                }).<span style="color: #c678dd;">padding</span>()
<span class="linenr">23: </span>
<span class="linenr">24: </span>            }).<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Tasks"</span>)
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">30: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">31: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>}
<span class="linenr">34: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1baeaac" class="outline-5">
<h5 id="org1baeaac"><span class="section-number-5">2.2.3.2</span> Extract the task cell</h5>
<div class="outline-text-5" id="text-2-2-3-2">
<ol class="org-ol">
<li>Grouping the Image and Text with HStack<br /></li>
<li>cmd+click Htack<br /></li>
<li>Extract SubView<br /></li>
<li>Fix the compile error(inject needed variable)<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">let</span> tasks = testDataTasks
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">15: </span>                <span style="color: #c678dd;">List</span>(tasks) { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>                    <span style="color: #c678dd;">TaskCell</span>(task: task)
<span class="linenr">17: </span>                }
<span class="linenr">18: </span>                <span style="color: #c678dd;">HStack</span>(alignment: .<span style="color: #c678dd;">center</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">19: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">20: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">21: </span>                }).<span style="color: #c678dd;">padding</span>()
<span class="linenr">22: </span>
<span class="linenr">23: </span>            }).<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Tasks"</span>)
<span class="linenr">24: </span>        }
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">29: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">30: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
<span class="linenr">33: </span>
<span class="linenr">34: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">35: </span>    <span style="color: #51afef;">var</span> task: Task
<span class="linenr">36: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">37: </span>        HStack {
<span class="linenr">38: </span>            <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"circle"</span>)
<span class="linenr">39: </span>            <span style="color: #c678dd;">Text</span>(task.<span style="color: #c678dd;">title</span>)
<span class="linenr">40: </span>        }
<span class="linenr">41: </span>    }
<span class="linenr">42: </span>}
<span class="linenr">43: </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org1042c11" class="outline-3">
<h3 id="org1042c11"><span class="section-number-3">2.3</span> MVVM</h3>
<div class="outline-text-3" id="text-2-3">
<p>
以MVVM架構來開發project<br />
</p>
</div>
<div id="outline-container-org1b30f0e" class="outline-4">
<h4 id="org1b30f0e"><span class="section-number-4">2.3.1</span> ViewModel</h4>
<div class="outline-text-4" id="text-2-3-1">
</div>
<div id="outline-container-org2bc55e4" class="outline-5">
<h5 id="org2bc55e4"><span class="section-number-5">2.3.1.1</span> Diagram for now</h5>
<div class="outline-text-5" id="text-2-3-1-1">

<div class="figure">
<p><img src="images/mvvm-d1.png" alt="mvvm-d1.png" /><br />
</p>
</div>
</div>
</div>

<div id="outline-container-orgc3c4aad" class="outline-5">
<h5 id="orgc3c4aad"><span class="section-number-5">2.3.1.2</span> Model for the future</h5>
<div class="outline-text-5" id="text-2-3-1-2">

<div class="figure">
<p><img src="images/mvvm-d2.png" alt="mvvm-d2.png" /><br />
</p>
</div>
</div>
</div>

<div id="outline-container-org9fe3422" class="outline-5">
<h5 id="org9fe3422"><span class="section-number-5">2.3.1.3</span> TaskCellViewModel</h5>
<div class="outline-text-5" id="text-2-3-1-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskCellViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskCellViewModel</span>: <span style="color: #c678dd;">ObservableObject</span>, Identifiable  {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> task: Task
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> completionStateIconName = <span style="color: #98be65;">""</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> cancellables = <span style="color: #c678dd;">Set</span>&lt;AnyCancellable&gt;()
<span class="linenr">16: </span>    <span style="color: #51afef;">init</span>(task: Task) {
<span class="linenr">17: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span> = task
<span class="linenr">18: </span>        $task
<span class="linenr">19: </span>            .<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">20: </span>                <span style="color: #51afef;">return</span> task.<span style="color: #c678dd;">completed</span> ? <span style="color: #98be65;">"checkmark.circle.fill"</span> : <span style="color: #98be65;">"circle"</span>
<span class="linenr">21: </span>            }
<span class="linenr">22: </span>            .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #dcaeea;">completionStateIconName</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">23: </span>            .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellables)
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4782682" class="outline-5">
<h5 id="org4782682"><span class="section-number-5">2.3.1.4</span> TaskListViewModel</h5>
<div class="outline-text-5" id="text-2-3-1-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskListViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskListMiewModel</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> taskCellViewModels = [TaskCellViewModel]()
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">15: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span> = testDataTasks.<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>            <span style="color: #c678dd;">TaskCellViewModel</span>(task: task)
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgaa103a7" class="outline-4">
<h4 id="orgaa103a7"><span class="section-number-4">2.3.2</span> View</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
TaskListView.swift<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">14: </span>        NavigationView {
<span class="linenr">15: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">16: </span>                <span style="color: #c678dd;">List</span>(taskListVM.<span style="color: #dcaeea;">taskCellViewModels</span>) { task <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>                    <span style="color: #c678dd;">TaskCell</span>(taskCellVM: task)
<span class="linenr">18: </span>                }
<span class="linenr">19: </span>                <span style="color: #c678dd;">HStack</span>(alignment: .<span style="color: #c678dd;">center</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">20: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">21: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">22: </span>                }).<span style="color: #c678dd;">padding</span>()
<span class="linenr">23: </span>
<span class="linenr">24: </span>            }).<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">"Tasks"</span>)
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">30: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">31: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>}
<span class="linenr">34: </span>
<span class="linenr">35: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">36: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskCellVM: TaskCellViewModel
<span class="linenr">37: </span>
<span class="linenr">38: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">39: </span>        HStack {
<span class="linenr">40: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">completionStateIconName</span>)
<span class="linenr">41: </span>            <span style="color: #c678dd;">Text</span>(taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">title</span>)
<span class="linenr">42: </span>        }
<span class="linenr">43: </span>    }
<span class="linenr">44: </span>}
<span class="linenr">45: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org83e5a38" class="outline-3">
<h3 id="org83e5a38"><span class="section-number-3">2.4</span> New task</h3>
<div class="outline-text-3" id="text-2-4">
<p>
加入新增task功能，真正的新增功能由ViewModel實作，View負責界面及呼叫該功能<br />
</p>
</div>
<div id="outline-container-orga8d7f47" class="outline-4">
<h4 id="orga8d7f47"><span class="section-number-4">2.4.1</span> View</h4>
<div class="outline-text-4" id="text-2-4-1">
</div>
<div id="outline-container-orgf326eca" class="outline-5">
<h5 id="orgf326eca"><span class="section-number-5">2.4.1.1</span> NewTaskView.swift</h5>
<div class="outline-text-5" id="text-2-4-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">NewTaskView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">NewTaskView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> taskTitle: <span style="color: #c678dd;">String</span> = <span style="color: #98be65;">""</span>
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@Environment</span>(\.<span style="color: #dcaeea;">presentationMode</span>) <span style="color: #51afef;">var</span> presentation
<span class="linenr">15: </span>
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">17: </span>        VStack {
<span class="linenr">18: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">19: </span>                .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">largeTitle</span>)
<span class="linenr">20: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Enter task name"</span>, text: <span style="color: #51afef;">self</span>.$taskTitle)
<span class="linenr">21: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">22: </span>                taskListVM.<span style="color: #c678dd;">addTask</span>(task: <span style="color: #c678dd;">Task</span>(title: <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskTitle</span>, completed: <span style="color: #a9a1e1;">false</span>))
<span class="linenr">23: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">presentation</span>.<span style="color: #dcaeea;">wrappedValue</span>.<span style="color: #c678dd;">dismiss</span>()
<span class="linenr">24: </span>            }, label: {
<span class="linenr">25: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Done"</span>)
<span class="linenr">26: </span>            })
<span class="linenr">27: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">28: </span>        }.<span style="color: #c678dd;">padding</span>()
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">NewTaskView_Previews</span>: PreviewProvider {
<span class="linenr">33: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">34: </span>        <span style="color: #c678dd;">NewTaskView</span>()
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9223624" class="outline-5">
<h5 id="org9223624"><span class="section-number-5">2.4.1.2</span> TaskListView.swift</h5>
<div class="outline-text-5" id="text-2-4-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">15: </span>                <span style="color: #c678dd;">List</span>(taskListVM.<span style="color: #dcaeea;">taskCellViewModels</span>) { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>                    <span style="color: #c678dd;">TaskCell</span>(taskCellVM: task)
<span class="linenr">17: </span>                }
<span class="linenr">18: </span>
<span class="linenr">19: </span>
<span class="linenr">20: </span>                <span style="color: #c678dd;">HStack</span>(alignment: .<span style="color: #c678dd;">center</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">21: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">22: </span>                    <span style="color: #c678dd;">Button</span>(action: <span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@START_MENU_TOKEN@*/</span>{}<span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@END_MENU_TOKEN@*/</span>, label: {
<span class="linenr">23: </span>                        <span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@START_MENU_TOKEN@*/</span><span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Button"</span>)<span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@END_MENU_TOKEN@*/</span>
<span class="linenr">24: </span>                    })
<span class="linenr">25: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">26: </span>                }).<span style="color: #c678dd;">padding</span>()
<span class="linenr">27: </span>
<span class="linenr">28: </span>                .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"Tasks"</span>, displayMode: .<span style="color: #c678dd;">inline</span>)
<span class="linenr">29: </span>
<span class="linenr">30: </span>                .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">NavigationLink</span>(
<span class="linenr">31: </span>                                        destination: <span style="color: #c678dd;">NewTaskView</span>(taskListVM: taskListVM, taskTitle: <span style="color: #98be65;">""</span>),
<span class="linenr">32: </span>                                        label: {
<span class="linenr">33: </span>                                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">34: </span>                                        }))
<span class="linenr">35: </span>
<span class="linenr">36: </span>            })
<span class="linenr">37: </span>        }
<span class="linenr">38: </span>    }
<span class="linenr">39: </span>}
<span class="linenr">40: </span>
<span class="linenr">41: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">42: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">43: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">44: </span>    }
<span class="linenr">45: </span>}
<span class="linenr">46: </span>
<span class="linenr">47: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">48: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskCellVM: TaskCellViewModel
<span class="linenr">49: </span>
<span class="linenr">50: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">51: </span>        HStack {
<span class="linenr">52: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">completionStateIconName</span>)
<span class="linenr">53: </span>            <span style="color: #c678dd;">Text</span>(taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">title</span>)
<span class="linenr">54: </span>        }
<span class="linenr">55: </span>    }
<span class="linenr">56: </span>}
<span class="linenr">57: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org03939cf" class="outline-4">
<h4 id="org03939cf"><span class="section-number-4">2.4.2</span> ViewModel</h4>
<div class="outline-text-4" id="text-2-4-2">
</div>
<div id="outline-container-orgda8a068" class="outline-5">
<h5 id="orgda8a068"><span class="section-number-5">2.4.2.1</span> TaskListViewModel.swift</h5>
<div class="outline-text-5" id="text-2-4-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskListViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskListMiewModel</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> taskCellViewModels = [TaskCellViewModel]()
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">15: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span> = testDataTasks.<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>            <span style="color: #c678dd;">TaskCellViewModel</span>(task: task)
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>
<span class="linenr">20: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">addTask</span>(task: Task) {
<span class="linenr">21: </span>        <span style="color: #51afef;">let</span> task = <span style="color: #c678dd;">TaskCellViewModel</span>(task: task)
<span class="linenr">22: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span>.<span style="color: #c678dd;">append</span>(task)
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>}
<span class="linenr">25: </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb254860" class="outline-3">
<h3 id="orgb254860"><span class="section-number-3">2.5</span> Delete task</h3>
<div class="outline-text-3" id="text-2-5">
<p>
加入swipe進行刪除的功能，真正刪除的功能由ViewModel實作，View負責呼叫<br />
</p>
</div>
<div id="outline-container-org676f81c" class="outline-4">
<h4 id="org676f81c"><span class="section-number-4">2.5.1</span> View</h4>
<div class="outline-text-4" id="text-2-5-1">
</div>
<div id="outline-container-org6d00a45" class="outline-5">
<h5 id="org6d00a45"><span class="section-number-5">2.5.1.1</span> TaskListView.swift</h5>
<div class="outline-text-5" id="text-2-5-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">15: </span>                List {
<span class="linenr">16: </span>                    <span style="color: #c678dd;">ForEach</span>(taskListVM.<span style="color: #dcaeea;">taskCellViewModels</span>) { task <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>                        <span style="color: #c678dd;">TaskCell</span>(taskCellVM: task)
<span class="linenr">18: </span>
<span class="linenr">19: </span>                    }
<span class="linenr">20: </span>                    .<span style="color: #c678dd;">onDelete</span>(perform: { indexSet <span style="color: #51afef;">in</span>
<span class="linenr">21: </span>                        taskListVM.<span style="color: #c678dd;">deleteTask</span>(indexSet: indexSet)
<span class="linenr">22: </span>                    })
<span class="linenr">23: </span>                }
<span class="linenr">24: </span>
<span class="linenr">25: </span>                <span style="color: #c678dd;">HStack</span>(alignment: .<span style="color: #c678dd;">center</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">26: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">27: </span>                    <span style="color: #c678dd;">Button</span>(action: <span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@START_MENU_TOKEN@*/</span>{}<span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@END_MENU_TOKEN@*/</span>, label: {
<span class="linenr">28: </span>                        <span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@START_MENU_TOKEN@*/</span><span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Button"</span>)<span style="color: #5B6268;">/*</span><span style="color: #5B6268;">@END_MENU_TOKEN@*/</span>
<span class="linenr">29: </span>                    })
<span class="linenr">30: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">31: </span>                }).<span style="color: #c678dd;">padding</span>()
<span class="linenr">32: </span>
<span class="linenr">33: </span>                .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"Tasks"</span>, displayMode: .<span style="color: #c678dd;">inline</span>)
<span class="linenr">34: </span>
<span class="linenr">35: </span>                .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">NavigationLink</span>(
<span class="linenr">36: </span>                                        destination: <span style="color: #c678dd;">NewTaskView</span>(taskListVM: taskListVM, taskTitle: <span style="color: #98be65;">""</span>),
<span class="linenr">37: </span>                                        label: {
<span class="linenr">38: </span>                                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">39: </span>                                        }))
<span class="linenr">40: </span>
<span class="linenr">41: </span>            })
<span class="linenr">42: </span>        }
<span class="linenr">43: </span>    }
<span class="linenr">44: </span>}
<span class="linenr">45: </span>
<span class="linenr">46: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">47: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">48: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">49: </span>    }
<span class="linenr">50: </span>}
<span class="linenr">51: </span>
<span class="linenr">52: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">53: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskCellVM: TaskCellViewModel
<span class="linenr">54: </span>
<span class="linenr">55: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">56: </span>        HStack {
<span class="linenr">57: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">completionStateIconName</span>)
<span class="linenr">58: </span>            <span style="color: #c678dd;">Text</span>(taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">title</span>)
<span class="linenr">59: </span>        }
<span class="linenr">60: </span>    }
<span class="linenr">61: </span>}
<span class="linenr">62: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org671f7c7" class="outline-4">
<h4 id="org671f7c7"><span class="section-number-4">2.5.2</span> ViewModel</h4>
<div class="outline-text-4" id="text-2-5-2">
</div>
<div id="outline-container-org52fd5c0" class="outline-5">
<h5 id="org52fd5c0"><span class="section-number-5">2.5.2.1</span> TaskListViewModel.swift</h5>
<div class="outline-text-5" id="text-2-5-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskListViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskListMiewModel</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> taskCellViewModels = [TaskCellViewModel]()
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">15: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span> = testDataTasks.<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">16: </span>            <span style="color: #c678dd;">TaskCellViewModel</span>(task: task)
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>    }
<span class="linenr">19: </span>
<span class="linenr">20: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">addTask</span>(task: Task) {
<span class="linenr">21: </span>        <span style="color: #51afef;">let</span> task = <span style="color: #c678dd;">TaskCellViewModel</span>(task: task)
<span class="linenr">22: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span>.<span style="color: #c678dd;">append</span>(task)
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>
<span class="linenr">25: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">deleteTask</span>(indexSet: <span style="color: #c678dd;">IndexSet</span>) {
<span class="linenr">26: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellViewModels</span>.<span style="color: #c678dd;">remove</span>(atOffsets: indexSet)
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>}
<span class="linenr">29: </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org95423a3" class="outline-3">
<h3 id="org95423a3"><span class="section-number-3">2.6</span> enum v.s. picker</h3>
<div class="outline-text-3" id="text-2-6">
<p>
加入task的priority欄位(enum)<br />
</p>
</div>
<div id="outline-container-org9e77e41" class="outline-4">
<h4 id="org9e77e41"><span class="section-number-4">2.6.1</span> Model</h4>
<div class="outline-text-4" id="text-2-6-1">
<p>
以enum來表示task的不同優先權<br />
</p>
</div>
<div id="outline-container-org0a87daa" class="outline-5">
<h5 id="org0a87daa"><span class="section-number-5">2.6.1.1</span> Model.swift</h5>
<div class="outline-text-5" id="text-2-6-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Task.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/18.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">TaskPriority</span>: <span style="color: #c678dd;">String</span>, <span style="color: #c678dd;">CaseIterable</span>  {
<span class="linenr">11: </span>    <span style="color: #51afef;">case</span> high
<span class="linenr">12: </span>    <span style="color: #51afef;">case</span> medium
<span class="linenr">13: </span>    <span style="color: #51afef;">case</span> low
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Task</span>: Identifiable {
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> id = <span style="color: #c678dd;">UUID</span>()
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> priority: TaskPriority  <span style="color: #5B6268;">//</span><span style="color: #5B6268;">&#21482;&#26377;&#19977;&#31278;&#21487;&#33021;&#24615;</span>
<span class="linenr">20: </span>    <span style="color: #51afef;">var</span> completed: <span style="color: #c678dd;">Bool</span>
<span class="linenr">21: </span>}
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="color: #51afef; font-weight: bold;">#if</span> DEBUG
<span class="linenr">24: </span><span style="color: #51afef;">let</span> testDataTasks = [
<span class="linenr">25: </span>    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Implement UI"</span>, priority: .<span style="color: #c678dd;">medium</span>, completed: <span style="color: #a9a1e1;">true</span>),
<span class="linenr">26: </span>    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Share data"</span>, priority: .<span style="color: #c678dd;">high</span>, completed: <span style="color: #a9a1e1;">false</span>),
<span class="linenr">27: </span>    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Create Chart"</span>, priority: .<span style="color: #c678dd;">medium</span>, completed: <span style="color: #a9a1e1;">false</span>),
<span class="linenr">28: </span>    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"Connect to Firebase"</span>, priority: .<span style="color: #c678dd;">high</span>, completed: <span style="color: #a9a1e1;">false</span>),
<span class="linenr">29: </span>    <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">"PROFIT!!!"</span>, priority: .<span style="color: #c678dd;">high</span>, completed: <span style="color: #a9a1e1;">false</span>)
<span class="linenr">30: </span>]
<span class="linenr">31: </span><span style="color: #51afef; font-weight: bold;">#endif</span>
<span class="linenr">32: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org99491b6" class="outline-4">
<h4 id="org99491b6"><span class="section-number-4">2.6.2</span> View</h4>
<div class="outline-text-4" id="text-2-6-2">
</div>
<div id="outline-container-orgcf55ab0" class="outline-5">
<h5 id="orgcf55ab0"><span class="section-number-5">2.6.2.1</span> TaskListView.swift</h5>
<div class="outline-text-5" id="text-2-6-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">13: </span>        NavigationView {
<span class="linenr">14: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">15: </span>                List {
<span class="linenr">16: </span>                    <span style="color: #c678dd;">ForEach</span>(taskListVM.<span style="color: #dcaeea;">taskCellViewModels</span>) { task <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>                        <span style="color: #c678dd;">TaskCell</span>(taskCellVM: task)
<span class="linenr">18: </span>
<span class="linenr">19: </span>                    }
<span class="linenr">20: </span>                    .<span style="color: #c678dd;">onDelete</span>(perform: { indexSet <span style="color: #51afef;">in</span>
<span class="linenr">21: </span>                        taskListVM.<span style="color: #c678dd;">deleteTask</span>(indexSet: indexSet)
<span class="linenr">22: </span>                    })
<span class="linenr">23: </span>                }
<span class="linenr">24: </span>
<span class="linenr">25: </span>                .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"Tasks"</span>, displayMode: .<span style="color: #c678dd;">inline</span>)
<span class="linenr">26: </span>
<span class="linenr">27: </span>                .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">NavigationLink</span>(
<span class="linenr">28: </span>                                        destination: <span style="color: #c678dd;">NewTaskView</span>(taskListVM: taskListVM, taskTitle: <span style="color: #98be65;">""</span>, priority: TaskPriority.<span style="color: #c678dd;">low</span>),
<span class="linenr">29: </span>                                        label: {
<span class="linenr">30: </span>                                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">31: </span>                                        }))
<span class="linenr">32: </span>
<span class="linenr">33: </span>            })
<span class="linenr">34: </span>        }
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">39: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">40: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">41: </span>    }
<span class="linenr">42: </span>}
<span class="linenr">43: </span>
<span class="linenr">44: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">45: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskCellVM: TaskCellViewModel
<span class="linenr">46: </span>
<span class="linenr">47: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">48: </span>        HStack {
<span class="linenr">49: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">completionStateIconName</span>)
<span class="linenr">50: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">priorityStateIconName</span>)
<span class="linenr">51: </span>                .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">blue</span>)
<span class="linenr">52: </span>            <span style="color: #c678dd;">Text</span>(taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">title</span>)
<span class="linenr">53: </span>        }
<span class="linenr">54: </span>    }
<span class="linenr">55: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc713ef5" class="outline-5">
<h5 id="orgc713ef5"><span class="section-number-5">2.6.2.2</span> NewTaskView.swift</h5>
<div class="outline-text-5" id="text-2-6-2-2">
<p>
新增task時改以Picker來選取enum中的子類別<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">NewTaskView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">NewTaskView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListMiewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> taskTitle: <span style="color: #c678dd;">String</span> = <span style="color: #98be65;">""</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> priority : TaskPriority
<span class="linenr">14: </span>    <span style="color: #51afef;">@Environment</span>(\.<span style="color: #dcaeea;">presentationMode</span>) <span style="color: #51afef;">var</span> presentation
<span class="linenr">15: </span>
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">17: </span>        Form {
<span class="linenr">18: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">19: </span>                .<span style="color: #c678dd;">font</span>(.<span style="color: #dcaeea;">largeTitle</span>)
<span class="linenr">20: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Enter task name"</span>, text: <span style="color: #51afef;">self</span>.$taskTitle)
<span class="linenr">21: </span>            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20197;Picker&#20358;&#23384;&#21462;priority&#27396;&#20301;&#30340;&#36039;&#26009;</span>
<span class="linenr">22: </span>            <span style="color: #c678dd;">Picker</span>(<span style="color: #98be65;">"Task Priority"</span>, selection: <span style="color: #51afef;">self</span>.$priority) {
<span class="linenr">23: </span>                <span style="color: #c678dd;">ForEach</span>(TaskPriority.<span style="color: #c678dd;">allCases</span>, id: \.<span style="color: #51afef;">self</span>) {
<span class="linenr">24: </span>                    <span style="color: #c678dd;">Text</span>($0.<span style="color: #c678dd;">rawValue</span>)
<span class="linenr">25: </span>                }
<span class="linenr">26: </span>            }
<span class="linenr">27: </span>            <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">28: </span>                taskListVM.<span style="color: #c678dd;">addTask</span>(task: <span style="color: #c678dd;">Task</span>(title: <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskTitle</span>, priority: priority,completed: <span style="color: #a9a1e1;">false</span>))
<span class="linenr">29: </span>                <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">presentation</span>.<span style="color: #dcaeea;">wrappedValue</span>.<span style="color: #c678dd;">dismiss</span>()
<span class="linenr">30: </span>            }, label: {
<span class="linenr">31: </span>                <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Done"</span>)
<span class="linenr">32: </span>            })
<span class="linenr">33: </span>            <span style="color: #c678dd;">Spacer</span>()
<span class="linenr">34: </span>        }.<span style="color: #c678dd;">padding</span>()
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">NewTaskView_Previews</span>: PreviewProvider {
<span class="linenr">39: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">40: </span>        <span style="color: #c678dd;">NewTaskView</span>( priority: TaskPriority.<span style="color: #c678dd;">low</span>)
<span class="linenr">41: </span>    }
<span class="linenr">42: </span>}
<span class="linenr">43: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd56a3ee" class="outline-4">
<h4 id="orgd56a3ee"><span class="section-number-4">2.6.3</span> ViewModel</h4>
<div class="outline-text-4" id="text-2-6-3">
<p>
依priority高低傳回不同的Icon<br />
</p>
</div>
<div id="outline-container-org873829a" class="outline-5">
<h5 id="org873829a"><span class="section-number-5">2.6.3.1</span> TaskCellViewModel.swift</h5>
<div class="outline-text-5" id="text-2-6-3-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskCellViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskCellViewModel</span>: <span style="color: #c678dd;">ObservableObject</span>, Identifiable  {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> task: Task
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> completionStateIconName = <span style="color: #98be65;">""</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> priorityStateIconName = <span style="color: #98be65;">""</span>
<span class="linenr">16: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> cancellables = <span style="color: #c678dd;">Set</span>&lt;AnyCancellable&gt;()
<span class="linenr">17: </span>    <span style="color: #51afef;">init</span>(task: Task) {
<span class="linenr">18: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span> = task
<span class="linenr">19: </span>        $task
<span class="linenr">20: </span>            .<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">21: </span>                <span style="color: #51afef;">return</span> task.<span style="color: #c678dd;">completed</span> ? <span style="color: #98be65;">"checkmark.circle.fill"</span> : <span style="color: #98be65;">"circle"</span>
<span class="linenr">22: </span>            }
<span class="linenr">23: </span>            .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #dcaeea;">completionStateIconName</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">24: </span>            .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellables)
<span class="linenr">25: </span>        $task
<span class="linenr">26: </span>            .<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">27: </span>                <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">priorityIconName</span>(task: <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span>)
<span class="linenr">28: </span>            }
<span class="linenr">29: </span>            .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #dcaeea;">priorityStateIconName</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">30: </span>            .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellables)
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>
<span class="linenr">33: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">priorityIconName</span>(task: Task) -&gt; <span style="color: #c678dd;">String</span> {
<span class="linenr">34: </span>        <span style="color: #51afef;">switch</span> task.<span style="color: #c678dd;">priority</span> {
<span class="linenr">35: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">low</span>:
<span class="linenr">36: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"l.circle.fill"</span>
<span class="linenr">37: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">medium</span>:
<span class="linenr">38: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"m.circle.fill"</span>
<span class="linenr">39: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">high</span>:
<span class="linenr">40: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"h.circle.fill"</span>
<span class="linenr">41: </span>        }
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>}
<span class="linenr">44: </span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3ec30d1" class="outline-4">
<h4 id="org3ec30d1"><span class="section-number-4">2.6.4</span> 結果</h4>
<div class="outline-text-4" id="text-2-6-4">

<div id="org148b872" class="figure">
<p><img src="images/picker.gif" alt="picker.gif" width="500" /><br />
</p>
<p><span class="figure-number">Figure 5: </span>Picker v.s. enum</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org13883e1" class="outline-3">
<h3 id="org13883e1"><span class="section-number-3">2.7</span> Tap on Icon to change completion and priority status</h3>
<div class="outline-text-3" id="text-2-7">
</div>
<div id="outline-container-org9e03a8c" class="outline-4">
<h4 id="org9e03a8c"><span class="section-number-4">2.7.1</span> View</h4>
<div class="outline-text-4" id="text-2-7-1">
</div>
<div id="outline-container-org1c39308" class="outline-5">
<h5 id="org1c39308"><span class="section-number-5">2.7.1.1</span> TaskListView.swift</h5>
<div class="outline-text-5" id="text-2-7-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">ContentView.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/16.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskListView</span>: View {
<span class="linenr">11: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskListVM = <span style="color: #c678dd;">TaskListViewModel</span>()
<span class="linenr">12: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">var</span> showNewItem = <span style="color: #a9a1e1;">false</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">14: </span>        NavigationView {
<span class="linenr">15: </span>            <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>, spacing: <span style="color: #da8548; font-weight: bold;">10</span>, content: {
<span class="linenr">16: </span>                List {
<span class="linenr">17: </span>                    <span style="color: #c678dd;">ForEach</span>(taskListVM.<span style="color: #dcaeea;">taskCellViewModels</span>) { task <span style="color: #51afef;">in</span>
<span class="linenr">18: </span>                        <span style="color: #c678dd;">TaskCell</span>(taskCellVM: task)
<span class="linenr">19: </span>
<span class="linenr">20: </span>                    }
<span class="linenr">21: </span>                    .<span style="color: #c678dd;">onDelete</span>(perform: { indexSet <span style="color: #51afef;">in</span>
<span class="linenr">22: </span>                        taskListVM.<span style="color: #c678dd;">deleteTask</span>(indexSet: indexSet)
<span class="linenr">23: </span>                    })
<span class="linenr">24: </span>                    <span style="color: #51afef;">if</span> <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewItem</span> {
<span class="linenr">25: </span>                        <span style="color: #c678dd;">TaskCell</span>(taskCellVM: <span style="color: #c678dd;">TaskCellViewModel</span>(task: <span style="color: #c678dd;">Task</span>(title: <span style="color: #98be65;">""</span>, priority: TaskPriority.<span style="color: #c678dd;">low</span>, completed: <span style="color: #a9a1e1;">false</span>)))
<span class="linenr">26: </span>                    }
<span class="linenr">27: </span>                }
<span class="linenr">28: </span>                .<span style="color: #c678dd;">navigationBarTitle</span>(<span style="color: #98be65;">"Tasks"</span>, displayMode: .<span style="color: #c678dd;">inline</span>)
<span class="linenr">29: </span>
<span class="linenr">30: </span>                .<span style="color: #c678dd;">navigationBarItems</span>(trailing: <span style="color: #c678dd;">NavigationLink</span>(
<span class="linenr">31: </span>                                        destination: <span style="color: #c678dd;">NewTaskView</span>(taskListVM: taskListVM, taskTitle: <span style="color: #98be65;">""</span>, priority: TaskPriority.<span style="color: #c678dd;">low</span>),
<span class="linenr">32: </span>                                        label: {
<span class="linenr">33: </span>                                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">34: </span>                                        }))
<span class="linenr">35: </span>                HStack {
<span class="linenr">36: </span>                    <span style="color: #c678dd;">Image</span>(systemName: <span style="color: #98be65;">"plus.circle.fill"</span>)
<span class="linenr">37: </span>                    <span style="color: #c678dd;">Button</span>(action: {
<span class="linenr">38: </span>                        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">showNewItem</span>.<span style="color: #c678dd;">toggle</span>()
<span class="linenr">39: </span>                    }, label: {
<span class="linenr">40: </span>                        <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"New Task"</span>)
<span class="linenr">41: </span>                    })
<span class="linenr">42: </span>                }.<span style="color: #c678dd;">padding</span>()
<span class="linenr">43: </span>            })
<span class="linenr">44: </span>        }
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>}
<span class="linenr">47: </span>
<span class="linenr">48: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">49: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">50: </span>        <span style="color: #c678dd;">TaskListView</span>()
<span class="linenr">51: </span>    }
<span class="linenr">52: </span>}
<span class="linenr">53: </span>
<span class="linenr">54: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">TaskCell</span>: View {
<span class="linenr">55: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> taskCellVM: TaskCellViewModel
<span class="linenr">56: </span>
<span class="linenr">57: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">58: </span>        HStack {
<span class="linenr">59: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">completionStateIconName</span>)
<span class="linenr">60: </span>                .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">61: </span>                .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">20</span>, height: <span style="color: #da8548; font-weight: bold;">20</span>)
<span class="linenr">62: </span>                .<span style="color: #dcaeea;">onTapGesture</span> {
<span class="linenr">63: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#35722;&#26356;&#23436;&#25104;&#29376;&#24907;</span>
<span class="linenr">64: </span>                    taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">completed</span>.<span style="color: #c678dd;">toggle</span>()
<span class="linenr">65: </span>                }
<span class="linenr">66: </span>            <span style="color: #c678dd;">Image</span>(systemName: taskCellVM.<span style="color: #dcaeea;">priorityStateIconName</span>)
<span class="linenr">67: </span>                .<span style="color: #c678dd;">resizable</span>()
<span class="linenr">68: </span>                .<span style="color: #c678dd;">frame</span>(width: <span style="color: #da8548; font-weight: bold;">20</span>, height: <span style="color: #da8548; font-weight: bold;">20</span>)
<span class="linenr">69: </span>                .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">blue</span>)
<span class="linenr">70: </span>                .<span style="color: #dcaeea;">onTapGesture</span> {
<span class="linenr">71: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#35722;&#26356;&#20778;&#20808;&#27402;&#29376;&#24907;</span>
<span class="linenr">72: </span>                    <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">taskCellVM</span>.<span style="color: #c678dd;">changePriority</span>(task: taskCellVM.<span style="color: #c678dd;">task</span>)
<span class="linenr">73: </span>                }
<span class="linenr">74: </span>            <span style="color: #c678dd;">Text</span>(taskCellVM.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">title</span>)
<span class="linenr">75: </span>        }
<span class="linenr">76: </span>    }
<span class="linenr">77: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd39fdf3" class="outline-4">
<h4 id="orgd39fdf3"><span class="section-number-4">2.7.2</span> ViewModel</h4>
<div class="outline-text-4" id="text-2-7-2">
</div>
<div id="outline-container-orgc4a86a9" class="outline-5">
<h5 id="orgc4a86a9"><span class="section-number-5">2.7.2.1</span> TaskCellViewModel.swift</h5>
<div class="outline-text-5" id="text-2-7-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 2: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">TaskCellViewModel.swift</span>
<span class="linenr"> 3: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">taskManagement</span>
<span class="linenr"> 4: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 5: </span><span style="color: #5B6268;">//  </span><span style="color: #5B6268;">Created by yen yung chin on 2021/2/20.</span>
<span class="linenr"> 6: </span><span style="color: #5B6268;">//</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 9: </span><span style="color: #51afef;">import</span> Combine
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">TaskCellViewModel</span>: <span style="color: #c678dd;">ObservableObject</span>, Identifiable  {
<span class="linenr">12: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> task: Task
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> completionStateIconName = <span style="color: #98be65;">""</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> priorityStateIconName = <span style="color: #98be65;">""</span>
<span class="linenr">16: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> nextTaskPriority: TaskPriority = .<span style="color: #c678dd;">low</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> cancellables = <span style="color: #c678dd;">Set</span>&lt;AnyCancellable&gt;()
<span class="linenr">18: </span>    <span style="color: #51afef;">init</span>(task: Task) {
<span class="linenr">19: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span> = task
<span class="linenr">20: </span>        $task
<span class="linenr">21: </span>            .<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">22: </span>                <span style="color: #51afef;">return</span> task.<span style="color: #c678dd;">completed</span> ? <span style="color: #98be65;">"checkmark.circle.fill"</span> : <span style="color: #98be65;">"circle"</span>
<span class="linenr">23: </span>            }
<span class="linenr">24: </span>            .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #dcaeea;">completionStateIconName</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">25: </span>            .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellables)
<span class="linenr">26: </span>        $task
<span class="linenr">27: </span>            .<span style="color: #c678dd;">map</span> { task <span style="color: #51afef;">in</span>
<span class="linenr">28: </span>                <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">priorityIconName</span>(task: <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span>)
<span class="linenr">29: </span>            }
<span class="linenr">30: </span>            .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #dcaeea;">priorityStateIconName</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">31: </span>            .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellables)
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>
<span class="linenr">34: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">priorityIconName</span>(task: Task) -&gt; <span style="color: #c678dd;">String</span> {
<span class="linenr">35: </span>        <span style="color: #51afef;">switch</span> task.<span style="color: #c678dd;">priority</span> {
<span class="linenr">36: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">low</span>:
<span class="linenr">37: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"l.circle.fill"</span>
<span class="linenr">38: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">medium</span>:
<span class="linenr">39: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"m.circle.fill"</span>
<span class="linenr">40: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">high</span>:
<span class="linenr">41: </span>            <span style="color: #51afef;">return</span> <span style="color: #98be65;">"h.circle.fill"</span>
<span class="linenr">42: </span>        }
<span class="linenr">43: </span>    }
<span class="linenr">44: </span>
<span class="linenr">45: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">changePriority</span>(task: Task) {
<span class="linenr">46: </span>        <span style="color: #51afef;">switch</span> task.<span style="color: #c678dd;">priority</span> {
<span class="linenr">47: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">low</span>:
<span class="linenr">48: </span>            <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">priority</span> = .<span style="color: #c678dd;">medium</span>
<span class="linenr">49: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">medium</span>:
<span class="linenr">50: </span>            <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">priority</span> = .<span style="color: #c678dd;">high</span>
<span class="linenr">51: </span>        <span style="color: #51afef;">case</span> .<span style="color: #c678dd;">high</span>:
<span class="linenr">52: </span>            <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">task</span>.<span style="color: #c678dd;">priority</span> = .<span style="color: #c678dd;">low</span>
<span class="linenr">53: </span>        }
<span class="linenr">54: </span>    }
<span class="linenr">55: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-SW-AdvFuncs" class="outline-2">
<h2 id="SW-AdvFuncs"><span class="section-number-2">3</span> Advance function</h2>
<div class="outline-text-2" id="text-SW-AdvFuncs">
</div>
<div id="outline-container-org12bd79e" class="outline-3">
<h3 id="org12bd79e"><span class="section-number-3">3.1</span> filter()</h3>
<div class="outline-text-3" id="text-3-1">
<p>
filter() 宣告如下：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">filter</span>(includeElement: (T) -&gt; <span style="color: #c678dd;">Bool</span>) -&gt; <span style="color: #c678dd;">Array</span>&lt;T&gt;
</pre>
</div>
<ul class="org-ul">
<li>includeElement 表示傳入的 function 或 closure，用來判斷陣列個元素是否符合條件。<br /></li>
<li>filter() 回傳結果為陣列。<br /></li>
</ul>
</div>
<div id="outline-container-org9464a4e" class="outline-4">
<h4 id="org9464a4e"><span class="section-number-4">3.1.1</span> 在 closure 回傳每個元素使否符合判斷式的結果，決定最後 filter() 回傳的元素集合。<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup></h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">var</span> numbers = <span style="color: #c678dd;">Array</span>(<span style="color: #da8548; font-weight: bold;">1</span>...<span style="color: #da8548; font-weight: bold;">8</span>)
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">var</span> evenNumbers = numbers.<span style="color: #c678dd;">filter</span> { (x) -&gt; <span style="color: #c678dd;">Bool</span> <span style="color: #51afef;">in</span>
<span class="linenr"> 4: </span>    x % <span style="color: #da8548; font-weight: bold;">2</span> == <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr"> 5: </span>}
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> oddNumbers = numbers.<span style="color: #c678dd;">filter</span> { (x) -&gt; <span style="color: #c678dd;">Bool</span> <span style="color: #51afef;">in</span>
<span class="linenr"> 8: </span>    x % <span style="color: #da8548; font-weight: bold;">2</span> != <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span>numbers         <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [1, 2, 3, 4, 5, 6, 7, 8]</span>
<span class="linenr">12: </span>evenNumbers     <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [2, 4, 6, 8]</span>
<span class="linenr">13: </span>oddNumbers      <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [1, 3, 5, 7]</span>
<span class="linenr">14: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf3db650" class="outline-4">
<h4 id="orgf3db650"><span class="section-number-4">3.1.2</span> 將一、三象限的點過濾出來<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup></h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Point</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> x: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> y: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">var</span> p1 = <span style="color: #c678dd;">Point</span>(x: <span style="color: #da8548; font-weight: bold;">1</span>, y: <span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> p2 = <span style="color: #c678dd;">Point</span>(x: -<span style="color: #da8548; font-weight: bold;">1</span>, y: <span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr"> 8: </span><span style="color: #51afef;">var</span> p3 = <span style="color: #c678dd;">Point</span>(x: -<span style="color: #da8548; font-weight: bold;">1</span>, y: -<span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr"> 9: </span><span style="color: #51afef;">var</span> p4 = <span style="color: #c678dd;">Point</span>(x: <span style="color: #da8548; font-weight: bold;">1</span>, y: -<span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr">10: </span><span style="color: #51afef;">var</span> points = [p1, p2, p3, p4]
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #51afef;">var</span> quadrant_1 = points.<span style="color: #c678dd;">filter</span> { (p) -&gt; <span style="color: #c678dd;">Bool</span> <span style="color: #51afef;">in</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">return</span> p.<span style="color: #c678dd;">x</span> &gt; <span style="color: #da8548; font-weight: bold;">0</span> &amp;&amp; p.<span style="color: #c678dd;">y</span> &gt; <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #51afef;">var</span> quadrant_3 = points.<span style="color: #c678dd;">filter</span> { (p) -&gt; <span style="color: #c678dd;">Bool</span> <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">return</span> p.<span style="color: #c678dd;">x</span> &lt; <span style="color: #da8548; font-weight: bold;">0</span> &amp;&amp; p.<span style="color: #c678dd;">y</span> &lt; <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">18: </span>}
<span class="linenr">19: </span>
<span class="linenr">20: </span>points          <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x 1, y 1}, {x -1, y 1}, {x -1, y -1}, {x 1, y -1}]</span>
<span class="linenr">21: </span>quadrant_1      <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x 1, y 1}]</span>
<span class="linenr">22: </span>quadrant_3      <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x -1, y -1}]</span>
<span class="linenr">23: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7ed2583" class="outline-3">
<h3 id="org7ed2583"><span class="section-number-3">3.2</span> map()</h3>
<div class="outline-text-3" id="text-3-2">
<p>
map() 宣告如下：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">map</span>&lt;U&gt;(transform: (T) -&gt; U) -&gt; <span style="color: #c678dd;">Array</span>&lt;U&gt;
</pre>
</div>
<ul class="org-ul">
<li>transform 表示傳入的 function 或 closure，用來轉換每個陣列的元素。輸入參數與回傳結果型別可以不同。<br /></li>
<li>map() 回傳結果為陣列。<br /></li>
</ul>
</div>
<div id="outline-container-org2c85d20" class="outline-4">
<h4 id="org2c85d20"><span class="section-number-4">3.2.1</span> 透過map()將整數陣列轉化成兩倍數值與字串的陣列。<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup></h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">var</span> numbers = <span style="color: #c678dd;">Array</span>(<span style="color: #da8548; font-weight: bold;">1</span>...<span style="color: #da8548; font-weight: bold;">8</span>)
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">var</span> doubles = numbers.<span style="color: #c678dd;">map</span> { (n) -&gt; <span style="color: #c678dd;">Int</span> <span style="color: #51afef;">in</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">return</span> n*<span style="color: #da8548; font-weight: bold;">2</span>
<span class="linenr"> 5: </span>}
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> strings = numbers.<span style="color: #c678dd;">map</span> { (n) -&gt; <span style="color: #c678dd;">String</span> <span style="color: #51afef;">in</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">let</span> digital = [<span style="color: #da8548; font-weight: bold;">0</span>:<span style="color: #98be65;">"&#38646;"</span>, <span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #98be65;">"&#22777;"</span>, <span style="color: #da8548; font-weight: bold;">2</span>:<span style="color: #98be65;">"&#36019;"</span>, <span style="color: #da8548; font-weight: bold;">3</span>:<span style="color: #98be65;">"&#21442;"</span>, <span style="color: #da8548; font-weight: bold;">4</span>:<span style="color: #98be65;">"&#32902;"</span>, <span style="color: #da8548; font-weight: bold;">5</span>:<span style="color: #98be65;">"&#20237;"</span>, <span style="color: #da8548; font-weight: bold;">6</span>:<span style="color: #98be65;">"&#38520;"</span>, <span style="color: #da8548; font-weight: bold;">7</span>:<span style="color: #98be65;">"&#26578;"</span>, <span style="color: #da8548; font-weight: bold;">8</span>:<span style="color: #98be65;">"&#25420;"</span>, <span style="color: #da8548; font-weight: bold;">9</span>:<span style="color: #98be65;">"&#29590;"</span>]
<span class="linenr"> 9: </span>    <span style="color: #51afef;">return</span> digital[n] ?? <span style="color: #98be65;">"&#21861;"</span>
<span class="linenr">10: </span>}
<span class="linenr">11: </span>
<span class="linenr">12: </span>numbers     <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [1, 2, 3, 4, 5, 6, 7, 8]</span>
<span class="linenr">13: </span>doubles     <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [2, 4, 6, 8, 10, 12, 14, 16]</span>
<span class="linenr">14: </span>strings     <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: ["&#22777;", "&#36019;", "&#21442;", "&#32902;", "&#20237;", "&#38520;", "&#26578;", "&#25420;"]</span>
<span class="linenr">15: </span>
</pre>
</div>
</div>
<div id="outline-container-org026e6ad" class="outline-5">
<h5 id="org026e6ad"><span class="section-number-5">3.2.1.1</span> map()如何將一組二度空間的點對 X 軸與 Y 軸做鏡射。<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup></h5>
<div class="outline-text-5" id="text-3-2-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Point</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> x: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> y: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span><span style="color: #51afef;">var</span> points = [<span style="color: #c678dd;">Point</span>(x: <span style="color: #da8548; font-weight: bold;">1</span>, y: <span style="color: #da8548; font-weight: bold;">2</span>), <span style="color: #c678dd;">Point</span>(x: -<span style="color: #da8548; font-weight: bold;">2</span>, y: -<span style="color: #da8548; font-weight: bold;">1</span>)]
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> mirror_x = points.<span style="color: #c678dd;">map</span> { (p) -&gt; Point <span style="color: #51afef;">in</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Point</span>(x: -p.<span style="color: #c678dd;">x</span>, y: p.<span style="color: #c678dd;">y</span>)
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> mirror_y = points.<span style="color: #c678dd;">map</span> { (p) -&gt; Point <span style="color: #51afef;">in</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">return</span> <span style="color: #c678dd;">Point</span>(x: p.<span style="color: #c678dd;">x</span>, y: -p.<span style="color: #c678dd;">y</span>)
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span>points      <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x 1, y 2}, {x -2, y -1}]</span>
<span class="linenr">16: </span>mirror_x    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x -1, y 2}, {x 2, y -1}]</span>
<span class="linenr">17: </span>mirror_y    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">return: [{x 1, y -2}, {x -2, y 1}]</span>
<span class="linenr">18: </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org59aafc2" class="outline-3">
<h3 id="org59aafc2"><span class="section-number-3">3.3</span> debounce</h3>
<div class="outline-text-3" id="text-3-3">
<p>
What is debounce? Its a function which forces the execution to wait a certain amount of time before running again.<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup><br />
</p>
</div>
<div id="outline-container-org491c3b1" class="outline-4">
<h4 id="org491c3b1"><span class="section-number-4">3.3.1</span> Example</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
source: <a href="https://peterfriese.dev/swift-combine-love/">SwiftUI + Combine = ❤️</a><br />
</p>
</div>
<div id="outline-container-orgc64dae3" class="outline-5">
<h5 id="orgc64dae3"><span class="section-number-5">3.3.1.1</span> UI</h5>
<div class="outline-text-5" id="text-3-3-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>  <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> userViewModel = <span style="color: #c678dd;">UserViewModel</span>()
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 6: </span>    Form {
<span class="linenr"> 7: </span>      Section {
<span class="linenr"> 8: </span>        <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Username"</span>, text: $userViewModel.<span style="color: #dcaeea;">username</span>)
<span class="linenr"> 9: </span>          .<span style="color: #c678dd;">autocapitalization</span>(.<span style="color: #51afef;">none</span>)
<span class="linenr">10: </span>        }
<span class="linenr">11: </span>        Section {
<span class="linenr">12: </span>          <span style="color: #c678dd;">SecureField</span>(<span style="color: #98be65;">"Password"</span>, text: $userViewModel.<span style="color: #c678dd;">password</span>)
<span class="linenr">13: </span>          <span style="color: #c678dd;">SecureField</span>(<span style="color: #98be65;">"Password again"</span>, text: $userViewModel.<span style="color: #dcaeea;">passwordAgain</span>)
<span class="linenr">14: </span>       }
<span class="linenr">15: </span>       Section {
<span class="linenr">16: </span>         <span style="color: #c678dd;">Button</span>(action: { }) {
<span class="linenr">17: </span>           <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Sign up"</span>)
<span class="linenr">18: </span>         }.<span style="color: #c678dd;">disabled</span>(!userViewModel.<span style="color: #c678dd;">valid</span>)
<span class="linenr">19: </span>       }
<span class="linenr">20: </span>     }
<span class="linenr">21: </span>  }
<span class="linenr">22: </span>}
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">25: </span>  <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">26: </span>    <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">27: </span>  }
<span class="linenr">28: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org788677a" class="outline-5">
<h5 id="org788677a"><span class="section-number-5">3.3.1.2</span> ViewModel</h5>
<div class="outline-text-5" id="text-3-3-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">UserViewModel</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr"> 2: </span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Input</span>
<span class="linenr"> 3: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> username = <span style="color: #98be65;">""</span>
<span class="linenr"> 4: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> password = <span style="color: #98be65;">""</span>
<span class="linenr"> 5: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> passwordAgain = <span style="color: #98be65;">""</span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Output</span>
<span class="linenr"> 8: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> isValid = <span style="color: #a9a1e1;">false</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>  $username
<span class="linenr">11: </span>  .<span style="color: #c678dd;">debounce</span>(<span style="color: #51afef;">for</span>: <span style="color: #da8548; font-weight: bold;">0.8</span>, scheduler: <span style="color: #c678dd;">RunLoop</span>.<span style="color: #c678dd;">main</span>)
<span class="linenr">12: </span>  .<span style="color: #c678dd;">removeDuplicates</span>()
<span class="linenr">13: </span>  .<span style="color: #c678dd;">map</span> { input <span style="color: #51afef;">in</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">return</span> input.<span style="color: #c678dd;">count</span> &gt;= <span style="color: #da8548; font-weight: bold;">3</span>
<span class="linenr">15: </span>  }
<span class="linenr">16: </span>  .<span style="color: #c678dd;">assign</span>(to: \.<span style="color: #c678dd;">valid</span>, on: <span style="color: #51afef;">self</span>)
<span class="linenr">17: </span>  .<span style="color: #c678dd;">store</span>(<span style="color: #51afef;">in</span>: &amp;cancellableSet)
<span class="linenr">18: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org3e12375" class="outline-2">
<h2 id="org3e12375"><span class="section-number-2">4</span> Web API: URLSession v.s. JSONDecoder</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgbfa4f7d" class="outline-3">
<h3 id="orgbfa4f7d"><span class="section-number-3">4.1</span> Demo 1</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org4efbce8" class="outline-4">
<h4 id="org4efbce8"><span class="section-number-4">4.1.1</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Todo</span>: <span style="color: #c678dd;">Codable</span>, Identifiable {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> id: <span style="color: #c678dd;">Int</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">public</span> <span style="color: #51afef;">var</span> completed: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">FetchToDo</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr">10: </span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">1.</span>
<span class="linenr">11: </span>  <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> todos = [Todo]()
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr">14: </span>        <span style="color: #51afef;">let</span> url = <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"https://jsonplaceholder.typicode.com/todos"</span>)!
<span class="linenr">15: </span>        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">2.</span>
<span class="linenr">16: </span>        <span style="color: #c678dd;">URLSession</span>.<span style="color: #c678dd;">shared</span>.<span style="color: #c678dd;">dataTask</span>(with: url) {(data, response, error) <span style="color: #51afef;">in</span>
<span class="linenr">17: </span>            <span style="color: #51afef;">do</span> {
<span class="linenr">18: </span>                <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> todoData = data {
<span class="linenr">19: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">3.</span>
<span class="linenr">20: </span>                    <span style="color: #51afef;">let</span> decodedData = <span style="color: #51afef;">try</span> <span style="color: #c678dd;">JSONDecoder</span>().<span style="color: #c678dd;">decode</span>([Todo].<span style="color: #51afef;">self</span>, from: todoData)
<span class="linenr">21: </span>                    DispatchQueue.<span style="color: #c678dd;">main</span>.<span style="color: #dcaeea;">async</span> {
<span class="linenr">22: </span>                        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">todos</span> = decodedData
<span class="linenr">23: </span>                    }
<span class="linenr">24: </span>                } <span style="color: #51afef;">else</span> {
<span class="linenr">25: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"No data"</span>)
<span class="linenr">26: </span>                }
<span class="linenr">27: </span>            } <span style="color: #51afef;">catch</span> {
<span class="linenr">28: </span>                <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Error"</span>)
<span class="linenr">29: </span>            }
<span class="linenr">30: </span>        }.<span style="color: #c678dd;">resume</span>()
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
<span class="linenr">33: </span>
<span class="linenr">34: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr">35: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">1.</span>
<span class="linenr">36: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> fetch = <span style="color: #c678dd;">FetchToDo</span>()
<span class="linenr">37: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">38: </span>        VStack {
<span class="linenr">39: </span>            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">2.</span>
<span class="linenr">40: </span>            <span style="color: #c678dd;">List</span>(fetch.<span style="color: #dcaeea;">todos</span>) { todo <span style="color: #51afef;">in</span>
<span class="linenr">41: </span>                <span style="color: #c678dd;">VStack</span>(alignment: .<span style="color: #dcaeea;">leading</span>) {
<span class="linenr">42: </span>                    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">3.</span>
<span class="linenr">43: </span>                    <span style="color: #c678dd;">Text</span>(todo.<span style="color: #c678dd;">title</span>)
<span class="linenr">44: </span>                    <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>todo.<span style="color: #c678dd;">completed</span>.<span style="color: #c678dd;">description</span><span style="color: #98be65;">)"</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">print boolean</span>
<span class="linenr">45: </span>                        .<span style="color: #c678dd;">font</span>(.<span style="color: #c678dd;">system</span>(size: <span style="color: #da8548; font-weight: bold;">11</span>))
<span class="linenr">46: </span>                        .<span style="color: #c678dd;">foregroundColor</span>(Color.<span style="color: #dcaeea;">gray</span>)
<span class="linenr">47: </span>                }
<span class="linenr">48: </span>            }
<span class="linenr">49: </span>        }
<span class="linenr">50: </span>    }
<span class="linenr">51: </span>}
</pre>
</div>

<div id="org247cbf5" class="figure">
<p><img src="images/json-1.jpg" alt="json-1.jpg" width="300" /><br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org6af4b6f" class="outline-3">
<h3 id="org6af4b6f"><span class="section-number-3">4.2</span> Demo 2</h3>
<div class="outline-text-3" id="text-4-2">
</div>
<div id="outline-container-org3f72b8d" class="outline-4">
<h4 id="org3f72b8d"><span class="section-number-4">4.2.1</span> MVVM</h4>
<div class="outline-text-4" id="text-4-2-1">
<ul class="org-ul">
<li>Model: FlowModel.swift<br /></li>
<li>View: ContentView.swift<br /></li>
<li>ViewModel: Flow.swift<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org3eb7be0" class="outline-4">
<h4 id="org3eb7be0"><span class="section-number-4">4.2.2</span> FlowModel.swift</h4>
<div class="outline-text-4" id="text-4-2-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">FlowModel</span>: <span style="color: #c678dd;">Decodable</span>, <span style="color: #c678dd;">Hashable</span> {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> &#24180;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> &#26376;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> &#32317;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> &#26085;&#22343;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> &#20551;&#26085;&#22343;&#36939;&#37327;: <span style="color: #c678dd;">Int</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> &#26376;&#21488;&#19978;&#21047;&#21345;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> &#36554;&#19978;&#21047;&#21345;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> &#21806;&#31080;&#27231;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> &#35036;&#31080;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> &#22296;&#39636;&#31080;&#26085;&#22343;&#31558;&#25976;: <span style="color: #c678dd;">Double</span>? = <span style="color: #a9a1e1;">nil</span>
<span class="linenr">14: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b9121a" class="outline-4">
<h4 id="org3b9121a"><span class="section-number-4">4.2.3</span> ContentView.swift</h4>
<div class="outline-text-4" id="text-4-2-3">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> SwiftUI
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> flow = <span style="color: #c678dd;">FetchFlow</span>()
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr"> 7: </span>        NavigationView {
<span class="linenr"> 8: </span>            <span style="color: #c678dd;">List</span>() {
<span class="linenr"> 9: </span>                <span style="color: #c678dd;">ForEach</span>(flow.<span style="color: #dcaeea;">flows</span>, id: \.<span style="color: #51afef;">self</span>) {(item) <span style="color: #51afef;">in</span>
<span class="linenr">10: </span>                    <span style="color: #c678dd;">NavigationLink</span>(destination: <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"&#32317;&#36939;&#37327;: \(</span>item.<span style="color: #dcaeea;">&#32317;&#36939;&#37327;</span>!<span style="color: #98be65;">)"</span>)) {
<span class="linenr">11: </span>                        HStack {
<span class="linenr">12: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>item.<span style="color: #dcaeea;">&#24180;</span>!<span style="color: #98be65;">)&#24180;\(</span>item.<span style="color: #dcaeea;">&#26376;</span>!<span style="color: #98be65;">)&#26376;"</span>)
<span class="linenr">13: </span>                            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"\(</span>item.<span style="color: #dcaeea;">&#26085;&#22343;&#36939;&#37327;</span>!<span style="color: #98be65;">)"</span>)
<span class="linenr">14: </span>                        }
<span class="linenr">15: </span>                    }
<span class="linenr">16: </span>                }
<span class="linenr">17: </span>            }.<span style="color: #c678dd;">navigationTitle</span>(<span style="color: #98be65;">""</span>)
<span class="linenr">18: </span>        }
<span class="linenr">19: </span>    }
<span class="linenr">20: </span>}
<span class="linenr">21: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView_Previews</span>: PreviewProvider {
<span class="linenr">22: </span>    <span style="color: #51afef;">static</span> <span style="color: #51afef;">var</span> previews: <span style="color: #51afef;">some</span> View {
<span class="linenr">23: </span>        <span style="color: #c678dd;">ContentView</span>()
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd8e582a" class="outline-4">
<h4 id="orgd8e582a"><span class="section-number-4">4.2.4</span> Flow.swift</h4>
<div class="outline-text-4" id="text-4-2-4">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Foundation
<span class="linenr"> 2: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">FetchFlow</span>: <span style="color: #c678dd;">ObservableObject</span> {
<span class="linenr"> 3: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> flows = [FlowModel]()
<span class="linenr"> 4: </span>    <span style="color: #51afef;">init</span>() {
<span class="linenr"> 5: </span>        <span style="color: #51afef;">let</span> urlstr = <span style="color: #98be65;">"https://data.kcg.gov.tw/dataset/6f29f6f4-2549-4473-aa90-bf60d10895dc/resource/30dfc2cf-17b5-4a40-8bb7-c511ea166bd3/download/lightrailtraffic.json"</span>
<span class="linenr"> 6: </span>        <span style="color: #51afef;">guard</span> <span style="color: #51afef;">let</span> url = <span style="color: #c678dd;">URL</span>(string: urlstr) <span style="color: #51afef;">else</span> {
<span class="linenr"> 7: </span>            <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Invalid json url"</span>)
<span class="linenr"> 8: </span>            <span style="color: #51afef;">return</span>
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>        <span style="color: #c678dd;">URLSession</span>.<span style="color: #c678dd;">shared</span>.<span style="color: #c678dd;">dataTask</span>(with: url) {(data, response, error) <span style="color: #51afef;">in</span>
<span class="linenr">11: </span>            <span style="color: #51afef;">do</span> {
<span class="linenr">12: </span>                <span style="color: #51afef;">if</span> <span style="color: #51afef;">let</span> flowData = data {
<span class="linenr">13: </span>                    <span style="color: #51afef;">let</span> decodeData = <span style="color: #51afef;">try</span> <span style="color: #c678dd;">JSONDecoder</span>().<span style="color: #c678dd;">decode</span>([FlowModel].<span style="color: #51afef;">self</span>, from: flowData)
<span class="linenr">14: </span>
<span class="linenr">15: </span>                    DispatchQueue.<span style="color: #c678dd;">main</span>.<span style="color: #dcaeea;">async</span> {
<span class="linenr">16: </span>                        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">flows</span> = decodeData
<span class="linenr">17: </span>                    }
<span class="linenr">18: </span>                } <span style="color: #51afef;">else</span> {
<span class="linenr">19: </span>                    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"No data"</span>)
<span class="linenr">20: </span>                }
<span class="linenr">21: </span>            } <span style="color: #51afef;">catch</span> {
<span class="linenr">22: </span>                <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"\(</span>error<span style="color: #98be65;">)"</span>)
<span class="linenr">23: </span>            }
<span class="linenr">24: </span>        }.<span style="color: #c678dd;">resume</span>()
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb472bc8" class="outline-4">
<h4 id="orgb472bc8"><span class="section-number-4">4.2.5</span> Result</h4>
<div class="outline-text-4" id="text-4-2-5">

<div id="orgcc0907e" class="figure">
<p><img src="images/json-2.jpg" alt="json-2.jpg" width="600" /><br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgefb64ea" class="outline-3">
<h3 id="orgefb64ea"><span class="section-number-3">4.3</span> 公開資料平台</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><a href="https://data.gov.tw/">政府資料開放平台</a><br /></li>
<li><a href="https://data.kcg.gov.tw/dataset">高雄市政府開放資料集</a><br /></li>
<li><a href="https://data.tainan.gov.tw/dataset">台南市政府開放資料集</a><br /></li>
<li><a href="https://ptx.transportdata.tw/PTX/Service">公共運輸整合資訊</a><br /></li>
<li><a href="https://kaleidosblog.s3-eu-west-1.amazonaws.com/json/tutorial.json">country/code JSON sample</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgeab131f" class="outline-3">
<h3 id="orgeab131f"><span class="section-number-3">4.4</span> Further Reading</h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=HvfE4G9PfeU">SwiftUI Tutorial - Using an API and Decoding JSON Data</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=tdxKIPpPDAI">iOS Swift Tutorial: Use Web APIs and JSON Data with Swift 5</a>- <a href="https://www.ioscreator.com/tutorials/swiftui-json-list-tutorial">SwiftUI Fetch JSON Data into List</a><br /></li>
<li><a href="https://programmingwithswift.com/parse-json-from-file-and-url-with-swift/">Parse JSON from file and URL with Swift</a><br /></li>
<li><a href="https://www.youtube.com/watch?v=1en4JyW3XSI">Making an API call and fetch JSON data in SwiftUI</a><br /></li>
<li><a href="https://benoitpasquier.com/encoding-decoding-json-swift4/">The best way to encode and decode JSON in Swift4 </a><br /></li>
<li><a href="https://www.reddit.com/r/swift/comments/emw0i3/jsondecoder_fails_if_i_dont_have_an_id_for_each/">JSONDecoder fails if I don&rsquo;t have an &ldquo;id&rdquo; for each item&#x2026; why doesn&rsquo;t UUID work?</a><br /></li>
<li><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E8%A7%A3%E6%B1%BAjson-key%E4%B8%8D%E5%9B%BA%E5%AE%9A%E6%99%82%E5%87%BA%E7%8F%BE-no-value-associated-with-key-codingkeys-%E7%8B%80%E6%B3%81-720d7d09486a">解決Json Key不固定時出現“No value associated with key CodingKeys” 狀況</a><br /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-SW-Protocols" class="outline-2">
<h2 id="SW-Protocols"><span class="section-number-2">5</span> Protocols</h2>
<div class="outline-text-2" id="text-SW-Protocols">
<ul class="org-ul">
<li>Protocols are a fundamental feature of Swift. They play a leading role in the structure of the Swift standard library and are a common method of abstraction. They provide a similar experience to interfaces that some other languages have. An advantage of protocols in Swift is that objects can conform to multiple protocols.<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup><br /></li>
<li>Protocol 是一個只宣告不定義的型別，然而這個特性可以讓我們的程式更有彈性，像在 IOS SDK 裡面，耳熟能詳的 Delegate，就大量的運用 Potocol，方便我們客製化事件發生時要處理的事情。<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup><br /></li>

<li>對任何程式開發來說，減少重覆的 code，把權責明確分開，讓 code 維護性變好，是非常重要的課題。而在現今的軟體開發模式中，有許多方法可以做到這點，最為人所知的一個模式，就是利用繼承 (Inheritance)，把會重覆利用的部份放在母類別，讓其它子類別去繼承。另外一種做法，則是利用 Composition Pattern，將功能做成組件分出來，讓需要的模組去組合取用。<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup><br /></li>
</ul>
<p class="verse">
A protocol defines a blueprint of methods, properties, and other requirements that suit a particular task or piece of functionality. The protocol can then be adopted by a class, structure, or enumeration to provide an actual implementation of those requirements. Any type that satisfies the requirements of a protocol is said to conform to that protocol. <sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup><br />
</p>

<ul class="org-ul">
<li>協定提供類型可以做的資訊，Classes 和 structs 則提供物件的資訊，協定則提供物件將會執行的動作。<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup><br /></li>
</ul>
<p class="verse">
協定是 Swift 一個重要的特性，它會定義出為了完成某項任務或功能所需的方法、屬性，但是本身不會實作這些任務跟功能，而僅僅只是表達出該任務或功能的名稱。協定為方法、屬性、以及其他特定的任務需求或功能定義藍圖。協定可被 class、struct、或 enum 類型採納以提供所需功能的具體實現。滿足了協定中需求的任意類型都叫做遵循了該協定。<br />
</p>

<p>
除了指定遵循類型必須實現的要求外，你可以擴展一個協定以實現其中的一些需求或實現一個符合類型的可以利用的附加功能。<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup><br />
</p>
<ul class="org-ul">
<li>例如，你可能有一個名為 str 的變量，其類型為 String。身為一個開發人員，你應該知道 str 代表 String，如果我們定義了一個名為 StringProtocol 的協定，它具有所有的 String 的 API，我們可以擴展任何類型去遵循 StringProtocol（意思是滿足其所有要求），如此一來，即可以使用該對象，讓它就像是一個 String，儘管我們不知道它是什麼！如果看起來像一隻鴨子，游泳像一隻鴨子，叫聲像一隻鴨子，那就是一隻鴨子。我們新的 StringProtocol 可以告訴那些遵守它協定的類型能夠做什麼，且不需要知道這些類型的資訊。<sup><a id="fnr.7.100" class="footref" href="#fn.7">7</a></sup><br /></li>
</ul>
</div>
<div id="outline-container-orgf337bc9" class="outline-3">
<h3 id="orgf337bc9"><span class="section-number-3">5.1</span> Protocol Syntax</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-orge389169" class="outline-4">
<h4 id="orge389169"><span class="section-number-4">5.1.1</span> Syntax</h4>
<div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">protocol definition goes here</span>
<span class="linenr">3: </span>}
</pre>
</div>
<p>
Classes , structs, enums can adopt these protocol by placing protocol’s name after the type’s name, separated by a colon, as part of their definition. Multiple protocols can be listed, and are separated by commas:<sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">SomeStructure</span>: FirstProtocol, AnotherProtocol {
<span class="linenr">2: </span>    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">structure definition goes here</span>
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb838af0" class="outline-4">
<h4 id="orgb838af0"><span class="section-number-4">5.1.2</span> DEMO</h4>
<div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Polite</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHello</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Teacher</span>: Polite {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHello</span>() {
<span class="linenr"> 8: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"&#21516;&#23416;&#22909;"</span>)
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Student</span>: Polite {
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">sayHEllo</span>() {
<span class="linenr">15: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"&#32769;&#24107;&#22909;"</span>)
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #51afef;">var</span> aPolitePerson: Polite = <span style="color: #c678dd;">Teacher</span>()
<span class="linenr">20: </span>aPolitePerson.<span style="color: #c678dd;">name</span> = <span style="color: #98be65;">"Mr. Yen"</span>
<span class="linenr">21: </span>aPolitePerson.<span style="color: #c678dd;">sayHellow</span>()
<span class="linenr">22: </span>aPolitePerson = <span style="color: #c678dd;">Student</span>()
<span class="linenr">23: </span>aPolitePerson.<span style="color: #c678dd;">sayHello</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-org3168773" class="outline-4">
<h4 id="org3168773"><span class="section-number-4">5.1.3</span> Adding property requirements</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
source: <a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in swift</a><br />
</p>
<ul class="org-ul">
<li>A protocol can have properties as well as methods that a class, enum or struct conforming to this protocol can implement.<br /></li>
<li>A protocol declaration only specifies the required property name and type. It doesn’t say anything about whether the property should be a stored one or a computed one.<br /></li>
<li>A protocol also specifies whether each property must be gettable or gettable and settable.<br /></li>
<li>Property requirements are always declared as variable properties, prefixed with the var keyword.<br /></li>
<li>Gettable and settable properties are indicated by writing { get set } after their type declaration, and gettable properties are indicated by writing { get }.<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> mustBeSettable: <span style="color: #c678dd;">Int</span> { <span style="color: #51afef;">get</span> <span style="color: #51afef;">set</span> }
<span class="linenr">3: </span>    <span style="color: #51afef;">var</span> doesNotNeedToBeSettable: <span style="color: #c678dd;">Int</span> { <span style="color: #51afef;">get</span> }
<span class="linenr">4: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orge0e2afc" class="outline-4">
<h4 id="orge0e2afc"><span class="section-number-4">5.1.4</span> Protocols with mutating methods</h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
Mutating methods are methods that we use on value types like structs and enums. These methods are allowed to modify the instance it belongs to and any properties of that instance. A small example:<br />
</p>

<p>
Consider a simple struct Rectangle:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Rectangle</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> width = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> height = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">area</span>() -&gt; <span style="color: #c678dd;">Int</span> {
<span class="linenr"> 6: </span>        <span style="color: #51afef;">return</span> width * height
<span class="linenr"> 7: </span>    }
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">scaleBy</span>(value: <span style="color: #c678dd;">Int</span>) {
<span class="linenr">10: </span>        width *= value
<span class="linenr">11: </span>        height *= value
<span class="linenr">12: </span>    }
<span class="linenr">13: </span>}
</pre>
</div>
<p>
The scaleBy(value:) method modifies the value of width and height. So it should be marked as mutating. Otherwise the compiler will throw error at you.<br />
</p>

<p class="verse">
If you mark a protocol instance method requirement as mutating, you do not need to write the mutatingkeyword when writing an implementation of that method for a class. The mutating keyword is only used by structures and enumerations.<br />
</p>
<p>
Consider an enum and class implementing a protocol with mutating function:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Togglable</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">OnOffSwitch</span>: Toggglable {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">case</span> off, on
<span class="linenr"> 7: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>() {
<span class="linenr"> 8: </span>        <span style="color: #51afef;">switch</span> <span style="color: #51afef;">self</span> {
<span class="linenr"> 9: </span>        <span style="color: #51afef;">case</span> .<span style="color: #dcaeea;">off</span>:
<span class="linenr">10: </span>            <span style="color: #51afef;">self</span> = .<span style="color: #dcaeea;">on</span>
<span class="linenr">11: </span>        <span style="color: #51afef;">case</span> .<span style="color: #dcaeea;">on</span>:
<span class="linenr">12: </span>            <span style="color: #51afef;">self</span> = .<span style="color: #dcaeea;">off</span>
<span class="linenr">13: </span>        }
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">var</span> lightSwitch = OnOffSwitch.<span style="color: #dcaeea;">off</span>
<span class="linenr">18: </span>lightSwitch.<span style="color: #c678dd;">toggle</span>()
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ToggleClass</span>: Togglable {
<span class="linenr">21: </span>    <span style="color: #51afef;">var</span> someBool = <span style="color: #a9a1e1;">false</span>
<span class="linenr">22: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">toggle</span>() {
<span class="linenr">23: </span>        someBool = <span style="color: #a9a1e1;">true</span>
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #51afef;">let</span> toggleClassObj = <span style="color: #c678dd;">ToggleClass</span>()
<span class="linenr">28: </span>toggleClassObj.<span style="color: #c678dd;">toggle</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-org32a57d2" class="outline-4">
<h4 id="org32a57d2"><span class="section-number-4">5.1.5</span> Initializer Requirements</h4>
<div class="outline-text-4" id="text-5-1-5">
<p>
Protocols can have specific initializers like normal methods which the conforming types can implement.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">SomeProtocol</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">init</span>(someParameter: <span style="color: #c678dd;">Int</span>)
<span class="linenr">3: </span>}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org833adc0" class="outline-3">
<h3 id="org833adc0"><span class="section-number-3">5.2</span> DEMO</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Sound</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>()
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Dog</span>: Sound {
<span class="linenr"> 6: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Woof"</span>)
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Tree</span>: Sound {
<span class="linenr">12: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr">13: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Susrrate"</span>)
<span class="linenr">14: </span>    }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">iPhone</span>: Sound {
<span class="linenr">18: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">makeSound</span>() {
<span class="linenr">19: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Ring"</span>)
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5d0eae6" class="outline-3">
<h3 id="org5d0eae6"><span class="section-number-3">5.3</span> 範例</h3>
<div class="outline-text-3" id="text-5-3">
</div>
<div id="outline-container-orgb9c82c8" class="outline-4">
<h4 id="orgb9c82c8"><span class="section-number-4">5.3.1</span> 版本 1</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
本例中有兩個 struct: Song, Album 以及一個 class 用來播放 Song 或 Album，原本的 Player 要為不同的 struct 寫不同的 func，而且程式碼大多重複。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr"> 7: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr"> 8: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">13: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">16: </span>}
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">19: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">20: </span>
<span class="linenr">21: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ song: Song) {
<span class="linenr">22: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: song.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">23: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">24: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>
<span class="linenr">27: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ album: Album) {
<span class="linenr">28: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: album.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">29: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">30: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org6a9c94c" class="outline-4">
<h4 id="org6a9c94c"><span class="section-number-4">5.3.2</span> 版本 2</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
宣告一個 protocol，定義 audioURL 變數(read only)，然後令兩個 struct 皆遵循該 protocol(方式有二)，如此，原本的 Player class 中的 play func 就能只寫一次。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Playable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span> { <span style="color: #51afef;">get</span> }
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span>: Playable {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Album</span>: Playable {}
<span class="linenr">23: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">24: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ resource: Playable) {
<span class="linenr">27: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: resource.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">28: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">29: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">30: </span>    }
<span class="linenr">31: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgee324af" class="outline-4">
<h4 id="orgee324af"><span class="section-number-4">5.3.3</span> 版本 3</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
原本 protocol 的真正意思其實只是在確定 audioURL 是否能正確轉換成 Audio，所以其實將 protocol name 由 Playable 改為 AudioURLConvertable 會更貼近事實。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">AudioURLConvertable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span> { <span style="color: #51afef;">get</span> }
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span>: AudioURLConvertable {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span>: AudioURLConvertable {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">Player</span> {
<span class="linenr">23: </span>    <span style="color: #51afef;">private</span> <span style="color: #51afef;">let</span> avPlayer = <span style="color: #c678dd;">AVPlayer</span>()
<span class="linenr">24: </span>
<span class="linenr">25: </span>    <span style="color: #51afef;">func</span> <span style="color: #c678dd;">play</span>(_ resource: AudioURLConvertable) {
<span class="linenr">26: </span>        <span style="color: #51afef;">let</span> item = <span style="color: #c678dd;">AVPlayerItem</span>(url: resource.<span style="color: #dcaeea;">audioURL</span>)
<span class="linenr">27: </span>        avPlayer.<span style="color: #c678dd;">replaceCurrentItem</span>(with: item)
<span class="linenr">28: </span>        avPlayer.<span style="color: #c678dd;">play</span>()
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5fffb1f" class="outline-3">
<h3 id="org5fffb1f"><span class="section-number-3">5.4</span> mutating</h3>
<div class="outline-text-3" id="text-5-4">
<p>
protocol 除了可以提供傳回值型態的彈性，也可以用來變更 class/struct 中的屬性。如：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>()
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">11: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">12: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">20: </span>}
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Song</span>: Likeable {
<span class="linenr">23: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>() {
<span class="linenr">24: </span>        isLiked = <span style="color: #a9a1e1;">true</span>
<span class="linenr">25: </span>    }
<span class="linenr">26: </span>}
</pre>
</div>
<p>
可以在不改變原 struct Album 的情況下，藉由 extension 來擴充 Song，使其遵循 Likeable protocol，提供變供屬性 isLiked 的值，*這在擴充 API 功能時特別有用*。<br />
</p>
</div>
</div>
<div id="outline-container-org613983e" class="outline-3">
<h3 id="org613983e"><span class="section-number-3">5.5</span> 擴充 protocol</h3>
<div class="outline-text-3" id="text-5-5">
<p>
除了擴充現有 struct，protocol 也可以用來擴充 protocol，如：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span><span style="color: #51afef;">import</span> AVKit
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">protocol</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 5: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span> {<span style="color: #51afef;">get</span> <span style="color: #51afef;">set</span>}
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Likeable</span> {
<span class="linenr"> 9: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">markAsLiked</span>() {
<span class="linenr">10: </span>        isLiked = <span style="color: #a9a1e1;">true</span>
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>}
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Song</span> {
<span class="linenr">15: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">16: </span>    <span style="color: #51afef;">var</span> album: Album
<span class="linenr">17: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">18: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">19: </span>}
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Album</span> {
<span class="linenr">22: </span>    <span style="color: #51afef;">var</span> name: <span style="color: #c678dd;">String</span>
<span class="linenr">23: </span>    <span style="color: #51afef;">var</span> imageURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">24: </span>    <span style="color: #51afef;">var</span> audioURL: <span style="color: #c678dd;">URL</span>
<span class="linenr">25: </span>    <span style="color: #51afef;">var</span> isLiked: <span style="color: #c678dd;">Bool</span>
<span class="linenr">26: </span>}
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Song</span>: Likeable {}
<span class="linenr">29: </span><span style="color: #51afef;">extension</span> <span style="color: #c678dd;">Album</span>: Likeable {}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb7d71a4" class="outline-3">
<h3 id="orgb7d71a4"><span class="section-number-3">5.6</span> Further Reading</h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li><a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html">Protocol</a><br /></li>
<li><a href="https://appcoda.com.tw/swift-protocol/">Swift開發指南：Protocols與Protocol Extensions的使用心法</a><br /></li>
<li><a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in SWIFT</a><br /></li>
<li><a href="https://blog.csdn.net/XunCiy/article/details/107367571">Swift5 14.Protocols</a><br /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-SW-enum" class="outline-2">
<h2 id="SW-enum"><span class="section-number-2">6</span> Enum</h2>
<div class="outline-text-2" id="text-SW-enum">
<p>
enumerations(或稱為enums)是Swift中一種特殊類型，它允許你表示多個「情況」或可能性。Enums(列舉)類似於Bool，但Bool只能是true或false，enums可以由開發者自行定義各種情況<sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup><br />
</p>
</div>

<div id="outline-container-org47bcd83" class="outline-3">
<h3 id="org47bcd83"><span class="section-number-3">6.1</span> without enum</h3>
<div class="outline-text-3" id="text-6-1">
<p>
假設我們要登錄學生的學習等第(A, B, C, D, E, F)，如下<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">var</span> Tom = <span style="color: #98be65;">"A"</span>
<span class="linenr">2: </span><span style="color: #51afef;">var</span> John = <span style="color: #98be65;">"B"</span>
<span class="linenr">3: </span><span style="color: #51afef;">var</span> James = <span style="color: #98be65;">"I"</span> <span style="color: #5B6268;">//</span><span style="color: #5B6268;">Error</span>
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(James)
</pre>
</div>

<p>
上述程式中的James其等第明顯超出合理範圍，對於後續要進行的判斷可能會出現很大問題，此時便是enum適用時機<br />
</p>
</div>
</div>

<div id="outline-container-orge584177" class="outline-3">
<h3 id="orge584177"><span class="section-number-3">6.2</span> with enum</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">grade</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">case</span> A
<span class="linenr"> 3: </span>    <span style="color: #51afef;">case</span> B
<span class="linenr"> 4: </span>    <span style="color: #51afef;">case</span> C
<span class="linenr"> 5: </span>    <span style="color: #51afef;">case</span> D
<span class="linenr"> 6: </span>    <span style="color: #51afef;">case</span> E
<span class="linenr"> 7: </span>    <span style="color: #51afef;">case</span> F
<span class="linenr"> 8: </span>}
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">var</span> Tome = grade.<span style="color: #dcaeea;">A</span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> John = grade.<span style="color: #dcaeea;">B</span>
<span class="linenr">12: </span><span style="color: #51afef;">var</span> James = grade.<span style="color: #dcaeea;">C</span>
</pre>
</div>
<p>
判斷檔案下載結果為另一項典型的enum適用情境:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">DownloadStatus</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">case</span> downloading
<span class="linenr">3: </span>    <span style="color: #51afef;">case</span> finished
<span class="linenr">4: </span>    <span style="color: #51afef;">case</span> failed
<span class="linenr">5: </span>    <span style="color: #51afef;">case</span> cancelled
<span class="linenr">6: </span>}
<span class="linenr">7: </span><span style="color: #51afef;">var</span> currentStatus = DownloadStatus.<span style="color: #c678dd;">downloading</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ce2e19" class="outline-3">
<h3 id="org7ce2e19"><span class="section-number-3">6.3</span> enum的rawValue</h3>
<div class="outline-text-3" id="text-6-3">
<p>
配合rawValue定義enum的值，可以讓enum自帶有意義的資訊。<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">Pet</span>: <span style="color: #c678dd;">String</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">case</span> Dog = <span style="color: #98be65;">"&#128054;"</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">case</span> Cat = <span style="color: #98be65;">"&#128049;"</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">case</span> Rabbit = <span style="color: #98be65;">"R"</span>
<span class="linenr">5: </span>}
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #51afef;">var</span> myPet = Pet.<span style="color: #dcaeea;">Rabbit</span>
<span class="linenr">8: </span><span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"my pet is a \(</span>myPet.<span style="color: #c678dd;">rawValue</span><span style="color: #98be65;">)"</span>)    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">output: my pet is a &#128048;</span>
</pre>
</div>

<pre class="example">
my pet is a R
</pre>
</div>
</div>
<div id="outline-container-org342c30d" class="outline-3">
<h3 id="org342c30d"><span class="section-number-3">6.4</span> enum v.s. switch</h3>
<div class="outline-text-3" id="text-6-4">
<p>
enum最大的用處就是搭配switch。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">let</span> currentStatus = DownloadStatus.<span style="color: #c678dd;">downloading</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">switch</span> currentStatus {
<span class="linenr"> 4: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">downloading</span>:
<span class="linenr"> 5: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Downloading..."</span>)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">finished</span>:
<span class="linenr"> 8: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Just finished the download..."</span>)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">case</span> .<span style="color: #dcaeea;">failed</span>:
<span class="linenr">11: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Failed to download the file..."</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">cancelled</span>:
<span class="linenr">14: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"The download is cancelled..."</span>)
<span class="linenr">15: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd011c48" class="outline-3">
<h3 id="orgd011c48"><span class="section-number-3">6.5</span> Swift列舉中最強大的功能之一：associated values</h3>
<div class="outline-text-3" id="text-6-5">
<p>
associated values。它允許我們在列舉中儲存額外的數據。我們宣告一個新的列舉，稱為WeatherCondition，它讓我們在每個天氣條件中可額外挾帶一些資訊：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">Cloud</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">case</span> cirrus
<span class="linenr"> 3: </span>    <span style="color: #51afef;">case</span> cumulus
<span class="linenr"> 4: </span>    <span style="color: #51afef;">case</span> altocumulus
<span class="linenr"> 5: </span>    <span style="color: #51afef;">case</span> stratus
<span class="linenr"> 6: </span>    <span style="color: #51afef;">case</span> cumulonimbus
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">enum</span> <span style="color: #c678dd;">WeatherCondition</span> {
<span class="linenr">10: </span>    <span style="color: #51afef;">case</span> <span style="color: #c678dd;">sunny</span>(temperature: <span style="color: #c678dd;">Float</span>)
<span class="linenr">11: </span>    <span style="color: #51afef;">case</span> <span style="color: #c678dd;">rainy</span>(inchesPerHour: <span style="color: #c678dd;">Float</span>)
<span class="linenr">12: </span>    <span style="color: #51afef;">case</span> <span style="color: #c678dd;">cloudy</span>(cloudType: Cloud, windSpeed: <span style="color: #c678dd;">Float</span>)
<span class="linenr">13: </span>}
</pre>
</div>
<p>
WeatherCondition的宣告。我們提供三個情境，在enum每個情境中都存有附加資訊。在sunny情況下，儲存一個參數名稱為temperature的Float。在rainy情況下，附帶一個Float類型的參數，命名為inchesPerHour，另外在cloudy情況下，我們附帶兩個參數，分別為Cloud類型的cloudType和Float類型的windSpeed。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">let</span> currentWeather = WeatherCondition.<span style="color: #c678dd;">cloudy</span>(cloudType: .<span style="color: #dcaeea;">cirrus</span>, windSpeed: <span style="color: #da8548; font-weight: bold;">4.2</span>)
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">switch</span> currentWeather {
<span class="linenr"> 4: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">sunny</span>(<span style="color: #51afef;">let</span> temperature):
<span class="linenr"> 5: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"It is sunny and the temperature is \(</span>temperature<span style="color: #98be65;">)."</span>)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">rainy</span>(<span style="color: #51afef;">let</span> inchesPerHour):
<span class="linenr"> 8: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"It is raining at a rate of \(</span>inchesPerHour<span style="color: #98be65;">) inches per hour."</span>)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">case</span> .<span style="color: #c678dd;">cloudy</span>(<span style="color: #51afef;">let</span> cloudType, <span style="color: #51afef;">let</span> windSpeed):
<span class="linenr">11: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"It is cloudy; there are \(</span>cloudType<span style="color: #98be65;">) clouds in the sky, and the wind speed is \(</span>windSpeed<span style="color: #98be65;">)."</span>)
<span class="linenr">12: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org96e0ebb" class="outline-2">
<h2 id="org96e0ebb"><span class="section-number-2">7</span> Struct v.s. Class</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-does-swiftui-use-structs-for-views">資料來源:Why does SwiftUI use structs for views?</a><br />
If you ever programmed for UIKit or AppKit (Apple’s original user interface frameworks for iOS and macOS) you’ll know that they use classes for views rather than structs. SwiftUI does not: we prefer to use structs for views across the board, and there are a couple of reasons why.<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup><br />
</p>
<ul class="org-ul">
<li>Structs are simpler and faster than classes.<br />
In SwiftUI, all our views are trivial structs and are almost free to create. Think about it: if you make a struct that holds a single integer, the entire size of your struct is… that one integer. Nothing else. No surprise extra values inherited from parent classes, or grandparent classes, or great-grandparent classes, etc – they contain exactly what you can see and nothing more.<br /></li>

<li>You can see this in action when you look at the kinds of things that can be a view. We already used Color.red and LinearGradient as views – trivial types that hold very little data. In fact, you can’t get a great deal simpler than using Color.red as a view: it holds no information other than “fill my space with red”.<br /></li>

<li>In comparison, Apple’s documentation for UIView lists about 200 properties and methods that UIView has, all of which get passed on to its subclasses whether they need them or not.<br /></li>
</ul>
</div>
<div id="outline-container-org5128251" class="outline-3">
<h3 id="org5128251"><span class="section-number-3">7.1</span> What is in class/struct</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<a href="https://www.avanderlee.com/swift/struct-class-differences/">資料來源:Struct vs classes in Swift: The differences explained</a><br />
</p>
</div>
<div id="outline-container-org1e29943" class="outline-4">
<h4 id="org1e29943"><span class="section-number-4">7.1.1</span> What is a class in Swift?</h4>
<div class="outline-text-4" id="text-7-1-1">
<p>
A class in Swift is a reference type which can contain:<br />
</p>
<ul class="org-ul">
<li>properties<br /></li>
<li>methods<br /></li>
<li>subscripts<br /></li>
<li>initializers<br /></li>
<li>protocol conformances<br /></li>
<li>extensions<br /></li>
</ul>

<p>
It’s often described as a template definition of an object, like in the following Article instance definition:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">ArticleClass</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">let</span> url: <span style="color: #c678dd;">URL</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">var</span> readCount: <span style="color: #c678dd;">Int</span> = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">init</span>(title: <span style="color: #c678dd;">String</span>, url: <span style="color: #c678dd;">URL</span>) {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">title</span> = title
<span class="linenr"> 8: </span>        <span style="color: #51afef;">self</span>.<span style="color: #c678dd;">url</span> = url
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb74d962" class="outline-4">
<h4 id="orgb74d962"><span class="section-number-4">7.1.2</span> What is a struct in Swift?</h4>
<div class="outline-text-4" id="text-7-1-2">
<p>
A struct in Swift is a value type which, just like classes, can contain:<br />
</p>
<ul class="org-ul">
<li>properties<br /></li>
<li>methods<br /></li>
<li>subscripts<br /></li>
<li>initializers<br /></li>
<li>protocol conformances<br /></li>
<li>extensions<br /></li>
</ul>

<p>
It can also be seen as a template definition of an object, like in the following Article instance definition:<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ArticleStruct</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> title: <span style="color: #c678dd;">String</span>
<span class="linenr">3: </span>    <span style="color: #51afef;">let</span> url: <span style="color: #c678dd;">URL</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">var</span> readCount: <span style="color: #c678dd;">Int</span> = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">5: </span>}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e13d1a" class="outline-4">
<h4 id="org5e13d1a"><span class="section-number-4">7.1.3</span> What are the differences between a struct and a class?</h4>
<div class="outline-text-4" id="text-7-1-3">
<p width="300">
<img src="images/coffee.gif" alt="coffee.gif" width="300" /><br />
When you pass a class object around your program, you are actually passing a reference to that object, so different parts of your program can share and modify your object. When you pass a structure [ or enum] around your program, what gets passes around is a copy of the structure. So modifications to structures don’t get shared.<sup><a id="fnr.13" class="footref" href="#fn.13">13</a></sup><br />
</p>

<p>
One of the major benefits of value types is that they are thread-safe not requiring any<br />
 synchronization.<sup><a id="fnr.13.100" class="footref" href="#fn.13">13</a></sup> Structs always have unique owners, whereas with classes multiple things can point to the same value.<sup><a id="fnr.14" class="footref" href="#fn.14">14</a></sup><br />
</p>

<p>
Classes don’t need the <b>mutating</b> keyword before methods that change their properties, because you can change properties of constant classes.<br />
In practice, what this means is that if we have two SwiftUI views and we send them both the same struct to work with, they actually each have a unique copy of that struct; if one changes it, the other won’t see that change. On the other hand, if we create an instance of a class and send that to both views, they will share changes.<sup><a id="fnr.14.100" class="footref" href="#fn.14">14</a></sup><br />
Value vs reference types<br />
</p>

<p>
One of the most important differences is that a struct is a value type while a class is a reference type. References to a class instance share single data which means that any changes in that class will be available to each reference.<br />
</p>

<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">let</span> articleClass = <span style="color: #c678dd;">ArticleClass</span>(title: <span style="color: #98be65;">"Struct vs Class"</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"www.avanderlee.com"</span>)!)
<span class="linenr">2: </span><span style="color: #51afef;">let</span> articleClassCopy = articleClass
<span class="linenr">3: </span>
<span class="linenr">4: </span>articleClass.<span style="color: #dcaeea;">readCount</span> = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(articleClassCopy.<span style="color: #dcaeea;">readCount</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Prints: 10</span>
</pre>
</div>

<p>
A struct is a value type and will create a unique copy for each new reference.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">var</span> articleStruct = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">"Struct vs Class"</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">"www.avanderlee.com"</span>)!, readCount: <span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">2: </span><span style="color: #51afef;">var</span> articleStructCopy = articleStruct
<span class="linenr">3: </span>
<span class="linenr">4: </span>articleStruct.<span style="color: #dcaeea;">readCount</span> = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(articleStructCopy.<span style="color: #dcaeea;">readCount</span>) <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Prints: 0</span>
</pre>
</div>
</div>
<div id="outline-container-orgf4edfbd" class="outline-5">
<h5 id="orgf4edfbd"><span class="section-number-5">7.1.3.1</span> The benefit of mutation in safety</h5>
<div class="outline-text-5" id="text-7-1-3-1">
<p>
With this, structs have the benefit of mutation in safety as you can trust that no other part of your app is changing the data at the same time. This makes it easier to reason about your code and is especially helpful in multi-threaded environments where a different thread could alter your data at the same time.<br />
</p>
</div>
</div>
<div id="outline-container-orgc626532" class="outline-5">
<h5 id="orgc626532"><span class="section-number-5">7.1.3.2</span> Structs get an initializer for free</h5>
<div class="outline-text-5" id="text-7-1-3-2">
<p>
If you go back and compare the above code examples you can see that the ArticleClass has a defined initializer which is required for classes. Structs, however, get an initializer for free.<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Before Swift 5.1 Memberwise initializers:</span>
<span class="linenr">2: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Generated memberwise init: init(title: String, url: URL, readCount: Int)</span>
<span class="linenr">3: </span><span style="color: #51afef;">let</span> article = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">""</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">""</span>)!, readCount: <span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">After Swift 5.1 Memberwise initializers, using the default 0 for read count</span>
<span class="linenr">6: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Generated memberwise init: init(title: String, url: URL, readCount: Int = 0)</span>
<span class="linenr">7: </span><span style="color: #51afef;">let</span> article = <span style="color: #c678dd;">ArticleStruct</span>(title: <span style="color: #98be65;">""</span>, url: <span style="color: #c678dd;">URL</span>(string: <span style="color: #98be65;">""</span>)!)
</pre>
</div>
</div>
</div>
<div id="outline-container-org81e600c" class="outline-5">
<h5 id="org81e600c"><span class="section-number-5">7.1.3.3</span> Classes allow inheritance</h5>
<div class="outline-text-5" id="text-7-1-3-3">
<p>
Classes can inherit the characteristics of another class and with that, act like abstract classes. A common example is a custom view controller which inherit from UIViewController.<br />
</p>

<p>
With protocols in Swift, this is often no longer needed and replaceable with protocols. Protocols can be used with both classes and structs while inheritance is only possible with classes.<br />
Classes can be deinitialized<br />
</p>

<p>
A class allows executing code just before it gets destroyed by using a deinit method. When you define the same deinit method in a struct you’ll get the following error:<br />
</p>
<p class="verse">
Deinitializers may only be declared within a class<br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgec055ea" class="outline-3">
<h3 id="orgec055ea"><span class="section-number-3">7.2</span> 如何決擇? / When should I go for a struct and when for a class?</h3>
<div class="outline-text-3" id="text-7-2">
<p>
A simple bullet point list will make it a lot easier to decide.<br />
</p>
</div>
<div id="outline-container-orgc3dd039" class="outline-4">
<h4 id="orgc3dd039"><span class="section-number-4">7.2.1</span> You should use a class when:</h4>
<div class="outline-text-4" id="text-7-2-1">
<ul class="org-ul">
<li>Comparing instance identity is needed by using <code>=</code><br /></li>
<li>Shared mutable state is required<br /></li>
<li>Objective-C interoperability is required<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org6ef3812" class="outline-4">
<h4 id="org6ef3812"><span class="section-number-4">7.2.2</span> You should use a struct when:</h4>
<div class="outline-text-4" id="text-7-2-2">
<ul class="org-ul">
<li>Comparing instance data is needed by using ==<br /></li>
<li>Unique copies with an independent state are required<br /></li>
<li>The data is used in multiple threads<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgd2138fe" class="outline-4">
<h4 id="orgd2138fe"><span class="section-number-4">7.2.3</span> Try to go for a struct by default.</h4>
<div class="outline-text-4" id="text-7-2-3">
<p>
Structs make your code easier to reason about and make it easier to work in multithreaded environments which we often have while developing in Swift.<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org3c83e9b" class="outline-3">
<h3 id="org3c83e9b"><span class="section-number-3">7.3</span> DEMO</h3>
<div class="outline-text-3" id="text-7-3">
<p>
以下這個 View 可正常運作，於 TextField 中所做的編輯修改都會即時顯示於 Text 中。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">User</span> {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> firstName<span style="color: #98be65;">" = Bilbo"</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">var</span> lastName = <span style="color: #98be65;">"Baggins"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@State</span> <span style="color: #51afef;">private</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        VStack {
<span class="linenr">11: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your name is \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">lastName</span><span style="color: #98be65;">)."</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr">14: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last name"</span>, text: $user.<span style="color: #dcaeea;">lastName</span>)
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
</pre>
</div>
<p>
但若將 struct 改為 class，雖程式仍可執行，但 Text 中的姓名卻不再隨 TextField 的修改而連動。<br />
To fix this, we need to tell SwiftUI when interesting parts of our class have changed. By “interesting parts” I mean parts that should cause SwiftUI to reload any views that are watching our class – it’s possible you might have lots of properties inside your class, but only a few should be exposed to the wider world in this way.<sup><a id="fnr.15" class="footref" href="#fn.15">15</a></sup><br />
若要將 struct 改為 class，則程式要改成：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #c678dd;">User</span>: <span style="color: #c678dd;">ObservableObject</span>{
<span class="linenr"> 2: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> firstName = <span style="color: #98be65;">"Bilbo"</span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">@Published</span> <span style="color: #51afef;">var</span> lastName = <span style="color: #98be65;">"Baggins"</span>
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">ContentView</span>: View {
<span class="linenr"> 7: </span>    <span style="color: #51afef;">@ObservedObject</span> <span style="color: #51afef;">var</span> user = <span style="color: #c678dd;">User</span>()
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">var</span> body: <span style="color: #51afef;">some</span> View {
<span class="linenr">10: </span>        VStack {
<span class="linenr">11: </span>            <span style="color: #c678dd;">Text</span>(<span style="color: #98be65;">"Your name is \(</span>user.<span style="color: #dcaeea;">firstName</span><span style="color: #98be65;">) \(</span>user.<span style="color: #dcaeea;">lastName</span><span style="color: #98be65;">)."</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"First name"</span>, text: $user.<span style="color: #dcaeea;">firstName</span>)
<span class="linenr">14: </span>            <span style="color: #c678dd;">TextField</span>(<span style="color: #98be65;">"Last name"</span>, text: $user.<span style="color: #dcaeea;">lastName</span>)
<span class="linenr">15: </span>        }
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>}
</pre>
</div>
<p>
Our User class has two properties: firstName and lastName. Whenever either of those two changes, we want to notify any views that are watching our class that a change has happened so they can be reloaded. We can do this using the @Published property observer.<br />
</p>

<p>
@Published is more or less half of @State: it tells Swift that whenever either of those two properties changes, it should send an announcement out to any SwiftUI views that are watching that they should reload.<br />
</p>

<p>
How do those views know which classes might send out these notifications? That’s another property wrapper, @ObservedObject, which is the other half of @State – it tells SwiftUI to watch a class for any change announcements.<br />
</p>

<p>
The @ObservedObject property wrapper can only be used on types that conform to the ObservableObject protocol. This protocol has no requirements, and really all it means is “we want other things to be able to monitor this for changes.”<br />
</p>

<p>
As you’ve seen, rather than just using @State to declare local state, we now take three steps:<br />
</p>

<ul class="org-ul">
<li>Make a class that conforms to the ObservableObject protocol.<br /></li>
<li>Mark some properties with @Published so that any views using the class get updated when they change.<br /></li>
<li>Create an instance of our class using the @ObservedObject property wrapper.<br /></li>
</ul>

<p>
The end result is that we can have our state stored in an external object, and, even better, we can now use that object in multiple views and have them all point to the same values.<br />
</p>
</div>
</div>
</div>

<div id="outline-container-some" class="outline-2">
<h2 id="some"><span class="section-number-2">8</span> <span class="todo TODO">TODO</span> some</h2>
<div class="outline-text-2" id="text-some">
<p class="verse">
Adding the keyword some in front of a return type indicates that the return type is opaque. <sup><a id="fnr.16" class="footref" href="#fn.16">16</a></sup><br />
</p>
</div>
<div id="outline-container-orgb5ae245" class="outline-3">
<h3 id="orgb5ae245"><span class="section-number-3">8.1</span> Generics</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-org9555bfe" class="outline-4">
<h4 id="org9555bfe"><span class="section-number-4">8.1.1</span> 問題</h4>
<div class="outline-text-4" id="text-8-1-1">
<p>
Generics 允許開發者在不同類型中複用你的程式碼，用來解決下列問題：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapInts</span>(_ a: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">Int</span>, _ b: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">Int</span>) {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">let</span> temporaryB = b
<span class="linenr"> 3: </span>    b = a
<span class="linenr"> 4: </span>    a = temporaryB
<span class="linenr"> 5: </span>}
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #51afef;">var</span> num1 = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr"> 8: </span><span style="color: #51afef;">var</span> num2 = <span style="color: #da8548; font-weight: bold;">20</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #c678dd;">swapInts</span>(&amp;num1, &amp;num2)
<span class="linenr">11: </span><span style="color: #c678dd;">print</span>(num1)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">20</span>
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(num2)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">10</span>
</pre>
</div>
<p>
但若想交換字串，則要寫成<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapStrings</span>(_ a: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">String</span>, _ b: <span style="color: #51afef;">inout</span> <span style="color: #c678dd;">String</span>) {
<span class="linenr">2: </span>    <span style="color: #51afef;">let</span> temporaryB = b
<span class="linenr">3: </span>    b = a
<span class="linenr">4: </span>    a = temporaryB
<span class="linenr">5: </span>}
</pre>
</div>
<p>
可以發現除了參數之外，重複的 code 實在太多<br />
</p>
</div>
</div>
<div id="outline-container-orgf424856" class="outline-4">
<h4 id="orgf424856"><span class="section-number-4">8.1.2</span> 解決方案</h4>
<div class="outline-text-4" id="text-8-1-2">
<p>
將固定型態的參數轉為 Generic type<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> Cocoa
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">func</span> <span style="color: #c678dd;">swapTwoValues</span>&lt;T&gt;(_ a: <span style="color: #51afef;">inout</span> T, _ b: <span style="color: #51afef;">inout</span> T) {
<span class="linenr"> 4: </span>    <span style="color: #51afef;">let</span> temporaryA = a
<span class="linenr"> 5: </span>    a = b
<span class="linenr"> 6: </span>    b = temporaryA
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #51afef;">var</span> num1 = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> num2 = <span style="color: #da8548; font-weight: bold;">20</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #c678dd;">swapTwoValues</span>(&amp;num1, &amp;num2)
<span class="linenr">14: </span><span style="color: #c678dd;">print</span>(num1)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">20</span>
<span class="linenr">15: </span><span style="color: #c678dd;">print</span>(num2)   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">10</span>
</pre>
</div>
<p>
另一個例子為 Stack 的實作：<br />
原本只能儲存 Int 的 Stack 如下，若要儲存字串則要再另行定義。<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">IntStack</span> {
<span class="linenr">2: </span>    <span style="color: #51afef;">var</span> items = [<span style="color: #c678dd;">Int</span>]()
<span class="linenr">3: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">push</span>(_ item: <span style="color: #c678dd;">Int</span>) {
<span class="linenr">4: </span>        items.<span style="color: #c678dd;">append</span>(item)
<span class="linenr">5: </span>    }
<span class="linenr">6: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">pop</span>() -&gt; <span style="color: #c678dd;">Int</span> {
<span class="linenr">7: </span>        <span style="color: #51afef;">return</span> items.<span style="color: #c678dd;">removeLast</span>()
<span class="linenr">8: </span>    }
<span class="linenr">9: </span>}
</pre>
</div>
<p>
改為 Generic type 後可動態變更為整數 stack 或字串 stack，如：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr"> 1: </span><span style="color: #51afef;">struct</span> <span style="color: #c678dd;">Stack</span>&lt;<span style="color: #c678dd;">Element</span>&gt; {
<span class="linenr"> 2: </span>    <span style="color: #51afef;">var</span> items = [<span style="color: #c678dd;">Element</span>]()
<span class="linenr"> 3: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">push</span>(_ item: <span style="color: #c678dd;">Element</span>) {
<span class="linenr"> 4: </span>        items.<span style="color: #c678dd;">append</span>(item)
<span class="linenr"> 5: </span>    }
<span class="linenr"> 6: </span>    <span style="color: #51afef;">mutating</span> <span style="color: #51afef;">func</span> <span style="color: #c678dd;">pop</span>() -&gt; <span style="color: #c678dd;">Element</span> {
<span class="linenr"> 7: </span>        <span style="color: #51afef;">return</span> items.<span style="color: #c678dd;">removeLast</span>()
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>}
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #51afef;">var</span> stackOfStrings = Stack&lt;<span style="color: #c678dd;">String</span>&gt;()
<span class="linenr">12: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"uno"</span>)
<span class="linenr">13: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"dos"</span>)
<span class="linenr">14: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"tres"</span>)
<span class="linenr">15: </span>stackOfStrings.<span style="color: #c678dd;">push</span>(<span style="color: #98be65;">"cuatro"</span>)
<span class="linenr">16: </span><span style="color: #5B6268;">// </span><span style="color: #5B6268;">the stack now contains 4 strings</span>
<span class="linenr">17: </span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc191236" class="outline-3">
<h3 id="orgc191236"><span class="section-number-3">8.2</span> opaque</h3>
<div class="outline-text-3" id="text-8-2">
<p>
帶有不透明（opaque）返回類型的函數或方法，將會隱藏其返回值的類型<sup><a id="fnr.17" class="footref" href="#fn.17">17</a></sup><br />
</p>
</div>
</div>
</div>

<div id="outline-container-advanced" class="outline-2">
<h2 id="advanced"><span class="section-number-2">9</span> <span class="todo TODO">TODO</span> 進階主題</h2>
<div class="outline-text-2" id="text-advanced">
<ul class="org-ul">
<li><a href="https://developer.apple.com/design/human-interface-guidelines/">Human Interface Guidelines</a>: Apple 的人機設計界面指南<br /></li>
<li><a href="https://developer.apple.com/documentation">Apple Developer Documentation</a>: Apple 開發者文件<br /></li>
<li><a href="https://www.appcoda.com.tw/protocol-extension/">利用 Protocol Extension 減少重覆的 Code　大大增強 Code 的維護性</a><br /></li>
<li><a href="https://appcoda.com.tw/mastering-swift/">精通Swift：列舉、閉包、泛型、Protocols和高階函數</a><br /></li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/onmyway133/blog/issues/611"> How to use Picker with enum in SwiftUI</a>心<br />
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/tarkalabs/all-about-debounce-4-ways-to-achieve-debounce-in-swift-e8f8ce22f544">All about debounce: 4 ways to achieve debounce in Swift</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.raywenderlich.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started">Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E7%B0%A1%E6%98%93%E8%AA%AA%E6%98%8Eswift-4-protocol-919b7f9cbaee">『簡易說明Swift 4』Protocol</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/protocol-extension/">利用 Protocol Extension 減少重覆的 Code　大大增強 Code 的維護性</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html">Protocols</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.appcoda.com.tw/swift-protocol/">Swift開發指南：Protocols與Protocol Extensions的使用心法</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10197366">Day-29 Swift 語法(25) - 協定 Protocol</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
<a href="https://abhimuralidharan.medium.com/all-about-protocols-in-swift-11a72d6ea354">All about protocols in swift</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
<a href="https://appcoda.com.tw/mastering-swift/">精通Swift：列舉、閉包、泛型、Protocols和高階函數</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara"><p class="footpara">
<a href="https://hugolu.gitbooks.io/learn-swift/content/Advanced/Enum.html">Swift學習筆記 </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-does-swiftui-use-structs-for-views">Why does SwiftUI use structs for views?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13">13</a></sup> <div class="footpara"><p class="footpara">
<a href="https://abhimuralidharan.medium.com/difference-between-a-struct-and-a-class-in-swift-53e08df73714">Difference between a struct and a class in Swift</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14">14</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/why-state-only-works-with-structs">Why @State only works with structs</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15">15</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.hackingwithswift.com/books/ios-swiftui/sharing-swiftui-state-with-observedobject">Sharing SwiftUI state with @ObservedObject</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16">16</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/@PhiJay/whats-this-some-in-swiftui-34e2c126d4c4">What’s this “some” in SwiftUI?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17">17</a></sup> <div class="footpara"><p class="footpara">
<a href="https://medium.com/jeremy-xue-s-blog/swift-%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80-opaque-types-600ad5758b91">Swift 程式語言 — Opaque Types</a><br />
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Yung Chin, Yen</p>
<p class="date">Created: 2021-03-16 Tue 19:21</p>
</div>
</body>
</html>
